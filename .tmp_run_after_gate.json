{
  "finalContent": "## System Vision\n\nProvide a clean, responsive single‑page website that instantly informs visitors about the bookstore’s brand, operating hours, and enables them to send inquiries via a contact form. The landing page should encourage foot traffic and build a basic online presence with minimal maintenance.\n\n## System Boundaries\n\n- **Deployment**: Hosted on a static web hosting service (e.g., Netlify, Vercel, or GitHub Pages).  \n- **Runtime**: Pure client‑side HTML/CSS/JavaScript; no server‑side rendering required.  \n- **Online/Offline**: Fully functional online; offline access limited to cached static assets via Service Worker (optional).  \n- **Single‑User**: No authentication; all visitors see the same content.  \n- **Persistence**: Contact form submissions are sent to Formspree – no local data storage.  \n- **Integrations**: Integration with Google Maps for location display, Formspree for contact form submissions, and Google Analytics for tracking page performance and user interactions.\n\n## Domain Model\n\n- Kern-Entitaeten: Nutzer/Besucher, Feature, Anforderung und Iteration.\n- Beziehungen: Eine Anforderung aggregiert Features; jede Iteration verfeinert bestehende Features und kann neue ueber ein strukturiertes Delta hinzufuegen.\n- Datenkonsistenz: Feature-IDs bleiben ueber Iterationen stabil und gelten als unveraenderliche Kennungen.\n- Quellkontext (Iteration 1): Erstelle eine sehr einfache Landingpage fuer einen Buchladen mit Hero, Oeffnungszeiten und Kontaktformular. Halte es kompakt.\n\n## Global Business Rules\n\n- Bestehende Features duerfen waehrend der iterativen Verfeinerung nicht entfernt werden.\n- Neue Features werden nur ueber validiertes Feature-Delta-JSON akzeptiert.\n- Doppelte Features (gleiche Intention/Bezeichnung) werden deterministisch verworfen.\n- Akzeptanzkriterien aller Features muessen testbar und beobachtbar bleiben.\n\n## Functional Feature Catalogue\n\n- Runtime: Node.js-Service mit Endpunkten fuer den iterativen Compiler.\n- Umgebung: Dockerisierte Local/Dev-Ausfuehrung mit reproduzierbarem Build und Health-Endpoint.\n- Abhaengigkeiten: LLM-Provider-Integration mit Model-Fallback-Strategie.\n- Auslieferung: Aenderungen werden mit TypeScript-Check und End-to-End-API-Smoke-Run validiert.\n\n### F-01: Responsive Page Layout\n\n1. Purpose\nTo ensure the bookstore landing page is fully accessible and visually coherent across a defined set of device viewports (mobile, tablet, desktop) by implementing a fluid, breakpoint-driven CSS layout system. This prevents horizontal scrolling, maintains readability, and optimizes navigation and content presentation for each screen size.\n\n2. Actors\nPrimary: End-user accessing the website via a web browser on a device (smartphone, tablet, laptop/desktop).\nSecondary: Web developer maintaining the codebase.\n\n3. Trigger\nThe user agent (browser) requests and begins rendering the `index.html` page.\n\n4. Preconditions\n*   The HTML document structure is complete and includes the necessary semantic container elements (e.g., `<header>`, `<main>`, `<footer>`).\n*   A CSS stylesheet is linked and loaded by the browser.\n*   The viewport meta tag is present in the HTML `<head>`: `<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">`.\n\n5. Main Flow\n1.  The browser parses the HTML and CSS.\n2.  The CSS establishes a base mobile-first layout using relative units (%, `rem`, `vw/vh`) for widths, margins, and font sizes. All primary content containers use `max-width: 100%` to contain content within the viewport.\n3.  The CSS defines three distinct media query breakpoints based on viewport width:\n    *   `@media (min-width: 768px)` for tablet portrait/landscape.\n    *   `@media (min-width: 1024px)` for desktop.\n4.  At the `768px` breakpoint, the layout modifies:\n    *   The main navigation (if present in header) switches from a vertical/hamburger pattern to a horizontal row.\n    *   Multi-column sections (e.g., opening hours and a brief \"about\" blurb) reflow from a single vertical stack to a two-column grid using `display: grid` or `flex-wrap`.\n    *   The Hero section's background image scaling and text container width are adjusted for better proportion.\n5.  At the `1024px` breakpoint, the layout further modifies:\n    *   The overall page container is centered with a fixed `max-width` (e.g., `1200px`) and horizontal `margin: auto`.\n    *   Multi-column sections expand to a three-column grid where content allows.\n    *   The contact form's input fields and textarea are set to a comfortable fixed or percentage-based width within their container.\n6.  The browser continuously evaluates the viewport width during resize events and applies the appropriate breakpoint styles, ensuring a seamless transition between layouts without content overflow or unreadably narrow columns.\n\n6. Alternate Flows\n*   A1: Extremely Narrow Viewport (< 320px). The mobile-first layout may cause text to wrap in an unbalanced way or touch targets to be too small. The system applies the base mobile styles but may trigger a browser-level zoom or horizontal scroll if content (e.g., a long, unbreakable word in the contact form label) exceeds the viewport. **Recovery:** CSS uses `word-wrap: break-word` and `min-width` constraints on interactive elements to mitigate this.\n*   A2: High Pixel Density / Zoomed Viewport. A user on a high-DPI device or using browser zoom may have a CSS viewport width that fluctuates around a breakpoint. The layout may flicker between breakpoint states during resize. **Recovery:** The design uses `rem` units and flexible grids that tolerate small width variations, minimizing visual \"jumps.\"\n*   A3: Disabled JavaScript/CSS. The responsive layout depends entirely on CSS. If CSS is disabled, the page falls back to a single-column, unstyled vertical document flow (default browser behavior), which remains fully functional and readable, albeit not visually optimized.\n\n7. Postconditions\n*   The landing page renders without horizontal scrollbars at all viewport widths from 320px to 1920px.\n*   All text remains readable (minimum font size ~16px on mobile, adjusted appropriately for larger screens) and does not require horizontal scrolling.\n*   Navigation is operable on all device sizes (e.g., touch-friendly targets on mobile, visible links on desktop).\n*   Form inputs and buttons have sufficient size and spacing for touch interaction on mobile devices.\n*   The visual hierarchy (Hero prominence, section separation) is maintained across all breakpoints.\n\n8. Data Impact\n*   No new data is stored or processed by the server or client-side scripts. This feature is purely presentational.\n*   The only \"data\" impacted is the CSS itself, which will increase in file size due to media query rules. Performance impact is negligible for a single, small page.\n\n9. UI Impact\n*   **Mobile (<768px):** Single-column layout. Header navigation condenses (e.g., to a hamburger menu or stacked links). Hero text is large and centered. All sections stack vertically with full-width containers. Form fields stack vertically.\n*   **Tablet (768px-1023px):** Introduction of 2-column grids for content-heavy sections (e.g., \"About\" text next to a small image, opening hours next to a map placeholder). Navigation expands to a horizontal list. Form may use a 2-column layout for label/input pairs if space permits.\n*   **Desktop (≥1024px):** Fixed-width, centered main container (e.g., 1140px). Navigation is fully horizontal. Hero image and text use a balanced side-by-side or overlaid layout. Content sections use up to 3 columns. Form fields may be inline in a single row where logical (e.g., first name / last name).\n\n10. Acceptance Criteria\n*   AC1: Using browser DevTools device mode, the page must render correctly at the following standard widths: 375px (iPhone SE), 768px (iPad), 1024px (iPad Pro), 1440px (standard desktop). No content overflows the viewport width.\n*   AC2: At the 768px breakpoint, the main navigation must change from a vertical stack to a horizontal row. At the 1024px breakpoint, the page content container must be centered with a visible max-width margin.\n*   AC3: All interactive elements (links, buttons, form inputs, submit button) must have a minimum touch target size of 44x44 CSS pixels on mobile viewports.\n*   AC4: The Hero section's call-to-action button must be clearly visible and positioned within the natural reading flow on all viewports.\n*   AC5: The contact form must be fully usable (all fields focusable, labels associated) and submit-able (via standard POST) on the smallest supported viewport (320px).\n\n### F-02: Hero Section with Background Image and Headline\n\n1. Purpose\nTo immediately establish the bookstore's brand identity and create a visually engaging first impression for visitors, encouraging them to explore the site and visit the physical location.\n\n2. Actors\nEnd-user (website visitor).\n\n3. Trigger\nThe browser finishes parsing the initial HTML document and begins rendering the page.\n\n4. Preconditions\nThe background image asset file (e.g., `hero-bg.jpg`) is present in the project's static assets directory and is accessible via the configured asset path. The HTML and CSS files containing the hero section code have been successfully deployed to the web server.\n\n5. Main Flow\n1.  The browser requests the landing page URL (e.g., `/`).\n2.  The server responds with the HTML document.\n3.  The browser parses the HTML and encounters the `<header>` or `<section>` element with a specific ID or class (e.g., `id=\"hero\"`).\n4.  The browser constructs the DOM node for the hero section container `div`.\n5.  The browser applies linked CSS styles to the hero container: `width: 100%`, `min-height: 60vh` (or a fixed pixel value like `400px`), `background-image: url('/assets/hero-bg.jpg')`, `background-size: cover`, `background-position: center`.\n6.  The browser creates a child element (e.g., `div` or `h1`) for the headline text within the hero container.\n7.  The browser applies CSS styles to the headline element: `position: absolute` or `relative`, `top: 50%`, `left: 50%`, `transform: translate(-50%, -50%)`, `color: #ffffff`, `text-align: center`, `font-size: 3rem` (with responsive `clamp()` or media queries), `text-shadow: 0 2px 4px rgba(0,0,0,0.5)`.\n8.  The browser initiates an asynchronous network request for the background image file.\n9.  Upon successful image download, the browser paints the image as the background of the hero container.\n10. The headline text is rendered, centered both horizontally and vertically over the background image.\n\n6. Alternate Flows\n*   **A1: Background image fails to load (404 or network error).**\n    1.  The browser's image load event triggers an error.\n    2.  The CSS `background-image` property fails to resolve.\n    3.  The hero container displays its fallback `background-color` (e.g., `#f0f0f0` or a solid brand color defined in CSS).\n    4.  The headline text remains visible and readable against the solid color background.\n*   **A2: Viewport width is extremely narrow (e.g., < 320px).**\n    1.  The responsive CSS media queries activate.\n    2.  The headline `font-size` is reduced to a minimum readable size (e.g., `1.5rem`).\n    3.  If the headline text is too long, it wraps onto multiple lines within the centered container.\n    4.  The `min-height` of the hero section may be reduced to preserve content visibility without excessive scrolling.\n\n7. Postconditions\nThe hero section is fully rendered and visible in the viewport. The background image is displayed (or the fallback color is shown), and the headline text is centered, styled, and legible. No JavaScript errors related to the hero section are present in the browser console.\n\n8. Data Impact\nNo persistent data is created, read, updated, or deleted by this feature. It consumes static asset files (image, CSS, HTML) from the server.\n\n9. UI Impact\n*   **Layout:** Introduces a full-width (`width: 100%`) block-level element at the top of the page.\n*   **Styling:** Applies a background image with `cover` sizing, ensuring no empty space while potentially cropping the image edges. Uses absolute/relative positioning and CSS transforms for perfect text centering.\n*   **Responsiveness:** Hero section height adjusts via `min-height` and/or media queries. Headline font size scales responsively using `clamp()` or breakpoints. Text remains centered on all screen sizes.\n*   **Accessibility:** The headline text must have a color contrast ratio of at least 4.5:1 against the average background image area. The hero container should have a semantic landmark role (e.g., `<header>` or `role=\"banner\"`).\n\n10. Acceptance Criteria\n*   **AC1:** The hero section occupies the full width of the browser viewport.\n*   **AC2:** The background image covers the entire hero section area without repeating, maintaining its aspect ratio (edges may be cropped).\n*   **AC3:** The headline text is perfectly centered both horizontally and vertically within the hero section.\n*   **AC4:** The headline text is clearly legible against the background image (or fallback color) with sufficient contrast.\n*   **AC5:** The hero section renders correctly on standard desktop (>= 1024px), tablet (768px-1023px), and mobile (< 768px) viewports. Text size and section height adjust appropriately.\n*   **AC6:** If the background image asset is missing, the fallback background color is displayed, and the headline remains fully visible and styled.\n*   **AC7:** The hero section is the first major visual element rendered above the fold on a typical network connection (loads within 2 seconds on a 3G connection simulation).\n\n### F-03: Hero Call‑to‑Action Button\n\n1. Purpose\nTo provide a clear, single-step navigation path from the hero section to the contact form, encouraging user engagement and inquiries.\n\n2. Actors\nAny visitor (end-user) viewing the landing page.\n\n3. Trigger\nThe user clicks the Call‑to‑Action (CTA) button located within the hero section.\n\n4. Preconditions\n- The landing page is fully loaded in the user's browser.\n- The hero section is rendered and visible.\n- The contact form section exists in the DOM with a specific, known target ID (e.g., `#contact-form`).\n- Client-side JavaScript is enabled and executing.\n\n5. Main Flow\n1. User accesses the landing page URL.\n2. The browser renders the complete HTML, including the hero section containing a button element with a specific identifier (e.g., `id=\"hero-cta-button\"`) and visible text (e.g., \"Kontaktieren Sie uns\" or \"Contact Us\").\n3. User positions the pointer over the CTA button and performs a primary click action (e.g., left-click).\n4. The browser's JavaScript event listener, attached to the button's `click` event, intercepts the default action.\n5. The script programmatically locates the target contact form element by its ID (`#contact-form`).\n6. The browser's viewport smoothly scrolls vertically until the top of the target form element aligns with the top of the viewport.\n7. Upon completion of the scroll animation, JavaScript sets the input focus on the first focusable field within the contact form (typically the name or email input field).\n8. The user can immediately begin typing into the focused form field.\n\n6. Alternate Flows\n- A1: Contact Form Element Not Found\n  1. In step 5 of the Main Flow, the script fails to locate an element with the specified target ID.\n  2. The click event is logged to the browser's console as a warning.\n  3. No scrolling occurs. The button's default behavior (if any) is prevented, and the user remains at the current scroll position.\n  4. The user must manually scroll to find the contact form.\n- A2: JavaScript Disabled or Erroneous\n  1. The user's browser has JavaScript disabled, or a critical script error prevents the event listener from functioning.\n  2. The button renders as a standard HTML button or anchor tag.\n  3. If the button is an anchor tag (`<a>`), its `href` attribute may point to the form's ID (e.g., `href=\"#contact-form\"`). The browser performs an instant, non-smooth jump to the form element.\n  4. If the button is a `<button>` without a valid `href` or script, clicking it has no effect; the user remains on the page.\n\n7. Postconditions\n- The page's vertical scroll position is changed such that the contact form section is visible at the top of the viewport.\n- The keyboard focus is programmatically moved to the first input field within the contact form.\n- No data is transmitted to the server, and no persistent client-side state (e.g., cookies, localStorage) is altered by this interaction.\n\n8. Data Impact\nNone. This feature involves no data read, creation, update, or deletion. It is a purely client-side UI interaction.\n\n9. UI Impact\n- **Static UI:** A button is added to the hero section's HTML structure with specific text and an identifier.\n- **Dynamic UI on Click:** The viewport scroll position animates smoothly to the contact form. The visual focus ring (or system focus indicator) appears on the first form input field after scrolling completes.\n\n10. Acceptance Criteria\n- AC1: The hero section contains a visible button element with the identifier `hero-cta-button`.\n- AC2: The button's visible text is a clear call to action (e.g., \"Kontaktformular\" or \"Contact Us\").\n- AC3: Clicking the button initiates a smooth scroll animation (duration ~500-800ms) to the element with ID `contact-form`.\n- AC4: After the scroll finishes, the `focus()` method is called on the first text input, email input, or textarea within the `#contact-form` container.\n- AC5: If the `#contact-form` element does not exist in the DOM, clicking the button does not cause a page jump or error alert; the click event is silently prevented, and the console logs a warning.\n- AC6: The feature works correctly across modern browsers (Chrome, Firefox, Safari, Edge) with JavaScript enabled.\n\n### F-04: Operating Hours Display\n\n### 1. Purpose\nProvide visitors with an immediately visible, accurately formatted block that lists the bookstore’s daily opening and closing times. The block must be readable on all device sizes and accessible to screen‑reader users.\n\n### 2. Actors\n- **Visitor** – any user who loads the landing page.  \n- **System** – the web server / client‑side JavaScript runtime that renders the page.\n\n### 3. Trigger\nThe feature is triggered when the landing page is requested and the DOM is ready for rendering (i.e., after the `DOMContentLoaded` event).\n\n### 4. Preconditions\n1. A JSON file `hours.json` exists at `/data/hours.json` with the structure defined in section 9.  \n2. The web server is configured to serve static assets from the `/data` directory with MIME type `application/json`.  \n3. The HTML template contains a placeholder element `<section id=\"operating-hours\"></section>`.  \n4. The CSS file `styles.css` includes the classes referenced in section 9.\n\n### 5. Main Flow\n1. **Page Load** – Browser loads `index.html` and all linked resources.  \n2. **DOM Ready** – JavaScript registers a listener for `DOMContentLoaded`.  \n3. **Fetch Data** – Listener executes `fetch('/data/hours.json')`.  \n4. **Validate Response** –  \n   a. Verify HTTP status 200.  \n   b. Parse response as JSON.  \n   c. Confirm the JSON object contains a `days` array with exactly 7 entries (Monday‑Sunday).  \n5. **Transform Data** – For each entry, format the time range as `HH:MM – HH:MM` (24‑hour clock). If `closed: true`, replace the time range with the string “Geschlossen”.  \n6. **Generate Markup** – Build a `<ul class=\"hours-list\">` where each `<li>` contains:  \n   - `<span class=\"day-name\">` with the localized weekday name.  \n   - `<span class=\"day-time\">` with the formatted time or “Geschlossen”.  \n7. **Inject Markup** – Replace the innerHTML of `<section id=\"operating-hours\">` with:  \n   ```html\n   <h2 class=\"section-title\">Öffnungszeiten</h2>\n   <ul class=\"hours-list\">…generated items…</ul>\n   ```  \n8. **Apply ARIA** – Add `role=\"region\"` and `aria-labelledby=\"operating-hours-title\"` to the section; set `id=\"operating-hours-title\"` on the `<h2>`.  \n9. **Cache Result** – Store the parsed JSON in `sessionStorage` under key `bookstoreHours` for the duration of the session.  \n10. **Error Handling (Success Path)** – If steps 1‑9 complete without exception, log `Operating hours rendered successfully` to the console.\n\n### 6. Alternate Flows\n**A1 – Fetch Failure (Network or 404)**  \n1. Fetch returns a non‑200 status or throws a network error.  \n2. Skip steps 4‑9.  \n3. Render fallback markup:  \n   ```html\n   <h2 class=\"section-title\">Öffnungszeiten</h2>\n   <p class=\"hours-error\">Öffnungszeiten derzeit nicht verfügbar.</p>\n   ```  \n4. Log error to console with details.\n\n**A2 – Invalid JSON Structure**  \n1. JSON parses but fails validation (missing days, wrong count, missing fields).  \n2. Follow steps A1‑4.\n\n**A3 – Browser Does Not Support `fetch`**  \n1. Detect missing `window.fetch`.  \n2. Load a polyfill script `fetch-polyfill.js` synchronously before step 3.  \n3. Continue with Main Flow after polyfill is loaded.\n\n### 7. Postconditions\n- The DOM contains a fully populated `<section id=\"operating-hours\">` with either the formatted hours list or the fallback error message.  \n- `sessionStorage['bookstoreHours']` holds the validated JSON object for the current session (or is absent if fetch failed).  \n- No uncaught JavaScript exceptions remain after page load.\n\n### 8. Data Impact\n| Operation | Data Store | Read/Write | Description |\n|-----------|------------|------------|-------------|\n| Read      | `/data/hours.json` (static file) | Read | Source of operating‑hour data. |\n| Write     | `sessionStorage['bookstoreHours']` | Write | Cached copy for the session. |\n| Read      | `sessionStorage['bookstoreHours']` (on subsequent loads) | Read | Used to avoid a second network request if present. |\n\n### 9. UI Impact\n- **HTML** – Add `<section id=\"operating-hours\"></section>` to `index.html` within the main content flow, positioned after the hero block.  \n- **CSS** – New classes:  \n  - `.hours-list` – `list-style:none; margin:0; padding:0; display:flex; flex-direction:column;`  \n  - `.day-name` – `font-weight:600; width:120px; display:inline-block;`  \n  - `.day-time` – `color:#555;`  \n  - `.hours-error` – `color:#c00; font-style:italic;`  \n  - Media query `@media (min-width:768px)` to display the list in two columns.  \n- **Accessibility** – `role=\"region\"` and `aria-labelledby` as defined in step 8 of Main Flow.  \n\n### 10. Acceptance Criteria\n1. **Correct Rendering** – All seven weekdays appear in German order (Montag‑Sonntag) with the exact times defined in `hours.json`. Closed days display “Geschlossen”.  \n2. **Responsive Layout** – On screens ≥ 768 px the list displays in two columns; on smaller screens it stacks vertically. Visual regression tests must pass for both breakpoints.  \n3. **Accessibility** – Screen‑reader navigation announces “Öffnungszeiten” as a region title and reads each day‑time pair. Automated aXe test must report no violations.  \n4. **Error Handling** – Simulating a 404 for `hours.json` results in the fallback paragraph “Öffnungszeiten derzeit nicht verfügbar.” displayed, and no JavaScript uncaught errors appear.  \n5. **Caching** – After a successful fetch, a subsequent page reload within the same browser session reads the data from `sessionStorage` (verified via console log).  \n6. **Performance** – The fetch request completes within 200 ms on a standard 3G connection; the total time from `DOMContentLoaded` to fully rendered hours block is ≤ 300 ms.  \n7. **Cross‑Browser** – Feature works in the latest versions of Chrome, Firefox, Safari, and Edge without polyfill; in Internet Explorer 11 the polyfill path is exercised and the block still renders correctly.\n\n### F-05: Contact Form Fields\n\n1. Purpose\nTo collect visitor inquiries (name, email address, and message) via a web form for the bookstore, enabling the business to receive and respond to questions.\n\n2. Actors\nVisitor (end-user of the website).\n\n3. Trigger\nThe visitor actively engages with the contact form by focusing on a field, entering data, or attempting to submit the form.\n\n4. Preconditions\n- The contact form section of the landing page is fully rendered and visible to the visitor.\n- All form fields (Name, Email, Message) are present, empty, and in an interactive state.\n- No previous form submission is in progress.\n\n5. Main Flow\n1. The visitor locates the contact form on the landing page.\n2. The visitor clicks into the \"Name\" input field and types their full name.\n3. The visitor clicks into the \"Email\" input field and types a valid email address.\n4. The visitor clicks into the \"Message\" textarea field and types their inquiry.\n5. The visitor clicks the \"Submit\" button.\n6. The system performs client-side validation on all fields (non-empty, valid email format).\n7. Upon successful validation, the system packages the form data into a structured payload (JSON or form-data).\n8. The system sends an asynchronous HTTP POST request to the predefined backend endpoint (e.g., `/api/contact`).\n9. The system receives a successful HTTP 200/201 response from the backend.\n10. The system clears all input fields and displays a persistent success confirmation message (e.g., \"Thank you! We will contact you soon.\") within the form container.\n\n6. Alternate Flows\n- **A1: Validation Failure (Client-Side)**\n  - At step 6, if any field is empty or the email is invalid, the system highlights the erroneous field(s) with a visual indicator (e.g., red border) and displays an inline, specific error message (e.g., \"Please enter your name\", \"Please enter a valid email address\").\n  - The form submission is halted. The visitor must correct the errors and re-attempt submission (return to step 5).\n- **A2: Backend Submission Failure**\n  - At step 9, if the backend returns an error (e.g., HTTP 500, network timeout), the system does not clear the form.\n  - The system displays a generic, persistent error message within the form container (e.g., \"Sorry, something went wrong. Please try again later.\").\n  - The visitor's entered data remains in the fields for correction and resubmission.\n\n7. Postconditions\n- On successful submission: All form fields are empty. A success message is visibly displayed. The form is in a state ready for a new submission.\n- On failed submission: The form fields retain the visitor's last input. An appropriate error message is visibly displayed.\n\n8. Data Impact\n- **Structured Data Created:** A contact inquiry object containing: `visitor_name` (string), `visitor_email` (string), `message_text` (string), `submission_timestamp` (datetime, generated server-side).\n- **Data Persistence:** The inquiry object is persisted to a designated data store (e.g., database table `contact_inquiries` or a third-party service) by the backend.\n- **Data Flow:** The client-side payload is transmitted via HTTPS to the backend endpoint. No sensitive data is stored client-side post-submission.\n\n9. UI Impact\n- **Form Structure:** Three vertically stacked, labeled input elements: a single-line text input for \"Name\", a single-line email input for \"Email\", and a multi-line textarea for \"Message\".\n- **Labels & Placeholders:** Each field has a persistent, accessible label (`<label>`). The \"Email\" field uses `type=\"email\"` for native browser validation. Placeholder text may be used for guidance (e.g., \"Your full name\").\n- **Submit Button:** A clearly labeled button (e.g., \"Send Message\") with `type=\"submit\"`.\n- **Feedback Areas:** Dedicated, dynamically updated containers for inline field validation errors and a form-level status message (success/error).\n- **Styling:** Consistent with the landing page's design system (typography, spacing, color palette). Interactive states (focus, hover) are defined. Error states use a designated error color.\n\n10. Acceptance Criteria\n- **AC1:** The form must render with exactly three fields: \"Name\" (text input), \"Email\" (email input), and \"Message\" (textarea), and a submit button.\n- **AC2:** Attempting to submit with any empty field must prevent submission and show an inline error message specific to the empty field(s).\n- **AC3:** Entering an invalid email format (e.g., \"test@\") must prevent submission and show the inline error \"Please enter a valid email address.\"\n- **AC4:** Submitting a form with all valid data must clear all fields and display the success message \"Thank you! We will contact you soon.\" within 2 seconds.\n- **AC5:** If the backend request fails (simulated), the form must not clear, and the generic error message must appear.\n- **AC6:** The \"Email\" field must accept and allow valid submission of standard email addresses (e.g., `user@example.com`).\n- **AC7:** All labels must be programmatically associated with their respective input fields using the `for`/`id` attribute pair for accessibility.\n\n### F-06: Client‑Side Form Validation\n\n1. Purpose\nTo ensure that all data entered into the contact form is complete and correctly formatted before submission, preventing unnecessary server requests and providing immediate, clear feedback to the user.\n\n2. Actors\n- End‑user: Fills out the contact form.\n- Frontend System: Executes validation logic and controls form submission.\n\n3. Trigger\nThe user attempts to submit the contact form by clicking the submit button or pressing the Enter key while focused on a form field.\n\n4. Preconditions\n- The contact form is fully rendered in the DOM.\n- Form fields exist with defined attributes: `name` (text input), `email` (email input), `message` (textarea).\n- All fields are marked as `required` in HTML.\n- Client‑side validation JavaScript is loaded and active.\n\n5. Main Flow\n1. User fills in values in the form fields (name, email, message).\n2. User initiates form submission.\n3. System validates each field synchronously against the following rules:\n   - **Name**: Must be non‑empty and ≤ 100 characters.\n   - **Email**: Must be non‑empty and match a standard email regex pattern (RFC 5322 compliant).\n   - **Message**: Must be non‑empty, ≥ 10 characters, and ≤ 1000 characters.\n4. If any field fails validation:\n   a. Add an `aria-invalid=\"true\"` attribute to the field.\n   b. Apply a visual error style (e.g., red border) to the field’s container.\n   c. Insert a specific error message element (`<div class=\"error-message\">`) below the field with text describing the exact failure.\n   d. Set focus to the first invalid field.\n   e. Halt the submission process (prevent default form submission event).\n5. If all fields pass validation:\n   a. Remove all existing error styles and messages from all fields.\n   b. Allow the form submission event to proceed normally (HTTP POST to the server endpoint).\n\n6. Alternate Flows\n- **A1: Real‑time validation on blur**\n  - When a user leaves a field (blur event), the system validates that single field.\n  - If invalid, immediately shows the error message and styling; if valid, clears any existing error for that field.\n  - This occurs independently of the main submit flow.\n- **A2: User corrects an error after initial failed submission**\n  - After errors are displayed, the user amends one or more fields.\n  - User attempts submission again.\n  - System re‑validates all fields (Main Flow steps 3–5) and either blocks submission with updated errors or allows it if all are now valid.\n- **A3: Submission with empty form**\n  - User clicks submit with all fields empty.\n  - System validates each required field, marks all as invalid, displays \"This field is required\" for each, and focuses the first field (name).\n\n7. Postconditions\n- **Invalid submission**: The form remains visible on the page. All invalid fields have persistent error UI (styling, ARIA attributes, error message text). No HTTP request is sent to the server. Form data is not cleared.\n- **Valid submission**: The form submission event is not intercepted by validation code. The browser proceeds with the native form submission (or JavaScript‑handled fetch) to the configured server endpoint. All error UI is removed from the form fields.\n\n8. Data Impact\n- No data is stored or modified on the client beyond temporary UI state.\n- Validation rules (regex patterns, length limits) are hard‑coded in the frontend JavaScript bundle.\n- Invalid input never leaves the client; only validated data is eligible for transmission.\n\n9. UI Impact\n- Each form field container gains/loses an `error` CSS class for styling (e.g., `border-color: #dc3545`).\n- Each field has an adjacent `<div class=\"error-message\" role=\"alert\" aria-live=\"polite\">` that becomes visible with text when invalid, hidden when valid.\n- The submit button remains enabled at all times; validation does not disable it but prevents submission on invalid data.\n- Focus management programmatically moves to the first invalid field upon failed submission.\n- All error messages are concise, specific, and in German (e.g., \"Bitte geben Sie Ihren Namen ein.\", \"Ungültige E‑Mail‑Adresse.\").\n\n10. Acceptance Criteria\n1. **Name field**:\n   - Empty → error \"Bitte geben Sie Ihren Namen ein.\" shown.\n   - > 100 characters → error \"Der Name darf maximal 100 Zeichen haben.\" shown.\n2. **Email field**:\n   - Empty → error \"Bitte geben Sie Ihre E‑Mail‑Adresse ein.\" shown.\n   - Invalid format (e.g., \"test@\") → error \"Bitte geben Sie eine gültige E‑Mail‑Adresse ein.\" shown.\n3. **Message field**:\n   - Empty → error \"Bitte geben Sie eine Nachricht ein.\" shown.\n   - < 10 characters → error \"Die Nachricht muss mindestens 10 Zeichen haben.\" shown.\n   - > 1000 characters → error \"Die Nachricht darf maximal 1000 Zeichen haben.\" shown.\n4. On submit with any invalid field: No network request is made; browser console shows no JavaScript errors; focus moves to first invalid field.\n5. On submit with all fields valid: Form submits normally (network request observed in dev tools); all error messages are removed.\n6. Validation triggers on submit and on blur for each field (per Alternate Flow A1).\n7. All error containers have `role=\"alert\"` and `aria-live=\"polite\"` for screen reader announcement.\n8. Invalid fields have `aria-invalid=\"true\"`; valid fields have `aria-invalid=\"false\"` or attribute removed.\n9. Validation logic is pure frontend; no server communication occurs during validation.\n\n### F-07: Form Submission Endpoint Integration\n\n1. Purpose\nTo securely receive validated contact form data from the frontend, process it, and forward the inquiry as an email to the bookstore's designated contact address. This enables the business to receive and respond to customer inquiries.\n\n2. Actors\nPrimary Actor: Customer (Website Visitor)\nSecondary Actor: Backend System / Email Service\n\n3. Trigger\nThe customer completes all required fields in the contact form and clicks the \"Submit\" button after successful client-side validation.\n\n4. Preconditions\n*   The contact form on the frontend has passed all client-side validation rules (e.g., valid email format, non-empty required fields).\n*   The backend API endpoint (e.g., `POST /api/contact`) is deployed, accessible, and healthy.\n*   The backend server has correct SMTP credentials configured and network access to an email relay service (e.g., SendGrid, AWS SES, or a local SMTP server).\n*   The customer's device has an active internet connection.\n\n5. Main Flow\n1.  The frontend JavaScript collects the form field values (`name`, `email`, `subject`, `message`) into a JSON object.\n2.  The frontend sends an HTTPS `POST` request to the configured backend endpoint, including the JSON object in the request body and setting the `Content-Type` header to `application/json`.\n3.  The backend server receives the request and parses the JSON body.\n4.  The backend performs server-side validation on all required fields (presence, basic sanitization, email format). If validation fails, the flow proceeds to Alternate Flow A.\n5.  The backend constructs a formatted email. The recipient is a fixed, configurable bookstore contact email (e.g., `contact@buchladen.de`). The sender is set to the customer's provided email address. The email subject includes the customer's subject. The email body includes the customer's name, email, and message, formatted for readability.\n6.  The backend initiates an SMTP transaction to send the constructed email.\n7.  If the SMTP transaction is successful, the backend logs the successful submission (including a timestamp and customer email) and returns an HTTP `200 OK` response with a JSON body: `{\"success\": true, \"message\": \"Ihre Nachricht wurde gesendet.\"}`.\n8.  The frontend receives the `200 OK` response, displays a success notification/modal to the user, and resets the form fields to empty.\n\n6. Alternate Flows\nA.  Server-Side Validation Failure:\n    *   At step 4, if any field is empty or the email format is invalid, the backend immediately returns an HTTP `400 Bad Request` response. The JSON body contains an error object detailing the failed field(s), e.g., `{\"success\": false, \"errors\": {\"email\": \"Ungültige E-Mail-Adresse\", \"message\": \"Dieses Feld ist erforderlich\"}}`.\n    *   The frontend receives the `400` response, parses the error details, and displays specific inline error messages next to the relevant form fields and/or a general error summary.\n\nB.  Email Service Failure:\n    *   At step 6, if the SMTP server returns an error (e.g., authentication failure, rate limit, connection timeout), the backend logs the detailed error (including the customer's data for debugging) and returns an HTTP `500 Internal Server Error` response with a generic JSON body: `{\"success\": false, \"message\": \"Serverfehler. Bitte versuchen Sie es später erneut.\"}`.\n    *   The frontend receives the `500` response and displays a generic, non-technical error notification to the user. The form data remains in the fields so the user can retry.\n\n7. Postconditions\n*   **Success:** The customer's inquiry has been delivered to the bookstore's inbox. A log entry recording the successful submission exists on the backend server. The frontend form is cleared and shows a success message.\n*   **Failure (Validation):** No email is sent. An error log entry may be created. The frontend form retains the user's input and displays validation errors.\n*   **Failure (Email Service):** No email is reliably sent. An error log entry with details is created on the backend server. The frontend form retains the user's input and displays a generic error message.\n\n8. Data Impact\n*   **Transient Data:** The customer's submitted data (`name`, `email`, `subject`, `message`) is transmitted from client to server and processed in memory.\n*   **Persisted Data (Backend):** A minimal log entry (timestamp, customer email, submission status) is written to the application log file or logging system. The full message content is not stored in a database by this feature.\n*   **External Data:** The customer's data is sent to and stored (in the inbox) of the external email service/recipient mailbox.\n\n9. UI Impact\n*   The contact form must have a loading state (e.g., disabled submit button, spinner) while the request is in flight.\n*   On a successful submission (HTTP 200), a clear, dismissible success notification must appear (e.g., toast message: \"Ihre Nachricht wurde erfolgreich gesendet.\").\n*   On a validation failure (HTTP 400), specific field-level error messages must appear below the relevant inputs, and/or a summary error banner at the top of the form.\n*   On a server/email failure (HTTP 500), a generic error notification must appear (e.g., \"Ein technischer Fehler ist aufgetreten. Bitte versuchen Sie es später noch einmal.\").\n*   The form must be reset to its initial empty state only after a `200` response.\n\n10. Acceptance Criteria\n1.  Given a customer fills all required fields with valid data, when they click submit, then an email containing the full inquiry is received at the configured bookstore contact address within 10 seconds.\n2.  Given a customer submits an invalid email address, when they click submit, then the backend returns HTTP 400 and the frontend displays an error specifically for the email field.\n3.  Given the backend email service (SMTP) is unavailable, when a valid form is submitted, then the backend returns HTTP 500 and the frontend displays a generic error message, not exposing internal SMTP details.\n4.  Given a successful submission, then the frontend form fields are cleared and a success message is visible to the user.\n5.  Given any API request, then all user-provided data is sanitized on the backend to prevent basic injection attacks (e.g., newlines in headers) before being used in email construction.\n6.  The backend endpoint only accepts `POST` requests and requires the `Content-Type: application/json` header. Requests with other methods or content types return `405` or `415` respectively.\n\n### F-08: Submission Success Message\n\n1. Purpose  \n   Provide immediate, clear feedback to the visitor that their contact‑form submission has been received and processed successfully, reinforcing trust and preventing duplicate submissions.\n\n2. Actors  \n   - **Visitor**: the end‑user who fills out and submits the contact form.  \n   - **Web Client**: the browser‑side JavaScript responsible for sending the request and rendering UI feedback.  \n   - **Backend API**: the HTTP endpoint that receives the form data and returns a success status.\n\n3. Trigger  \n   The backend API returns an HTTP 200 response with a JSON body `{ \"status\": \"success\" }` after a valid form submission.\n\n4. Preconditions  \n   1. The contact form fields have passed client‑side validation.  \n   2. The visitor has clicked the **Submit** button.  \n   3. The browser has an active network connection.  \n   4. The backend endpoint `/api/contact` is reachable and configured to return a success payload for valid submissions.\n\n5. Main Flow  \n   1. Visitor clicks the **Submit** button.  \n   2. Web Client disables the button, shows a loading spinner, and serializes the form data to JSON.  \n   3. Web Client sends an asynchronous `POST` request to `/api/contact` with the JSON payload and the header `Content-Type: application/json`.  \n   4. Backend processes the payload, stores the inquiry, and responds with HTTP 200 and body `{ \"status\": \"success\", \"messageId\": \"<uuid>\" }`.  \n   5. Web Client receives the response, re‑enables the **Submit** button, and hides the loading spinner.  \n   6. Web Client injects a success toast component into the DOM with the text **“Thank you! Your message has been sent.”**.  \n   7. The toast appears at the top‑right corner, uses ARIA role `alert`, and is styled with a green background and white text.  \n   8. The toast remains visible for 5 seconds, then fades out over 0.5 seconds and is removed from the DOM.  \n   9. Web Client clears all input fields in the contact form.  \n\n6. Alternate Flows  \n   **A1 – Server returns non‑200 status**  \n   1. Steps 1‑4 of the Main Flow execute.  \n   2. Backend responds with HTTP 4xx/5xx and a JSON body `{ \"status\": \"error\", \"errorMessage\": \"…\"} `.  \n   3. Web Client displays an error toast with the returned `errorMessage` instead of the success toast.  \n   4. Form fields remain populated for user correction.  \n\n   **A2 – Network failure or timeout**  \n   1. Steps 1‑3 of the Main Flow execute.  \n   2. The `fetch` promise rejects or times out after 10 seconds.  \n   3. Web Client displays an error toast: **“Unable to send your message. Please check your connection and try again.”**  \n   4. Form fields remain populated.  \n\n   **A3 – Duplicate rapid submissions**  \n   1. Visitor clicks **Submit** multiple times before the button is disabled.  \n   2. Web Client detects that a request is already in flight (internal flag `isSubmitting`).  \n   3. Subsequent clicks are ignored until the flag is cleared after step 5 of the Main Flow.  \n\n7. Postconditions  \n   - The UI shows a transient success toast confirming receipt.  \n   - All form inputs are cleared.  \n   - No pending network requests remain (`isSubmitting` flag = false).  \n   - Backend has persisted the inquiry and returned a unique `messageId`.  \n\n8. Data Impact  \n   - No new client‑side data is persisted beyond the transient toast.  \n   - Backend creates a new record in the `inquiries` table (outside the scope of this feature).  \n   - The client logs the `messageId` to the browser console for debugging (optional).  \n\n9. UI Impact  \n   - Add a reusable toast component (`<div class=\"toast success\" role=\"alert\">…</div>`).  \n   - Ensure the toast is responsive: width ≤ 90 % of viewport, max‑width 300 px, positioned 1 rem from the top and right edges.  \n   - Include CSS transitions for fade‑in (0.3 s) and fade‑out (0.5 s).  \n   - Update the **Submit** button style to indicate disabled state (`opacity:0.5; cursor:not-allowed`).  \n\n10. Acceptance Criteria  \n   - AC‑1: When the backend returns HTTP 200 with `{ \"status\":\"success\" }`, the success toast appears within 300 ms of the response.  \n   - AC‑2: The toast text exactly matches “Thank you! Your message has been sent.” and uses the green (`#28a745`) background with white (`#ffffff`) text.  \n   - AC‑3: The toast remains visible for 5 seconds, then fades out over 0.5 seconds and is removed from the DOM.  \n   - AC‑4: After the toast disappears, all form fields are empty and the **Submit** button is enabled.  \n   - AC‑5: The toast component has `role=\"alert\"` and is announced by screen readers.  \n   - AC‑6: In case of a non‑200 response or network error, an error toast is shown instead, and form fields retain their values.  \n   - AC‑7: Rapid double‑clicks on **Submit** do not produce multiple network requests or multiple toasts.  \n   - AC‑8: The feature works on the latest versions of Chrome, Firefox, Safari, and Edge on both desktop and mobile viewports.\n\n### F-09: Basic SEO Meta Tags\n\n1. Purpose\nTo ensure the bookstore landing page is correctly indexed by search engines and renders responsively on all devices by including a minimal, standardized set of meta tags within the HTML document's head section.\n\n2. Actors\n- Developer: Implements the meta tags in the HTML template.\n- Search Engine Crawlers (e.g., Googlebot): Consume the meta tags for indexing and SERP display.\n- Web Browsers: Utilize the viewport meta tag for responsive rendering.\n\n3. Trigger\nThe HTML document is generated and served in response to a user's HTTP request for the landing page.\n\n4. Preconditions\n- The static HTML file structure for the landing page (e.g., `index.html`) exists.\n- The developer has defined the official bookstore name and a concise, accurate description of its services and location.\n- The page will be served with the `text/html` MIME type.\n- The design requires a mobile-first, responsive layout.\n\n5. Main Flow\n1. Open the primary HTML template file (e.g., `index.html`) in a code editor.\n2. Locate the `<head>` section of the document.\n3. Insert the charset declaration as the first meta tag: `<meta charset=\"UTF-8\">`.\n4. Directly after the charset tag, insert the viewport meta tag for responsive design: `<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">`.\n5. Insert the `<title>` tag immediately after the viewport tag. The content must follow the format: `[Bookstore Name] | [City/Neighborhood]` (e.g., \"Bücherparadies | Berlin Mitte\"). Ensure the total character count is between 30 and 60.\n6. Insert the description meta tag: `<meta name=\"description\" content=\"[A single sentence summarizing the bookstore's specialty, atmosphere, and location.]\">`. Ensure the content is between 70 and 160 characters.\n7. Save the HTML file.\n8. Deploy the updated file to the web server's document root.\n\n6. Alternate Flows\n- A1: If the provided title or description content exceeds the recommended character limits, the developer shall truncate the text at the nearest word boundary within the limit and append an ellipsis (\"...\"). A warning shall be logged for content review.\n- A2: If the HTML template uses a server-side includes (SSI) or templating engine for the head section, the developer shall place the meta tags within the appropriate head include file or template block instead of the static file.\n- A3: During validation, if the `viewport` tag's `content` attribute is found to be missing `initial-scale=1.0`, the developer shall correct it to the exact required value to ensure proper mobile rendering.\n\n7. Postconditions\n- The `<head>` section of the deployed `index.html` contains exactly the four essential meta tags (`charset`, `viewport`, `title`, `description`) in the specified order.\n- The page source is valid HTML5.\n- Search engine crawlers can parse the title and description for indexing.\n- Web browsers apply the responsive viewport settings, allowing the page to scale correctly on mobile devices.\n- No console warnings or errors related to meta tags appear in browser developer tools.\n\n8. Data Impact\n- **Static Content**: The HTML template file (`index.html` or equivalent head template) is modified. No database tables, API endpoints, or user-generated content are affected.\n- **Configuration**: No new configuration files are created. The meta tag values are hardcoded based on the predefined bookstore name and description.\n\n9. UI Impact\n- **Indirect UI Impact**: The `title` tag content appears in the browser tab/window title. The `description` meta tag is frequently used by search engines as the snippet in search results (SERP). Neither affects the visual layout of the landing page itself.\n- **Functional UI Impact**: The `viewport` meta tag is critical for the responsive CSS to function correctly across different screen sizes, ensuring the Hero, opening hours, and contact form are usable on mobile devices.\n\n10. Acceptance Criteria\n- **AC1:** The page source (`Ctrl+U` in browser) contains `<meta charset=\"UTF-8\">` as the first element inside `<head>`.\n- **AC2:** The page source contains `<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">` immediately following the charset tag.\n- **AC3:** The page source contains a `<title>` tag with content matching the pattern `[Bookstore Name] | [Location]`, with a length between 30 and 60 characters.\n- **AC4:** The page source contains a `<meta name=\"description\"` tag with a `content` attribute value between 70 and 160 characters that accurately describes the store.\n- **AC5:** Running the HTML through the W3C Markup Validation Service (https://validator.w3.org/) returns no errors related to the `<title>`, `<meta charset>`, `<meta name=\"viewport\">`, or `<meta name=\"description\">` tags.\n- **AC6:** The page passes Google's Mobile-Friendly Test (https://search.google.com/test/mobile-friendly) with no viewport-related errors.\n- **AC7:** The bookstore name in the `<title>` tag exactly matches the official brand name provided in the project brief.\n\n### F-10: Favicon Inclusion\n\n1. Purpose\nTo provide a small, recognizable icon (favicon) that appears in browser tabs, bookmark lists, and history entries, enhancing brand recognition for the bookstore and improving user orientation when multiple tabs are open.\n\n2. Actors\n- Developer: Implements the favicon asset and HTML reference.\n- End User's Browser: Requests, caches, and displays the favicon.\n- End User: Sees the favicon in the browser UI.\n\n3. Trigger\nThe browser renders the bookstore's landing page (`index.html`) and parses the `<head>` section for icon definitions.\n\n4. Preconditions\n- A suitable icon file (e.g., `favicon.ico`) has been created and is available in the project's asset directory (e.g., `/assets/icons/`).\n- The developer has edit access to the `index.html` file.\n\n5. Main Flow\n1. The developer creates or obtains a square icon graphic representing the bookstore's brand.\n2. The developer converts the graphic to the `.ico` format, embedding multiple resolutions (e.g., 16x16, 32x32, 48x48 pixels) within the single file for broad browser compatibility.\n3. The developer saves the file as `favicon.ico` and places it in the designated assets directory (e.g., `/assets/icons/`).\n4. The developer opens the `index.html` file and locates the `<head>` section.\n5. The developer inserts the following HTML link tag within `<head>`:\n   `<link rel=\"icon\" href=\"/assets/icons/favicon.ico\" type=\"image/x-icon\">`\n6. The developer optionally adds a PNG fallback for modern browsers by inserting a second tag:\n   `<link rel=\"icon\" href=\"/assets/icons/favicon.png\" type=\"image/png\">`\n   (with a corresponding 32x32px PNG file in the same location).\n7. The developer saves `index.html` and deploys both the HTML file and the icon asset(s) to the web server.\n8. The developer tests by loading the page in a browser and confirming the icon appears in the tab.\n\n6. Alternate Flows\n- A1: Missing Favicon File. If the browser requests `/assets/icons/favicon.ico` and receives a 404 response, it will typically display a generic browser default icon. The developer must verify the file path and deployment.\n- A2: Incorrect MIME Type. If the server serves the `.ico` file with an incorrect `Content-Type` header (e.g., `text/plain`), some browsers may ignore it. The developer must configure the server to serve `.ico` files with `image/x-icon`.\n- A3: Browser Cache. After deployment, the developer's browser may still show the old icon due to caching. The developer must perform a hard refresh (Ctrl+F5) or clear the browser cache to see the updated favicon.\n\n7. Postconditions\n- The `favicon.ico` (and optional `favicon.png`) file exists in the specified directory on the web server.\n- The `index.html` file contains the correct `<link rel=\"icon\">` tag(s) in its `<head>` section.\n- When a user loads the landing page, the browser displays the bookstore's custom icon in the tab, bookmark list, and history.\n\n8. Data Impact\n- **No Database Changes:** This feature involves only static asset files and HTML markup. No database schema or data records are created, modified, or deleted.\n- **Static Assets:** Two new static files are added to the project repository and deployment package: `favicon.ico` and optionally `favicon.png`.\n\n9. UI Impact\n- **Browser Tab/Window:** A small (typically 16x16px) icon appears to the left of the page title in the browser tab.\n- **Bookmarks/Favorites:** The custom icon is displayed next to the bookmarked page title in the browser's bookmark manager.\n- **Browser History:** The icon may appear next to the page entry in the browser's history list.\n\n10. Acceptance Criteria\n- AC1: A valid `favicon.ico` file containing at least a 16x16px and 32x32px image is present at the path `/assets/icons/favicon.ico` on the deployed server.\n- AC2: The `index.html` file contains a `<link rel=\"icon\" href=\"/assets/icons/favicon.ico\" type=\"image/x-icon\">` tag within the `<head>` section.\n- AC3: Upon loading the live page in Google Chrome (latest), Mozilla Firefox (latest), and Safari (latest), the custom icon is visibly displayed in the browser tab.\n- AC4: When bookmarking the page in the same browsers, the custom icon is displayed in the bookmark/favorites entry.\n- AC5: No console errors related to favicon fetching (404, MIME type) appear in the browser's developer tools when loading the page.\n\n### F-11: Anchor‑Based Page Navigation\n\n1. Purpose\nTo enable users to navigate between distinct sections of the single-page website (Hero, Opening Hours, Contact) via clickable anchor links, using a smooth scrolling animation for an improved user experience.\n\n2. Actors\nPrimary Actor: Visitor (end-user)\nSecondary Actor: Web Browser (client-side JavaScript engine)\n\n3. Trigger\nThe visitor clicks on an anchor link (`<a href=\"#target-id\">`) in the primary navigation menu or a call-to-action button within the Hero section.\n\n4. Preconditions\n*   The HTML document contains at least two target sections (e.g., `<section id=\"oeffnungszeiten\">`, `<section id=\"kontakt\">`).\n*   The navigation menu and/or CTA button contain anchor links with `href` attributes matching the `id` of these target sections (e.g., `href=\"#kontakt\"`).\n*   The visitor's web browser has JavaScript enabled.\n\n5. Main Flow\n1.  The visitor clicks an anchor link element (e.g., `<a href=\"#oeffnungszeiten\">`).\n2.  The browser's default jump-to-anchor behavior is intercepted by a registered JavaScript event listener (`click` event).\n3.  The event listener's `preventDefault()` method is called to stop the browser's instant, discontinuous jump.\n4.  The script identifies the target element by selecting the DOM element with the `id` matching the link's `href` fragment (e.g., `document.getElementById('oeffnungszeiten')`).\n5.  The script calculates the vertical scroll position: `targetElement.offsetTop`.\n6.  The `window.scrollTo()` method is invoked with options: `{ top: calculatedPosition, behavior: 'smooth' }`.\n7.  The browser animates the scroll over a default duration (typically 300-500ms), moving the viewport smoothly until the top of the target section aligns with the top of the viewport.\n8.  The URL in the address bar is updated to include the fragment identifier (e.g., `.../index.html#oeffnungszeiten`) without triggering a page reload.\n\n6. Alternate Flows\n*   **A1: Target Element Does Not Exist.** If `document.getElementById()` returns `null`, the script logs an error to the console and does nothing. The browser performs its default action (no jump, URL hash updates).\n*   **A2: Fixed Header Offset.** If a fixed-position header obscures the target section upon scroll completion, the script calculates an offset (e.g., `targetElement.offsetTop - headerHeight`) and scrolls to that adjusted position.\n*   **A3: JavaScript Disabled.** If JavaScript is disabled, the browser's native anchor-jump behavior occurs (instant, discontinuous scroll to the element). The URL hash still updates.\n\n7. Postconditions\n*   The viewport is scrolled such that the target section's top edge is at (or near, considering any offset) the top of the visible viewport.\n*   The browser's address bar URL contains the correct fragment identifier corresponding to the navigated section.\n*   The page's overall state (data, forms) remains unchanged; only the scroll position is altered.\n\n8. Data Impact\nNo persistent data is created, read, updated, or deleted. All operations are transient and client-side only.\n\n9. UI Impact\n*   **CSS:** The `html` element should have `scroll-behavior: smooth;` defined as a progressive enhancement fallback for browsers with native smooth scroll support.\n*   **JavaScript:** A script must be included that attaches `click` event listeners to all anchor links with fragment-only `href` values (e.g., `href=\"#...\"`).\n*   **Visual Feedback (Optional):** The active navigation link corresponding to the currently visible section may be highlighted via a CSS class (e.g., `.active`), typically managed by a `IntersectionObserver` monitoring section visibility.\n\n10. Acceptance Criteria\n*   **AC1:** Clicking a navigation link smoothly scrolls the page to the correct target section within 2 seconds on a standard desktop viewport.\n*   **AC2:** After the scroll completes, the URL in the address bar correctly displays the fragment identifier (hash) of the target section.\n*   **AC3:** If a fixed header exists, the target section's heading/content is not hidden behind it after the scroll completes.\n*   **AC4:** The feature works on all modern browsers (Chrome, Firefox, Safari, Edge) and provides a basic instant-jump fallback on older browsers without smooth scroll support.\n*   **AC5:** Clicking an anchor link with an invalid/non-existent `href` fragment (e.g., `#invalid`) does not break the page; the browser's default behavior (URL hash update only) occurs without error.\n\n### F-12: Brand‑Consistent CSS Styling\n\n1. Purpose\nTo define and apply a unified visual identity across the entire bookstore landing page by enforcing specific colors, typography, and spacing rules. This ensures all UI components (Hero, Opening Hours, Contact Form) present a professional, cohesive brand experience.\n\n2. Actors\nWeb Browser (rendering engine).\n\n3. Trigger\nA user navigates to the bookstore’s landing page URL, causing the browser to request and render the HTML document.\n\n4. Preconditions\n- The HTML document contains a `<link>` tag referencing the brand CSS file at a known path (e.g., `/css/brand.css`).\n- The brand CSS file exists on the server and is accessible via the referenced path.\n- The HTML structure includes elements with class names or IDs that the CSS selectors target (e.g., `.hero`, `.opening-hours`, `.contact-form`).\n\n5. Main Flow\n1. The browser requests the landing page’s HTML document from the server.\n2. The browser parses the HTML and encounters the `<link rel=\"stylesheet\" href=\"/css/brand.css\">` tag.\n3. The browser initiates a separate HTTP request to fetch the `brand.css` file.\n4. The server responds with the CSS file containing brand rules (e.g., `:root` variables, class selectors).\n5. The browser parces the CSS, builds the CSS Object Model (CSSOM), and matches selectors to DOM elements.\n6. The browser computes final styles for each element, applying:\n   - Color values from CSS custom properties (e.g., `--color-primary: #2E5AAC`).\n   - Font family and size stacks (e.g., `font-family: 'Open Sans', sans-serif`).\n   - Spacing declarations (e.g., `margin: var(--spacing-md) 0;`).\n7. The browser paints the page, rendering all elements with the computed brand styles.\n\n6. Alternate Flows\n- A1: CSS file returns HTTP 404 (Not Found). The browser proceeds without external styles, rendering elements with browser default styles (User Agent Stylesheet). The page appears unstyled and inconsistent.\n- A2: CSS file contains a syntax error (e.g., missing closing brace). The browser ignores the malformed rule set but applies all preceding and subsequent valid rules. Partial styling is applied, potentially leaving some elements unstyled.\n- A3: User’s browser does not support CSS custom properties (e.g., IE11). The browser falls back to static values defined in fallback declarations (e.g., `color: #2E5AAC;` before `color: var(--color-primary);`). Brand consistency is maintained for supported properties.\n\n7. Postconditions\n- All visible elements within the Hero, Opening Hours, and Contact Form sections adhere to the defined brand style guide.\n- No element displays with browser default styling unless explicitly intended as a fallback.\n- The visual hierarchy (color contrast, font sizing, whitespace) matches the design specifications.\n\n8. Data Impact\n- None. The feature does not read, store, or modify any application data.\n- The CSS file may be cached by the browser or intermediate proxies, but no dynamic data is involved.\n\n9. UI Impact\n- The Hero section background uses the primary brand color (`#2E5AAC`), and its headline uses the primary heading font (`'Merriweather', serif`) at `2.5rem`.\n- Opening Hours table rows have consistent vertical padding (`1rem`) and use the secondary text color (`#4A4A4A`).\n- Contact form inputs share identical border styling (`1px solid #CCCCCC`), border radius (`4px`), and internal padding (`0.75rem`).\n- All body text uses the brand’s primary font (`'Open Sans', sans-serif`) at `1rem` with line height `1.6`.\n- Spacing between major sections follows a standardized scale (e.g., `--spacing-lg: 2rem;` applied as `margin-bottom`).\n\n10. Acceptance Criteria\n- AC1: The primary brand color (`#2E5AAC`) is correctly applied to all buttons, primary links, and the Hero background.\n- AC2: The font stack loads `'Open Sans'` for body text and `'Merriweather'` for all `h1`–`h6` elements, with fallbacks to system fonts.\n- AC3: The vertical spacing between the Hero, Opening Hours, and Contact Form sections equals exactly `2rem` (32px) on all viewport widths.\n- AC4: Contact form input fields have a consistent `border: 1px solid #CCCCCC`, `border-radius: 4px`, and `padding: 0.75rem 1rem`.\n- AC5: At the mobile breakpoint (`max-width: 768px`), font sizes reduce by `10%` and horizontal margins adjust to `1rem` while maintaining color and font family consistency.\n\n### F-13: Accessibility ARIA Labels for Form Elements\n\n1. Purpose\nTo ensure the contact form is fully perceivable, operable, and understandable for users of assistive technologies (e.g., screen readers) by providing programmatically determinable names, descriptions, and states for all form controls.\n\n2. Actors\nEnd-users utilizing assistive technologies such as screen readers (NVDA, JAWS, VoiceOver), screen magnifiers, or voice control software.\n\n3. Trigger\nThe landing page containing the contact form is rendered in the browser, or a user navigates to or activates a form control.\n\n4. Preconditions\nThe contact form HTML structure exists with input fields (text, email, textarea) and a submit button, as defined by the base feature. The form fields have associated visible text labels or placeholder text.\n\n5. Main Flow\n1.  Identify all interactive form elements within the contact form: `<input>` (text, email), `<textarea>`, and `<button>`.\n2.  For each `<input>` and `<textarea>`:\n    a.  If a visible `<label>` element exists and is correctly associated via the `for` attribute matching the element's `id`, no further action is required for the accessible name.\n    b.  If no visible `<label>` exists (e.g., placeholder-only), add an `aria-label` attribute with a concise, descriptive label (e.g., `aria-label=\"Your Message\"` for the message textarea).\n    c.  If additional instructions or hints exist (e.g., \"We'll respond within 24 hours\"), ensure the form control has an `aria-describedby` attribute referencing the `id` of the instruction element.\n3.  For required fields, add the `aria-required=\"true\"` attribute to the corresponding `<input>` or `<textarea>`.\n4.  For the submit `<button>`:\n    a.  Ensure the button text content provides an accessible name (e.g., \"Send Inquiry\").\n    b.  If the button uses only an icon, add an `aria-label` (e.g., `aria-label=\"Submit Inquiry\"`).\n5.  Implement an `aria-live=\"polite\"` region (e.g., a `<div>` with `role=\"status\"` or `aria-live=\"polite\"`) to announce form submission success or validation error messages. Associate this region with relevant form controls using `aria-describedby` when errors are present.\n6.  Perform manual testing with a screen reader to verify each form control is announced with its correct label, state (required), and any associated instructions or error messages.\n\n6. Alternate Flows\n1.  **Dynamic Error Announcement:** If a user submits the form with invalid data, the system generates inline error messages. The `aria-live` region must be updated to announce the first error. The erroneous field must have `aria-invalid=\"true\"` set and its `aria-describedby` updated to reference the specific error message element's `id`.\n2.  **Conditionally Revealed Fields:** If a form field (e.g., \"Phone Number\") is conditionally shown based on a user selection, the field must be added to the Accessibility Tree with its `aria-label` and `aria-required` (if applicable) upon being made visible. When hidden, it should be removed from the Accessibility Tree (e.g., via `aria-hidden=\"true\"` or `display: none`).\n\n7. Postconditions\nAll contact form controls have a programmatically determinable name and state. Validation and status messages are announced by assistive technologies. The contact form conforms to WCAG 2.1 Level AA Success Criteria 1.3.1 (Info and Relationships) and 4.1.2 (Name, Role, Value).\n\n8. Data Impact\nNo impact on form submission data payload or backend processing. The added ARIA attributes are purely presentational for assistive technologies and do not alter the data sent to the server.\n\n9. UI Impact\nNo visual changes to the user interface. All modifications are limited to the HTML attribute layer (`aria-label`, `aria-required`, `aria-describedby`, `aria-live`, `aria-invalid`, `role`). The visual layout, styling, and visible text remain unchanged.\n\n10. Acceptance Criteria\n*   **AC1:** Every text input and textarea in the contact form can be focused and its purpose is announced correctly by a screen reader (e.g., \"Name, edit text\").\n*   **AC2:** Required fields are announced as required (e.g., \"Email, required, edit text\").\n*   **AC3:** Any helper text associated with a field (e.g., \"Max 500 characters\") is announced after the field's label when the field receives focus.\n*   **AC4:** Upon form submission with validation errors, the first error is announced automatically from the `aria-live` region, and the erroneous field's state is announced as invalid when focused.\n*   **AC5:** The form passes an automated accessibility audit (using tools like WAVE, axe, or Lighthouse) with no critical violations related to form labels or inputs for the contact form section.\n\n### F-14: Image Optimization for Fast Load\n\n1. Purpose\nTo minimize the hero background image's file size and improve page load performance by compressing the source image and serving it in modern, web-optimized formats (primarily WebP) with appropriate fallbacks for browsers that lack support.\n\n2. Actors\n- Frontend build process (e.g., a task runner like Gulp or a static site generator plugin)\n- Web browser (client)\n- Content Delivery Network (CDN) or web server (for cache control)\n\n3. Trigger\nA user's browser requests the homepage (`/`), triggering the HTML response which includes a reference to the hero background image.\n\n4. Preconditions\n- A source hero image file (e.g., `hero-original.jpg` or `hero-original.png`) exists in the project's assets directory.\n- The build/deployment pipeline includes an image optimization tool (e.g., `imagemin`, `sharp`, or Squoosh CLI) configured for compression and format conversion.\n- The HTML template for the homepage contains a placeholder for the hero background image (e.g., a CSS `background-image` declaration or an `<img>`/`<picture>` element).\n\n5. Main Flow\n1. During the build process, the optimization tool locates the source hero image file.\n2. The tool applies lossy or lossless compression to the source image, targeting a quality setting (e.g., 75-85%) that balances visual fidelity and file size reduction.\n3. The compressed image is converted to the WebP format.\n4. The tool generates multiple resolution variants of the WebP image (e.g., `hero-1x.webp`, `hero-2x.webp`) to support responsive design and high-DPI displays.\n5. For browsers without WebP support, the tool generates fallback images in widely supported formats (JPEG for photographic content, PNG for graphics with transparency) at the same resolutions.\n6. The build process updates the homepage HTML/CSS to reference the optimized assets. This typically involves:\n   - Replacing a single `background-image: url(...)` in CSS with a `@media`-based swap or, preferably,\n   - Modifying the HTML to use a `<picture>` element with `<source type=\"image/webp\" srcset=\"...\">` and a fallback `<img src=\"hero-fallback.jpg\">`.\n7. The optimized image files (`.webp`, `.jpg`/`.png`) are copied to the final `dist/` or `public/` output directory.\n8. The web server or CDN is configured to serve these optimized files with long-term caching headers (e.g., `Cache-Control: max-age=31536000`).\n\n6. Alternate Flows\n- **A1: Image Optimization Tool Failure**: If the compression/conversion step fails (e.g., due to corrupt source file or tool error), the build logs a warning and copies the original source image to the output directory without modification. The HTML/CSS continues to reference this original file, ensuring the page remains functional but unoptimized.\n- **A2: Browser Without WebP or JPEG Support**: A very old browser that supports neither WebP nor standard JPEG/PNG. The `<picture>` element's fallback `<img>` with a supported format (e.g., PNG) will be displayed. If all formats fail, the browser's default broken image icon appears.\n- **A3: Low-Bandwidth Connection with Data Saver**: The user's browser or OS enables a data-saving mode that may ignore high-resolution sources. The `srcset` attribute with width descriptors (`w`) or pixel density descriptors (`x`) allows the browser to select the smallest appropriate variant automatically.\n\n7. Postconditions\n- The homepage's hero section displays an image that is visually comparable to the original but has a significantly smaller file size (typically 25-50% of the original).\n- The HTML/CSS of the deployed homepage references the newly generated, optimized image assets (`.webp` and fallback files).\n- The web server/CDN serves the correct image format (WebP or fallback) based on the `Accept` request header from the browser.\n- Overall page load time, particularly the Largest Contentful Paint (LCP) metric, is improved.\n\n8. Data Impact\n- **New/Modified Files**: Optimized hero image files (e.g., `hero-1x.webp`, `hero-2x.webp`, `hero-1x.jpg`) are added to the deployed asset directory.\n- **Modified Files**: The homepage HTML template and/or associated CSS file are updated to point to the new asset paths and formats.\n- **Configuration**: The project's build configuration (e.g., `gulpfile.js`, `webpack.config.js`, or `astro.config.mjs`) is updated to include the image optimization task for the hero image.\n- **Cache Metadata**: HTTP cache headers for image assets are set to a long duration (e.g., 1 year) with a fingerprinted filename strategy (e.g., `hero.abc123.webp`) to enable immutable caching. If fingerprinting is not used, cache headers must still be configured for long-term caching with versioning via query strings or directory changes.\n\n9. UI Impact\n- The visual appearance of the hero section remains identical to the design specification.\n- The image loads perceptibly faster, especially on slower network connections, reducing layout shift and improving the user's first impression.\n- No interactive elements are added or changed; the impact is purely on performance and rendering speed.\n\n10. Acceptance Criteria\n- **AC1**: The final deployed hero image file size (WebP version) is at least 60% smaller than the original source file, while maintaining a Structural Similarity Index (SSIM) of >0.95 or comparable visual quality in manual review.\n- **AC2**: A browser that supports WebP (e.g., Chrome, Firefox 65+, Edge 18+) receives the WebP image as evidenced by the Network tab in DevTools showing a `.webp` file.\n- **AC3**: A browser that does *not* support WebP (e.g., Safari < 14, older versions of IE) receives the fallback JPEG/PNG image as evidenced by the Network tab.\n- **AC4**: The `picture` element or CSS `image-set` correctly switches between 1x and 2x (or other) variants when the browser's device pixel ratio changes or the window is resized (for responsive widths).\n- **AC5**: Running Google Lighthouse (or WebPageTest) on the deployed homepage shows an improvement in the \"Properly size images\" and \"Efficiently encode images\" audits, and the LCP metric is below 2.5 seconds on a simulated 3G connection.\n- **AC6**: The build process completes successfully with the optimization step, and the optimized assets are present in the deployment package.\n\n### F-15: Cross‑Browser Compatibility Polyfills\n\n**1. Purpose**\n\nTo guarantee that the core interactive features of the bookstore landing page—specifically the contact form submission and responsive layout—function correctly in browsers with incomplete support for modern web standards (e.g., Internet Explorer 11, older mobile browsers). This feature does not enhance functionality for modern browsers.\n\n**2. Actors**\n\n*   End User: A visitor accessing the landing page with an older browser.\n*   Frontend Build System: The toolchain (e.g., Webpack, Vite, or a simple script) responsible for injecting polyfill scripts into the final HTML.\n\n**3. Trigger**\n\nThe browser begins parsing and executing the landing page's HTML, CSS, and JavaScript.\n\n**4. Preconditions**\n\n*   The core landing page code (HTML, CSS, JS) is written using modern standards (ES6+, CSS Grid/Flexbox, Fetch API, CSS Custom Properties).\n*   A build process or static HTML generation step is configured to include polyfill logic.\n*   Polyfill libraries (e.g., `core-js`, `whatwg-fetch`, `css-vars-ponyfill`) are available via a CDN or local assets.\n\n**5. Main Flow**\n\n1. The browser loads the initial HTML document.\n2. The build-injected script `polyfill-loader.js` executes immediately in the `<head>`.\n3. `polyfill-loader.js` performs feature detection for the following critical APIs:\n4. `Promise` (for async form handling).\n5. `fetch` (for form submission).\n6. `CSS.supports('display', 'grid')` (for responsive layout).\n7. If any detected API is missing or deficient, `polyfill-loader.js` dynamically injects `<script>` tags for the corresponding polyfill libraries from the configured CDN (e.g., unpkg.com or cdnjs) in a specific order:\n8. `core-js` (for ES6+ features like `Promise`, `Object.assign`, etc.).\n9. `whatwg-fetch` (for the `fetch` API).\n10. `css-vars-ponyfill` (for CSS Custom Properties).\n11. The polyfill scripts load and execute, patching the browser's global environment.\n12. The main application script `main.js` executes, now able to safely use the modern APIs. The contact form's `submit` event listener is attached, and the responsive CSS grid layout is applied without breaking.\n\n**6. Alternate Flows**\n\n1. **A1: Polyfill CDN Unavailable.** If a polyfill script fails to load (network error, CDN down), `polyfill-loader.js` logs a warning to the console. The contact form may fail to submit via AJAX. The page falls back to a non-JavaScript, full-page-reload form submission method if a standard `<form action>` attribute is present as a progressive enhancement fallback.\n2. **A2: Modern Browser.** If all feature detections pass (e.g., Chrome, Firefox, Edge, Safari 10+), `polyfill-loader.js` takes no action and exits. No polyfill scripts are injected, preserving performance.\n3. **A3: Partial Support.** Browser has `Promise` but lacks `fetch`. Only the `whatwg-fetch` polyfill is injected. The form submission logic using `fetch` becomes functional.\n\n**7. Postconditions**\n\n*   The contact form's JavaScript-driven submission (preventing default reload, sending data via `fetch`) works in the target older browsers.\n*   The CSS Grid/Flexbox layout renders correctly, and CSS variable-based theming (if used) applies.\n*   No uncaught JavaScript errors related to missing modern APIs appear in the console of tested legacy browsers.\n*   Modern browsers experience zero overhead from polyfill loading.\n\n**8. Data Impact**\n\nNone. This feature only affects client-side code delivery and execution. No server-side data structures or storage are modified.\n\n**9. UI Impact**\n\nNone. There is no visible change to the user interface. The polyfills operate transparently to ensure existing UI elements (form, layout) behave as designed.\n\n**10. Acceptance Criteria**\n\n1. **AC1:** The landing page loads without JavaScript errors in Internet Explorer 11.\n2. **AC2:** In IE11, the contact form successfully sends a test submission via the `fetch`-based AJAX method and displays the success/error message without a full page reload.\n3. **AC3:** The responsive layout (e.g., stacking of hero/content on mobile) renders correctly in IE11 and an Android 4.4 browser.\n4. **AC4:** In a modern browser (e.g., Chrome 120), the Network tab shows ZERO requests for polyfill libraries.\n5. **AC5:** The `polyfill-loader.js` script executes synchronously in the `<head>` before `main.js`. ## Non-Functional Requirements\n6. Runtime: Node.js-Service mit Endpunkten fuer den iterativen Compiler.\n7. Umgebung: Dockerisierte Local/Dev-Ausfuehrung mit reproduzierbarem Build und Health-Endpoint.\n8. Abhaengigkeiten: LLM-Provider-Integration mit Model-Fallback-Strategie.\n9. Auslieferung: Aenderungen werden mit TypeScript-Check und End-to-End-API-Smoke-Run validiert. ## Error Handling & Recovery\n10. Ungueltiges oder fehlendes strukturiertes Delta erzwingt einen strikten Fallback auf den vorherigen stabilen PRD-Zustand.\n11. Fehler bei Section-Regeneration im Freeze-Mode fallen sicher zurueck, ohne Feature-Verlust.\n12. Parse-Fehler gelten nur dann als non-blocking, wenn Integritaet weiterhin garantiert ist.\n13. Alle Fallback-Pfade werden mit explizitem Grund und Iterationsnummer protokolliert. ## Deployment & Infrastructure\n14. Runtime: Node.js-Service mit Endpunkten fuer den iterativen Compiler.\n15. Umgebung: Dockerisierte Local/Dev-Ausfuehrung mit reproduzierbarem Build und Health-Endpoint.\n16. Abhaengigkeiten: LLM-Provider-Integration mit Model-Fallback-Strategie.\n17. Auslieferung: Aenderungen werden mit TypeScript-Check und End-to-End-API-Smoke-Run validiert. ## Definition of Done\n18. Erforderliche PRD-Sektionen sind vorhanden und nicht leer.\n19. Die Feature-Anzahl faellt nicht unter die gefrorene Baseline.\n20. Es bleiben keine doppelten Feature-IDs oder doppelten Feature-Namen bestehen.\n21. Der iterative Lauf schliesst mit gueltigem finalen PRD und Diagnostics ab.\n\n## Non-Functional Requirements\n\n- Runtime: Node.js-Service mit Endpunkten fuer den iterativen Compiler.\n- Umgebung: Dockerisierte Local/Dev-Ausfuehrung mit reproduzierbarem Build und Health-Endpoint.\n- Abhaengigkeiten: LLM-Provider-Integration mit Model-Fallback-Strategie.\n- Auslieferung: Aenderungen werden mit TypeScript-Check und End-to-End-API-Smoke-Run validiert.\n\n## Error Handling & Recovery\n\n- Ungueltiges oder fehlendes strukturiertes Delta erzwingt einen strikten Fallback auf den vorherigen stabilen PRD-Zustand.\n- Fehler bei Section-Regeneration im Freeze-Mode fallen sicher zurueck, ohne Feature-Verlust.\n- Parse-Fehler gelten nur dann als non-blocking, wenn Integritaet weiterhin garantiert ist.\n- Alle Fallback-Pfade werden mit explizitem Grund und Iterationsnummer protokolliert.\n\n## Deployment & Infrastructure\n\n- Runtime: Node.js-Service mit Endpunkten fuer den iterativen Compiler.\n- Umgebung: Dockerisierte Local/Dev-Ausfuehrung mit reproduzierbarem Build und Health-Endpoint.\n- Abhaengigkeiten: LLM-Provider-Integration mit Model-Fallback-Strategie.\n- Auslieferung: Aenderungen werden mit TypeScript-Check und End-to-End-API-Smoke-Run validiert.\n\n## Definition of Done\n\n- Erforderliche PRD-Sektionen sind vorhanden und nicht leer.\n- Die Feature-Anzahl faellt nicht unter die gefrorene Baseline.\n- Es bleiben keine doppelten Feature-IDs oder doppelten Feature-Namen bestehen.\n- Der iterative Lauf schliesst mit gueltigem finalen PRD und Diagnostics ab.\n",
  "iterationLog": "# Iteration Protocol\n\nGenerated: 2026-02-17T13:57:57.598Z\nTotal Iterations: 2\n\n---\n\n## Iteration 1\n\n### Questions Identified\n\n1. Which specific visual style (color palette, typography, hero image dimensions) should be applied to maintain the bookstore’s brand identity?\n2. Should the opening hours be editable via a CMS or static file, and how frequently are they expected to change?\n3. Which third‑party service (e.g., Formspree, Google Forms, custom backend) will handle contact form submissions, and are there any required authentication or API keys?\n4. Is there a need for any accessibility compliance (e.g., WCAG AA) for the form fields and overall page?\n5. Do you require any analytics tracking (e.g., Google Analytics, Hotjar) to measure page performance and user interactions?\n\n### Best Practice Recommendations\n\n**Question 1: Which specific visual style (color palette, typography, hero image dimensions) should be applied to maintain the bookstore’s brand identity?**\n\nAnswer:\nTo maintain the bookstore's brand identity, I recommend applying a consistent visual style throughout the landing page. This includes:\n- A color palette of 2-3 primary colors (e.g., a warm beige, a deep blue, and a rich green) with corresponding secondary colors for backgrounds, text, and accents.\n- A typography system based on 1-2 fonts (e.g., Open Sans for body text and Montserrat for headings) with clear font sizes, line heights, and font weights for optimal readability.\n- Hero image dimensions of 1920x1080 pixels (Full HD) with a minimum aspect ratio of 16:9 to ensure proper display on various devices.\n- A logo with a minimum size of 200x200 pixels (SVG or PNG) to ensure crisp display on high-resolution screens.\n\nReasoning:\nA consistent visual style helps to establish the bookstore's brand identity and creates a professional, cohesive look. The recommended color palette, typography, and hero image dimensions provide a solid foundation for a visually appealing and responsive design.\n\nConcrete Implementation:\nIn the PRD under \"System Vision\" and \"Functional Feature Catalogue → F-01 Hero Section\":\n\"Apply a consistent visual style with a color palette of 2-3 primary colors, a typography system based on 1-2 fonts, and hero image dimensions of 1920x1080 pixels. Ensure the logo is displayed prominently with a minimum size of 200x200 pixels.\"\n\n**Question 2: Should the opening hours be editable via a CMS or static file, and how frequently are they expected to change?**\n\nAnswer:\nI recommend storing the opening hours in a static JSON file (e.g., `opening-hours.json`) that can be easily updated by the bookstore's staff. This approach allows for simple editing and updating of the hours without requiring a full-fledged CMS.\nGiven the nature of a bookstore, opening hours are likely to change infrequently (e.g., seasonal changes, holidays). Therefore, a static file approach should suffice.\n\nReasoning:\nUsing a static JSON file for opening hours provides a simple, low-maintenance solution that can be easily updated by the bookstore's staff. This approach also reduces the complexity and potential security risks associated with a CMS.\n\nConcrete Implementation:\nIn the PRD under \"System Boundaries & Operating Model → Persistence\":\n\"Store opening hours in a static JSON file (`opening-hours.json`) that can be easily updated by the bookstore's staff. This file will be used to populate the Opening Hours section (F-02).\"\n\n**Question 3: Which third‑party service (e.g., Formspree, Google Forms, custom backend) will handle contact form submissions, and are there any required authentication or API keys?**\n\nAnswer:\nI recommend using Formspree as the third-party service to handle contact form submissions. Formspree provides a simple, free plan that allows for up to 50 submissions per day, which should suffice for a small bookstore.\nTo use Formspree, you will need to create an account and obtain an API key, which will be used to configure the contact form.\n\nReasoning:\nFormspree is a popular, easy-to-use service that provides a free plan with sufficient features for a small bookstore. Using Formspree reduces the complexity and maintenance associated with building a custom backend.\n\nConcrete Implementation:\nIn the PRD under \"System Boundaries & Operating Model → Integrations\":\n\"Use Formspree as the third-party service to handle contact form submissions. Create a Formspree account and obtain an API key to configure the contact form (F-03).\"\n\n**Question 4: Is there a need for any accessibility compliance (e.g., WCAG AA) for the form fields and overall page?**\n\nAnswer:\nYes, I recommend ensuring that the landing page, including form fields, complies with the Web Content Accessibility Guidelines (WCAG) 2.1 Level AA. This includes:\n- Providing alternative text for images\n- Using semantic HTML for structure and meaning\n- Ensuring sufficient color contrast between text and background\n- Making all interactive elements (e.g., buttons, form fields) accessible via keyboard navigation\n- Providing clear and consistent navigation and links\n\nReasoning:\nEnsuring accessibility compliance is essential for providing an inclusive user experience and avoiding potential legal issues. WCAG 2.1 Level AA provides a widely accepted standard for accessibility.\n\nConcrete Implementation:\nIn the PRD under \"Non-Functional Requirements\" (new section):\n\"Ensure that the landing page, including form fields, complies with the Web Content Accessibility Guidelines (WCAG) 2.1 Level AA. This includes providing alternative text for images, using semantic HTML, ensuring sufficient color contrast, and making all interactive elements accessible via keyboard navigation.\"\n\n**Question 5: Do you require any analytics tracking (e.g., Google Analytics, Hotjar) to measure page performance and user interactions?**\n\nAnswer:\nI recommend using Google Analytics (GA) to track page performance and user interactions. GA provides a widely used, free service that can help the bookstore understand user behavior, track conversions, and optimize the landing page.\nTo use GA, you will need to create an account, obtain a tracking ID, and add the GA script to the landing page.\n\nReasoning:\nGoogle Analytics provides a powerful tool for understanding user behavior and optimizing the landing page. Using GA can help the bookstore improve user engagement, conversion rates, and overall user experience.\n\nConcrete Implementation:\nIn the PRD under \"System Boundaries & Operating Model → Integrations\":\n\"Use Google Analytics (GA) to track page performance and user interactions. Create a GA account, obtain a tracking ID, and add the GA script to the landing page. Configure GA to track page views, conversions, and user behavior.\"\n\nOpen Points and Gaps:\n- The PRD lacks a section on \"Non-Functional Requirements\", which should include accessibility compliance, performance, and security requirements.\n- The PRD does not specify the expected user traffic, which may impact the choice of third-party services (e.g., Formspree, Google Analytics).\n- The PRD does not provide a clear definition of done for each feature, which may lead to ambiguity during development.\n\nTo resolve these gaps, I recommend adding a \"Non-Functional Requirements\" section to the PRD, specifying the expected user traffic, and providing a clear definition of done for each feature.\n\n---\n\n## Iteration 2\n\n### JSON Structured Section Update Applied\n\n- Mode: JSON Structured Update\n- Section: systemBoundaries\n- Feedback: **Question 1: Which specific visual style (color palette, typography, hero image dimensions) should be applied to maintain the bookstore’s brand ident...\n\n### Best Practice Recommendations\n\n### Question 1: Identify the top unresolved product scope risk.\n\n**Answer:**\nThe top unresolved product scope risk is the lack of a clear definition of the iterative development process and how it will be managed. The PRD mentions an iterative approach but does not provide detailed guidelines on how features will be prioritized, developed, and tested in each iteration. This ambiguity could lead to scope creep, delays, or misunderstandings among team members.\n\n**Reasoning:**\nA well-defined iterative development process is crucial for managing product scope effectively. It helps ensure that the development team focuses on the most critical features, allocates resources efficiently, and delivers a working product increment at the end of each iteration. Without clear guidelines, the project may struggle with maintaining a consistent pace, ensuring quality, and meeting stakeholder expectations.\n\n**Concrete Implementation:**\nTo mitigate this risk, the PRD should include a section on the iterative development process, outlining:\n- How features will be prioritized (e.g., MoSCoW method, Kano model).\n- The duration of each iteration (e.g., 2-week sprints).\n- The roles and responsibilities of team members during each iteration.\n- The criteria for determining the completion of an iteration and the transition to the next one.\n- The process for handling changes in requirements or scope during an iteration.\n\n**Section to Update:** \"System Vision\" and \"Domain Model\" should be updated to reflect the iterative development approach and its management.\n\n---\n\n### Question 2: Identify the top unresolved UX risk.\n\n**Answer:**\nThe top unresolved UX risk is the potential lack of accessibility features for users with disabilities. While the PRD mentions adding accessibility ARIA labels for form elements (F-13), it does not comprehensively address accessibility across all features and interactions, which could lead to a poor user experience for individuals with disabilities.\n\n**Reasoning:**\nAccessibility is a critical aspect of UX, ensuring that all users can interact with the product effectively. Neglecting accessibility can result in legal issues, negative user experiences, and damage to the brand's reputation. It's essential to consider accessibility from the outset of the design and development process.\n\n**Concrete Implementation:**\nTo address this risk, the PRD should:\n- Include a comprehensive accessibility plan that covers all features and interactions.\n- Specify accessibility standards and guidelines (e.g., WCAG 2.1) that the product must adhere to.\n- Outline the process for conducting accessibility audits and testing.\n- Ensure that accessibility considerations are integrated into the design and development process from the beginning.\n\n**Section to Update:** \"Domain Model\" and \"Functional Feature Catalogue\" should be updated to include detailed accessibility considerations for each feature.\n\n---\n\n### Question 3: Identify the top unresolved data/operational risk.\n\n**Answer:**\nThe top unresolved data/operational risk is the lack of a detailed data storage and management plan. The PRD mentions using Formspree for contact form submissions but does not provide information on how the data will be stored, processed, or protected, which could lead to data breaches or non-compliance with data protection regulations.\n\n**Reasoning:**\nData protection and management are critical operational risks. Failing to properly secure and manage user data can lead to severe consequences, including legal penalties, loss of user trust, and reputational damage. It's essential to have a clear plan for data storage, processing, and protection.\n\n**Concrete Implementation:**\nTo mitigate this risk, the PRD should include a section on data management, outlining:\n- How user data will be collected, stored, and processed.\n- The measures in place for data protection and security (e.g., encryption, access controls).\n- Compliance with relevant data protection regulations (e.g., GDPR, CCPA).\n- The process for handling data breaches or security incidents.\n\n**Section to Update:** \"System Boundaries\" and \"Non-Functional Requirements\" should be updated to include detailed information on data management and protection.\n\n---\n\n### Open Points, Gaps, or Unresolved Areas:\n\n1. **Iterative Development Process:** As mentioned, the PRD lacks a clear definition of the iterative development process. This should be addressed by adding a section that outlines the process, including feature prioritization, iteration duration, roles, and responsibilities.\n\n2. **Accessibility:** While some accessibility features are mentioned, a comprehensive accessibility plan should be included to ensure the product is accessible to all users.\n\n3. **Data Management:** A detailed data storage and management plan should be added to the PRD to ensure user data is properly secured and managed.\n\n4. **Error Handling & Recovery:** The section on error handling and recovery should be expanded to include more specific scenarios and recovery strategies to ensure the system can handle and recover from errors gracefully.\n\n5. **Deployment & Infrastructure:** The deployment and infrastructure section should provide more details on the runtime environment, dependencies, and delivery process to ensure smooth deployment and operation of the system.\n\nBy addressing these open points and gaps, the PRD can provide a more comprehensive and robust foundation for the development of the bookstore landing page, ensuring it meets the required standards for functionality, usability, accessibility, and data protection.\n",
  "iterations": [
    {
      "iterationNumber": 1,
      "generatorOutput": "# Bookstore Landing Page\n\n## System Vision\nProvide a clean, responsive single‑page website that instantly informs visitors about the bookstore’s brand, operating hours, and enables them to send inquiries via a contact form. The landing page should encourage foot traffic and build a basic online presence with minimal maintenance.\n\n## System Boundaries & Operating Model\n- **Deployment**: Hosted on a static web hosting service (e.g., Netlify, Vercel, or GitHub Pages).  \n- **Runtime**: Pure client‑side HTML/CSS/JavaScript; no server‑side rendering required.  \n- **Online/Offline**: Fully functional online; offline access limited to cached static assets via Service Worker (optional).  \n- **Single‑User**: No authentication; all visitors see the same content.  \n- **Persistence**: Contact form submissions are sent to a third‑party endpoint (e.g., Formspree, Google Forms) – no local data storage.  \n- **Integrations**: Optional integration with Google Maps for location display and with an email service for form delivery.\n\n## Functional Feature Catalogue\n\n### F-01 Hero Section\n**Feature Name:** Hero Banner with Branding  \n\n1. **Purpose** – Present the bookstore’s name, tagline, and a compelling visual to capture visitor attention.  \n2. **Actors** – Any site visitor.  \n3. **Trigger** – Page load.  \n4. **Preconditions** – Hero image assets are uploaded and referenced in the code.  \n5. **Main Flow**  \n   1. Browser requests `index.html`.  \n   2. Header component renders with background image, logo, and tagline.  \n   3. A primary call‑to‑action button (“Visit Us”) scrolls to the Opening Hours section.  \n6. **Alternate Flows**  \n   - If the image fails to load, display a solid background color with the logo and tagline.  \n   - If JavaScript is disabled, the CTA still appears as a plain anchor link.  \n7. **Postconditions** – Hero is visible; page is ready for further interaction.  \n8. **Data Impact** – No data creation or modification.  \n9. **UI Impact** – Adds a full‑width hero block at the top of the page with responsive styling.  \n10. **Acceptance Criteria**  \n    - Hero displays correctly on desktop (≥1024 px) and mobile (≤480 px).  \n    - CTA button scrolls smoothly to the Opening Hours section.  \n    - Fallback background appears when the image cannot be loaded.\n\n### F-02 Opening Hours Section\n**Feature Name:** Display of Store Opening Times  \n\n1. **Purpose** – Inform visitors of daily opening and closing times.  \n2. **Actors** – Any site visitor.  \n3. **Trigger** – Page load (section rendered after Hero).  \n4. **Preconditions** – Opening hours data is defined in a JSON configuration file or embedded in the HTML.  \n5. **Main Flow**  \n   1. Component reads opening hours data.  \n   2. Renders a list/table with days of the week and corresponding times.  \n   3. Highlights the current day.  \n6. **Alternate Flows**  \n   - If data is missing, display a default message “Please call us for current hours.”  \n   - If JavaScript is disabled, static HTML fallback shows the same information.  \n7. **Postconditions** – Opening hours are visible and correctly formatted.  \n8. **Data Impact** – No data is stored; only read‑only display.  \n9. **UI Impact** – Adds a centered section with a heading “Opening Hours” and a responsive list/table.  \n10. **Acceptance Criteria**  \n    - All seven days are displayed with correct times.  \n    - Current day is visually distinguished.  \n    - Section remains legible on both desktop and mobile viewports.\n\n### F-03 Contact Form\n**Feature Name:** Visitor Inquiry Form  \n\n1. **Purpose** – Allow visitors to send questions, feedback, or event requests to the bookstore.  \n2. **Actors** – Any site visitor.  \n3. **Trigger** – User clicks “Send Message” button after filling the form.  \n4. **Preconditions** – Form endpoint (e.g., Formspree URL) is configured; required fields (Name, Email, Message) are marked.  \n5. **Main Flow**  \n   1. User fills Name, Email, Subject (optional), and Message fields.  \n   2. User clicks “Send Message”.  \n   3. Front‑end validates required fields and email format.  \n   4. Form data is POSTed to the external endpoint.  \n   5. On success, a thank‑you message is displayed; form fields are cleared.  \n6. **Alternate Flows**  \n   - Validation failure: display inline error messages.  \n   - Network error or endpoint returns non‑200: show a retry prompt.  \n   - Spam protection: optional reCAPTCHA challenge if configured.  \n7. **Postconditions** – Inquiry is transmitted to the bookstore’s email; user sees confirmation.  \n8. **Data Impact** – No persistent storage on the site; data is sent to third‑party service.  \n9. **UI Impact** – Adds a contact section with input fields, submit button, and success/error messages. Responsive layout for mobile.  \n10. **Acceptance Criteria**  \n    - Form does not submit when required fields are empty or email is invalid.  \n    - Successful submission shows “Thank you for contacting us!” within 2 seconds.  \n    - Errors are clearly indicated and allow retry.  \n\n---\n\n## Feature Delta (JSON)\n```json\n{\n  \"addedFeatures\": [\n    { \"featureId\": \"F-01\", \"name\": \"Hero Banner with Branding\", \"shortDescription\": \"Top visual with logo, tagline, and CTA\" },\n    { \"featureId\": \"F-02\", \"name\": \"Display of Store Opening Times\", \"shortDescription\": \"Shows weekly opening hours, highlights today\" },\n    { \"featureId\": \"F-03\", \"name\": \"Visitor Inquiry Form\", \"shortDescription\": \"Simple contact form sending data to external endpoint\" }\n  ],\n  \"updatedFeatures\": []\n}\n```\n\n## Questions for Improvement\n1. Which specific visual style (color palette, typography, hero image dimensions) should be applied to maintain the bookstore’s brand identity?  \n2. Should the opening hours be editable via a CMS or static file, and how frequently are they expected to change?  \n3. Which third‑party service (e.g., Formspree, Google Forms, custom backend) will handle contact form submissions, and are there any required authentication or API keys?  \n4. Is there a need for any accessibility compliance (e.g., WCAG AA) for the form fields and overall page?  \n5. Do you require any analytics tracking (e.g., Google Analytics, Hotjar) to measure page performance and user interactions?",
      "answererOutput": "**Question 1: Which specific visual style (color palette, typography, hero image dimensions) should be applied to maintain the bookstore’s brand identity?**\n\nAnswer:\nTo maintain the bookstore's brand identity, I recommend applying a consistent visual style throughout the landing page. This includes:\n- A color palette of 2-3 primary colors (e.g., a warm beige, a deep blue, and a rich green) with corresponding secondary colors for backgrounds, text, and accents.\n- A typography system based on 1-2 fonts (e.g., Open Sans for body text and Montserrat for headings) with clear font sizes, line heights, and font weights for optimal readability.\n- Hero image dimensions of 1920x1080 pixels (Full HD) with a minimum aspect ratio of 16:9 to ensure proper display on various devices.\n- A logo with a minimum size of 200x200 pixels (SVG or PNG) to ensure crisp display on high-resolution screens.\n\nReasoning:\nA consistent visual style helps to establish the bookstore's brand identity and creates a professional, cohesive look. The recommended color palette, typography, and hero image dimensions provide a solid foundation for a visually appealing and responsive design.\n\nConcrete Implementation:\nIn the PRD under \"System Vision\" and \"Functional Feature Catalogue → F-01 Hero Section\":\n\"Apply a consistent visual style with a color palette of 2-3 primary colors, a typography system based on 1-2 fonts, and hero image dimensions of 1920x1080 pixels. Ensure the logo is displayed prominently with a minimum size of 200x200 pixels.\"\n\n**Question 2: Should the opening hours be editable via a CMS or static file, and how frequently are they expected to change?**\n\nAnswer:\nI recommend storing the opening hours in a static JSON file (e.g., `opening-hours.json`) that can be easily updated by the bookstore's staff. This approach allows for simple editing and updating of the hours without requiring a full-fledged CMS.\nGiven the nature of a bookstore, opening hours are likely to change infrequently (e.g., seasonal changes, holidays). Therefore, a static file approach should suffice.\n\nReasoning:\nUsing a static JSON file for opening hours provides a simple, low-maintenance solution that can be easily updated by the bookstore's staff. This approach also reduces the complexity and potential security risks associated with a CMS.\n\nConcrete Implementation:\nIn the PRD under \"System Boundaries & Operating Model → Persistence\":\n\"Store opening hours in a static JSON file (`opening-hours.json`) that can be easily updated by the bookstore's staff. This file will be used to populate the Opening Hours section (F-02).\"\n\n**Question 3: Which third‑party service (e.g., Formspree, Google Forms, custom backend) will handle contact form submissions, and are there any required authentication or API keys?**\n\nAnswer:\nI recommend using Formspree as the third-party service to handle contact form submissions. Formspree provides a simple, free plan that allows for up to 50 submissions per day, which should suffice for a small bookstore.\nTo use Formspree, you will need to create an account and obtain an API key, which will be used to configure the contact form.\n\nReasoning:\nFormspree is a popular, easy-to-use service that provides a free plan with sufficient features for a small bookstore. Using Formspree reduces the complexity and maintenance associated with building a custom backend.\n\nConcrete Implementation:\nIn the PRD under \"System Boundaries & Operating Model → Integrations\":\n\"Use Formspree as the third-party service to handle contact form submissions. Create a Formspree account and obtain an API key to configure the contact form (F-03).\"\n\n**Question 4: Is there a need for any accessibility compliance (e.g., WCAG AA) for the form fields and overall page?**\n\nAnswer:\nYes, I recommend ensuring that the landing page, including form fields, complies with the Web Content Accessibility Guidelines (WCAG) 2.1 Level AA. This includes:\n- Providing alternative text for images\n- Using semantic HTML for structure and meaning\n- Ensuring sufficient color contrast between text and background\n- Making all interactive elements (e.g., buttons, form fields) accessible via keyboard navigation\n- Providing clear and consistent navigation and links\n\nReasoning:\nEnsuring accessibility compliance is essential for providing an inclusive user experience and avoiding potential legal issues. WCAG 2.1 Level AA provides a widely accepted standard for accessibility.\n\nConcrete Implementation:\nIn the PRD under \"Non-Functional Requirements\" (new section):\n\"Ensure that the landing page, including form fields, complies with the Web Content Accessibility Guidelines (WCAG) 2.1 Level AA. This includes providing alternative text for images, using semantic HTML, ensuring sufficient color contrast, and making all interactive elements accessible via keyboard navigation.\"\n\n**Question 5: Do you require any analytics tracking (e.g., Google Analytics, Hotjar) to measure page performance and user interactions?**\n\nAnswer:\nI recommend using Google Analytics (GA) to track page performance and user interactions. GA provides a widely used, free service that can help the bookstore understand user behavior, track conversions, and optimize the landing page.\nTo use GA, you will need to create an account, obtain a tracking ID, and add the GA script to the landing page.\n\nReasoning:\nGoogle Analytics provides a powerful tool for understanding user behavior and optimizing the landing page. Using GA can help the bookstore improve user engagement, conversion rates, and overall user experience.\n\nConcrete Implementation:\nIn the PRD under \"System Boundaries & Operating Model → Integrations\":\n\"Use Google Analytics (GA) to track page performance and user interactions. Create a GA account, obtain a tracking ID, and add the GA script to the landing page. Configure GA to track page views, conversions, and user behavior.\"\n\nOpen Points and Gaps:\n- The PRD lacks a section on \"Non-Functional Requirements\", which should include accessibility compliance, performance, and security requirements.\n- The PRD does not specify the expected user traffic, which may impact the choice of third-party services (e.g., Formspree, Google Analytics).\n- The PRD does not provide a clear definition of done for each feature, which may lead to ambiguity during development.\n\nTo resolve these gaps, I recommend adding a \"Non-Functional Requirements\" section to the PRD, specifying the expected user traffic, and providing a clear definition of done for each feature.",
      "questions": [
        "Which specific visual style (color palette, typography, hero image dimensions) should be applied to maintain the bookstore’s brand identity?",
        "Should the opening hours be editable via a CMS or static file, and how frequently are they expected to change?",
        "Which third‑party service (e.g., Formspree, Google Forms, custom backend) will handle contact form submissions, and are there any required authentication or API keys?",
        "Is there a need for any accessibility compliance (e.g., WCAG AA) for the form fields and overall page?",
        "Do you require any analytics tracking (e.g., Google Analytics, Hotjar) to measure page performance and user interactions?"
      ],
      "mergedPRD": "## System Vision\n\nProvide a clean, responsive single‑page website that instantly informs visitors about the bookstore’s brand, operating hours, and enables them to send inquiries via a contact form. The landing page should encourage foot traffic and build a basic online presence with minimal maintenance.\n\n## System Boundaries\n\n- **Deployment**: Hosted on a static web hosting service (e.g., Netlify, Vercel, or GitHub Pages).  \n- **Runtime**: Pure client‑side HTML/CSS/JavaScript; no server‑side rendering required.  \n- **Online/Offline**: Fully functional online; offline access limited to cached static assets via Service Worker (optional).  \n- **Single‑User**: No authentication; all visitors see the same content.  \n- **Persistence**: Contact form submissions are sent to a third‑party endpoint (e.g., Formspree, Google Forms) – no local data storage.  \n- **Integrations**: Optional integration with Google Maps for location display and with an email service for form delivery.\n\n## Domain Model\n\n- Kern-Entitaeten: Nutzer/Besucher, Feature, Anforderung und Iteration.\n- Beziehungen: Eine Anforderung aggregiert Features; jede Iteration verfeinert bestehende Features und kann neue ueber ein strukturiertes Delta hinzufuegen.\n- Datenkonsistenz: Feature-IDs bleiben ueber Iterationen stabil und gelten als unveraenderliche Kennungen.\n- Quellkontext (Iteration 1): Erstelle eine sehr einfache Landingpage fuer einen Buchladen mit Hero, Oeffnungszeiten und Kontaktformular. Halte es kompakt.\n\n## Global Business Rules\n\n- Bestehende Features duerfen waehrend der iterativen Verfeinerung nicht entfernt werden.\n- Neue Features werden nur ueber validiertes Feature-Delta-JSON akzeptiert.\n- Doppelte Features (gleiche Intention/Bezeichnung) werden deterministisch verworfen.\n- Akzeptanzkriterien aller Features muessen testbar und beobachtbar bleiben.\n\n## Functional Feature Catalogue\n\n### F-01: Responsive Page Layout\n\n1. Purpose\nTo ensure the bookstore landing page is fully accessible and visually coherent across a defined set of device viewports (mobile, tablet, desktop) by implementing a fluid, breakpoint-driven CSS layout system. This prevents horizontal scrolling, maintains readability, and optimizes navigation and content presentation for each screen size.\n\n2. Actors\nPrimary: End-user accessing the website via a web browser on a device (smartphone, tablet, laptop/desktop).\nSecondary: Web developer maintaining the codebase.\n\n3. Trigger\nThe user agent (browser) requests and begins rendering the `index.html` page.\n\n4. Preconditions\n*   The HTML document structure is complete and includes the necessary semantic container elements (e.g., `<header>`, `<main>`, `<footer>`).\n*   A CSS stylesheet is linked and loaded by the browser.\n*   The viewport meta tag is present in the HTML `<head>`: `<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">`.\n\n5. Main Flow\n1.  The browser parses the HTML and CSS.\n2.  The CSS establishes a base mobile-first layout using relative units (%, `rem`, `vw/vh`) for widths, margins, and font sizes. All primary content containers use `max-width: 100%` to contain content within the viewport.\n3.  The CSS defines three distinct media query breakpoints based on viewport width:\n    *   `@media (min-width: 768px)` for tablet portrait/landscape.\n    *   `@media (min-width: 1024px)` for desktop.\n4.  At the `768px` breakpoint, the layout modifies:\n    *   The main navigation (if present in header) switches from a vertical/hamburger pattern to a horizontal row.\n    *   Multi-column sections (e.g., opening hours and a brief \"about\" blurb) reflow from a single vertical stack to a two-column grid using `display: grid` or `flex-wrap`.\n    *   The Hero section's background image scaling and text container width are adjusted for better proportion.\n5.  At the `1024px` breakpoint, the layout further modifies:\n    *   The overall page container is centered with a fixed `max-width` (e.g., `1200px`) and horizontal `margin: auto`.\n    *   Multi-column sections expand to a three-column grid where content allows.\n    *   The contact form's input fields and textarea are set to a comfortable fixed or percentage-based width within their container.\n6.  The browser continuously evaluates the viewport width during resize events and applies the appropriate breakpoint styles, ensuring a seamless transition between layouts without content overflow or unreadably narrow columns.\n\n6. Alternate Flows\n*   A1: Extremely Narrow Viewport (< 320px). The mobile-first layout may cause text to wrap in an unbalanced way or touch targets to be too small. The system applies the base mobile styles but may trigger a browser-level zoom or horizontal scroll if content (e.g., a long, unbreakable word in the contact form label) exceeds the viewport. **Recovery:** CSS uses `word-wrap: break-word` and `min-width` constraints on interactive elements to mitigate this.\n*   A2: High Pixel Density / Zoomed Viewport. A user on a high-DPI device or using browser zoom may have a CSS viewport width that fluctuates around a breakpoint. The layout may flicker between breakpoint states during resize. **Recovery:** The design uses `rem` units and flexible grids that tolerate small width variations, minimizing visual \"jumps.\"\n*   A3: Disabled JavaScript/CSS. The responsive layout depends entirely on CSS. If CSS is disabled, the page falls back to a single-column, unstyled vertical document flow (default browser behavior), which remains fully functional and readable, albeit not visually optimized.\n\n7. Postconditions\n*   The landing page renders without horizontal scrollbars at all viewport widths from 320px to 1920px.\n*   All text remains readable (minimum font size ~16px on mobile, adjusted appropriately for larger screens) and does not require horizontal scrolling.\n*   Navigation is operable on all device sizes (e.g., touch-friendly targets on mobile, visible links on desktop).\n*   Form inputs and buttons have sufficient size and spacing for touch interaction on mobile devices.\n*   The visual hierarchy (Hero prominence, section separation) is maintained across all breakpoints.\n\n8. Data Impact\n*   No new data is stored or processed by the server or client-side scripts. This feature is purely presentational.\n*   The only \"data\" impacted is the CSS itself, which will increase in file size due to media query rules. Performance impact is negligible for a single, small page.\n\n9. UI Impact\n*   **Mobile (<768px):** Single-column layout. Header navigation condenses (e.g., to a hamburger menu or stacked links). Hero text is large and centered. All sections stack vertically with full-width containers. Form fields stack vertically.\n*   **Tablet (768px-1023px):** Introduction of 2-column grids for content-heavy sections (e.g., \"About\" text next to a small image, opening hours next to a map placeholder). Navigation expands to a horizontal list. Form may use a 2-column layout for label/input pairs if space permits.\n*   **Desktop (≥1024px):** Fixed-width, centered main container (e.g., 1140px). Navigation is fully horizontal. Hero image and text use a balanced side-by-side or overlaid layout. Content sections use up to 3 columns. Form fields may be inline in a single row where logical (e.g., first name / last name).\n\n10. Acceptance Criteria\n*   AC1: Using browser DevTools device mode, the page must render correctly at the following standard widths: 375px (iPhone SE), 768px (iPad), 1024px (iPad Pro), 1440px (standard desktop). No content overflows the viewport width.\n*   AC2: At the 768px breakpoint, the main navigation must change from a vertical stack to a horizontal row. At the 1024px breakpoint, the page content container must be centered with a visible max-width margin.\n*   AC3: All interactive elements (links, buttons, form inputs, submit button) must have a minimum touch target size of 44x44 CSS pixels on mobile viewports.\n*   AC4: The Hero section's call-to-action button must be clearly visible and positioned within the natural reading flow on all viewports.\n*   AC5: The contact form must be fully usable (all fields focusable, labels associated) and submit-able (via standard POST) on the smallest supported viewport (320px).\n\n### F-02: Hero Section with Background Image and Headline\n\n1. Purpose\nTo immediately establish the bookstore's brand identity and create a visually engaging first impression for visitors, encouraging them to explore the site and visit the physical location.\n\n2. Actors\nEnd-user (website visitor).\n\n3. Trigger\nThe browser finishes parsing the initial HTML document and begins rendering the page.\n\n4. Preconditions\nThe background image asset file (e.g., `hero-bg.jpg`) is present in the project's static assets directory and is accessible via the configured asset path. The HTML and CSS files containing the hero section code have been successfully deployed to the web server.\n\n5. Main Flow\n1.  The browser requests the landing page URL (e.g., `/`).\n2.  The server responds with the HTML document.\n3.  The browser parses the HTML and encounters the `<header>` or `<section>` element with a specific ID or class (e.g., `id=\"hero\"`).\n4.  The browser constructs the DOM node for the hero section container `div`.\n5.  The browser applies linked CSS styles to the hero container: `width: 100%`, `min-height: 60vh` (or a fixed pixel value like `400px`), `background-image: url('/assets/hero-bg.jpg')`, `background-size: cover`, `background-position: center`.\n6.  The browser creates a child element (e.g., `div` or `h1`) for the headline text within the hero container.\n7.  The browser applies CSS styles to the headline element: `position: absolute` or `relative`, `top: 50%`, `left: 50%`, `transform: translate(-50%, -50%)`, `color: #ffffff`, `text-align: center`, `font-size: 3rem` (with responsive `clamp()` or media queries), `text-shadow: 0 2px 4px rgba(0,0,0,0.5)`.\n8.  The browser initiates an asynchronous network request for the background image file.\n9.  Upon successful image download, the browser paints the image as the background of the hero container.\n10. The headline text is rendered, centered both horizontally and vertically over the background image.\n\n6. Alternate Flows\n*   **A1: Background image fails to load (404 or network error).**\n    1.  The browser's image load event triggers an error.\n    2.  The CSS `background-image` property fails to resolve.\n    3.  The hero container displays its fallback `background-color` (e.g., `#f0f0f0` or a solid brand color defined in CSS).\n    4.  The headline text remains visible and readable against the solid color background.\n*   **A2: Viewport width is extremely narrow (e.g., < 320px).**\n    1.  The responsive CSS media queries activate.\n    2.  The headline `font-size` is reduced to a minimum readable size (e.g., `1.5rem`).\n    3.  If the headline text is too long, it wraps onto multiple lines within the centered container.\n    4.  The `min-height` of the hero section may be reduced to preserve content visibility without excessive scrolling.\n\n7. Postconditions\nThe hero section is fully rendered and visible in the viewport. The background image is displayed (or the fallback color is shown), and the headline text is centered, styled, and legible. No JavaScript errors related to the hero section are present in the browser console.\n\n8. Data Impact\nNo persistent data is created, read, updated, or deleted by this feature. It consumes static asset files (image, CSS, HTML) from the server.\n\n9. UI Impact\n*   **Layout:** Introduces a full-width (`width: 100%`) block-level element at the top of the page.\n*   **Styling:** Applies a background image with `cover` sizing, ensuring no empty space while potentially cropping the image edges. Uses absolute/relative positioning and CSS transforms for perfect text centering.\n*   **Responsiveness:** Hero section height adjusts via `min-height` and/or media queries. Headline font size scales responsively using `clamp()` or breakpoints. Text remains centered on all screen sizes.\n*   **Accessibility:** The headline text must have a color contrast ratio of at least 4.5:1 against the average background image area. The hero container should have a semantic landmark role (e.g., `<header>` or `role=\"banner\"`).\n\n10. Acceptance Criteria\n*   **AC1:** The hero section occupies the full width of the browser viewport.\n*   **AC2:** The background image covers the entire hero section area without repeating, maintaining its aspect ratio (edges may be cropped).\n*   **AC3:** The headline text is perfectly centered both horizontally and vertically within the hero section.\n*   **AC4:** The headline text is clearly legible against the background image (or fallback color) with sufficient contrast.\n*   **AC5:** The hero section renders correctly on standard desktop (>= 1024px), tablet (768px-1023px), and mobile (< 768px) viewports. Text size and section height adjust appropriately.\n*   **AC6:** If the background image asset is missing, the fallback background color is displayed, and the headline remains fully visible and styled.\n*   **AC7:** The hero section is the first major visual element rendered above the fold on a typical network connection (loads within 2 seconds on a 3G connection simulation).\n\n### F-03: Hero Call‑to‑Action Button\n\n1. Purpose\nTo provide a clear, single-step navigation path from the hero section to the contact form, encouraging user engagement and inquiries.\n\n2. Actors\nAny visitor (end-user) viewing the landing page.\n\n3. Trigger\nThe user clicks the Call‑to‑Action (CTA) button located within the hero section.\n\n4. Preconditions\n- The landing page is fully loaded in the user's browser.\n- The hero section is rendered and visible.\n- The contact form section exists in the DOM with a specific, known target ID (e.g., `#contact-form`).\n- Client-side JavaScript is enabled and executing.\n\n5. Main Flow\n1. User accesses the landing page URL.\n2. The browser renders the complete HTML, including the hero section containing a button element with a specific identifier (e.g., `id=\"hero-cta-button\"`) and visible text (e.g., \"Kontaktieren Sie uns\" or \"Contact Us\").\n3. User positions the pointer over the CTA button and performs a primary click action (e.g., left-click).\n4. The browser's JavaScript event listener, attached to the button's `click` event, intercepts the default action.\n5. The script programmatically locates the target contact form element by its ID (`#contact-form`).\n6. The browser's viewport smoothly scrolls vertically until the top of the target form element aligns with the top of the viewport.\n7. Upon completion of the scroll animation, JavaScript sets the input focus on the first focusable field within the contact form (typically the name or email input field).\n8. The user can immediately begin typing into the focused form field.\n\n6. Alternate Flows\n- A1: Contact Form Element Not Found\n  1. In step 5 of the Main Flow, the script fails to locate an element with the specified target ID.\n  2. The click event is logged to the browser's console as a warning.\n  3. No scrolling occurs. The button's default behavior (if any) is prevented, and the user remains at the current scroll position.\n  4. The user must manually scroll to find the contact form.\n- A2: JavaScript Disabled or Erroneous\n  1. The user's browser has JavaScript disabled, or a critical script error prevents the event listener from functioning.\n  2. The button renders as a standard HTML button or anchor tag.\n  3. If the button is an anchor tag (`<a>`), its `href` attribute may point to the form's ID (e.g., `href=\"#contact-form\"`). The browser performs an instant, non-smooth jump to the form element.\n  4. If the button is a `<button>` without a valid `href` or script, clicking it has no effect; the user remains on the page.\n\n7. Postconditions\n- The page's vertical scroll position is changed such that the contact form section is visible at the top of the viewport.\n- The keyboard focus is programmatically moved to the first input field within the contact form.\n- No data is transmitted to the server, and no persistent client-side state (e.g., cookies, localStorage) is altered by this interaction.\n\n8. Data Impact\nNone. This feature involves no data read, creation, update, or deletion. It is a purely client-side UI interaction.\n\n9. UI Impact\n- **Static UI:** A button is added to the hero section's HTML structure with specific text and an identifier.\n- **Dynamic UI on Click:** The viewport scroll position animates smoothly to the contact form. The visual focus ring (or system focus indicator) appears on the first form input field after scrolling completes.\n\n10. Acceptance Criteria\n- AC1: The hero section contains a visible button element with the identifier `hero-cta-button`.\n- AC2: The button's visible text is a clear call to action (e.g., \"Kontaktformular\" or \"Contact Us\").\n- AC3: Clicking the button initiates a smooth scroll animation (duration ~500-800ms) to the element with ID `contact-form`.\n- AC4: After the scroll finishes, the `focus()` method is called on the first text input, email input, or textarea within the `#contact-form` container.\n- AC5: If the `#contact-form` element does not exist in the DOM, clicking the button does not cause a page jump or error alert; the click event is silently prevented, and the console logs a warning.\n- AC6: The feature works correctly across modern browsers (Chrome, Firefox, Safari, Edge) with JavaScript enabled.\n\n### F-04: Operating Hours Display\n\n### 1. Purpose\nProvide visitors with an immediately visible, accurately formatted block that lists the bookstore’s daily opening and closing times. The block must be readable on all device sizes and accessible to screen‑reader users.\n\n### 2. Actors\n- **Visitor** – any user who loads the landing page.  \n- **System** – the web server / client‑side JavaScript runtime that renders the page.\n\n### 3. Trigger\nThe feature is triggered when the landing page is requested and the DOM is ready for rendering (i.e., after the `DOMContentLoaded` event).\n\n### 4. Preconditions\n1. A JSON file `hours.json` exists at `/data/hours.json` with the structure defined in section 9.  \n2. The web server is configured to serve static assets from the `/data` directory with MIME type `application/json`.  \n3. The HTML template contains a placeholder element `<section id=\"operating-hours\"></section>`.  \n4. The CSS file `styles.css` includes the classes referenced in section 9.\n\n### 5. Main Flow\n1. **Page Load** – Browser loads `index.html` and all linked resources.  \n2. **DOM Ready** – JavaScript registers a listener for `DOMContentLoaded`.  \n3. **Fetch Data** – Listener executes `fetch('/data/hours.json')`.  \n4. **Validate Response** –  \n   a. Verify HTTP status 200.  \n   b. Parse response as JSON.  \n   c. Confirm the JSON object contains a `days` array with exactly 7 entries (Monday‑Sunday).  \n5. **Transform Data** – For each entry, format the time range as `HH:MM – HH:MM` (24‑hour clock). If `closed: true`, replace the time range with the string “Geschlossen”.  \n6. **Generate Markup** – Build a `<ul class=\"hours-list\">` where each `<li>` contains:  \n   - `<span class=\"day-name\">` with the localized weekday name.  \n   - `<span class=\"day-time\">` with the formatted time or “Geschlossen”.  \n7. **Inject Markup** – Replace the innerHTML of `<section id=\"operating-hours\">` with:  \n   ```html\n   <h2 class=\"section-title\">Öffnungszeiten</h2>\n   <ul class=\"hours-list\">…generated items…</ul>\n   ```  \n8. **Apply ARIA** – Add `role=\"region\"` and `aria-labelledby=\"operating-hours-title\"` to the section; set `id=\"operating-hours-title\"` on the `<h2>`.  \n9. **Cache Result** – Store the parsed JSON in `sessionStorage` under key `bookstoreHours` for the duration of the session.  \n10. **Error Handling (Success Path)** – If steps 1‑9 complete without exception, log `Operating hours rendered successfully` to the console.\n\n### 6. Alternate Flows\n**A1 – Fetch Failure (Network or 404)**  \n1. Fetch returns a non‑200 status or throws a network error.  \n2. Skip steps 4‑9.  \n3. Render fallback markup:  \n   ```html\n   <h2 class=\"section-title\">Öffnungszeiten</h2>\n   <p class=\"hours-error\">Öffnungszeiten derzeit nicht verfügbar.</p>\n   ```  \n4. Log error to console with details.\n\n**A2 – Invalid JSON Structure**  \n1. JSON parses but fails validation (missing days, wrong count, missing fields).  \n2. Follow steps A1‑4.\n\n**A3 – Browser Does Not Support `fetch`**  \n1. Detect missing `window.fetch`.  \n2. Load a polyfill script `fetch-polyfill.js` synchronously before step 3.  \n3. Continue with Main Flow after polyfill is loaded.\n\n### 7. Postconditions\n- The DOM contains a fully populated `<section id=\"operating-hours\">` with either the formatted hours list or the fallback error message.  \n- `sessionStorage['bookstoreHours']` holds the validated JSON object for the current session (or is absent if fetch failed).  \n- No uncaught JavaScript exceptions remain after page load.\n\n### 8. Data Impact\n| Operation | Data Store | Read/Write | Description |\n|-----------|------------|------------|-------------|\n| Read      | `/data/hours.json` (static file) | Read | Source of operating‑hour data. |\n| Write     | `sessionStorage['bookstoreHours']` | Write | Cached copy for the session. |\n| Read      | `sessionStorage['bookstoreHours']` (on subsequent loads) | Read | Used to avoid a second network request if present. |\n\n### 9. UI Impact\n- **HTML** – Add `<section id=\"operating-hours\"></section>` to `index.html` within the main content flow, positioned after the hero block.  \n- **CSS** – New classes:  \n  - `.hours-list` – `list-style:none; margin:0; padding:0; display:flex; flex-direction:column;`  \n  - `.day-name` – `font-weight:600; width:120px; display:inline-block;`  \n  - `.day-time` – `color:#555;`  \n  - `.hours-error` – `color:#c00; font-style:italic;`  \n  - Media query `@media (min-width:768px)` to display the list in two columns.  \n- **Accessibility** – `role=\"region\"` and `aria-labelledby` as defined in step 8 of Main Flow.  \n\n### 10. Acceptance Criteria\n1. **Correct Rendering** – All seven weekdays appear in German order (Montag‑Sonntag) with the exact times defined in `hours.json`. Closed days display “Geschlossen”.  \n2. **Responsive Layout** – On screens ≥ 768 px the list displays in two columns; on smaller screens it stacks vertically. Visual regression tests must pass for both breakpoints.  \n3. **Accessibility** – Screen‑reader navigation announces “Öffnungszeiten” as a region title and reads each day‑time pair. Automated aXe test must report no violations.  \n4. **Error Handling** – Simulating a 404 for `hours.json` results in the fallback paragraph “Öffnungszeiten derzeit nicht verfügbar.” displayed, and no JavaScript uncaught errors appear.  \n5. **Caching** – After a successful fetch, a subsequent page reload within the same browser session reads the data from `sessionStorage` (verified via console log).  \n6. **Performance** – The fetch request completes within 200 ms on a standard 3G connection; the total time from `DOMContentLoaded` to fully rendered hours block is ≤ 300 ms.  \n7. **Cross‑Browser** – Feature works in the latest versions of Chrome, Firefox, Safari, and Edge without polyfill; in Internet Explorer 11 the polyfill path is exercised and the block still renders correctly.\n\n### F-05: Contact Form Fields\n\n1. Purpose\nTo collect visitor inquiries (name, email address, and message) via a web form for the bookstore, enabling the business to receive and respond to questions.\n\n2. Actors\nVisitor (end-user of the website).\n\n3. Trigger\nThe visitor actively engages with the contact form by focusing on a field, entering data, or attempting to submit the form.\n\n4. Preconditions\n- The contact form section of the landing page is fully rendered and visible to the visitor.\n- All form fields (Name, Email, Message) are present, empty, and in an interactive state.\n- No previous form submission is in progress.\n\n5. Main Flow\n1. The visitor locates the contact form on the landing page.\n2. The visitor clicks into the \"Name\" input field and types their full name.\n3. The visitor clicks into the \"Email\" input field and types a valid email address.\n4. The visitor clicks into the \"Message\" textarea field and types their inquiry.\n5. The visitor clicks the \"Submit\" button.\n6. The system performs client-side validation on all fields (non-empty, valid email format).\n7. Upon successful validation, the system packages the form data into a structured payload (JSON or form-data).\n8. The system sends an asynchronous HTTP POST request to the predefined backend endpoint (e.g., `/api/contact`).\n9. The system receives a successful HTTP 200/201 response from the backend.\n10. The system clears all input fields and displays a persistent success confirmation message (e.g., \"Thank you! We will contact you soon.\") within the form container.\n\n6. Alternate Flows\n- **A1: Validation Failure (Client-Side)**\n  - At step 6, if any field is empty or the email is invalid, the system highlights the erroneous field(s) with a visual indicator (e.g., red border) and displays an inline, specific error message (e.g., \"Please enter your name\", \"Please enter a valid email address\").\n  - The form submission is halted. The visitor must correct the errors and re-attempt submission (return to step 5).\n- **A2: Backend Submission Failure**\n  - At step 9, if the backend returns an error (e.g., HTTP 500, network timeout), the system does not clear the form.\n  - The system displays a generic, persistent error message within the form container (e.g., \"Sorry, something went wrong. Please try again later.\").\n  - The visitor's entered data remains in the fields for correction and resubmission.\n\n7. Postconditions\n- On successful submission: All form fields are empty. A success message is visibly displayed. The form is in a state ready for a new submission.\n- On failed submission: The form fields retain the visitor's last input. An appropriate error message is visibly displayed.\n\n8. Data Impact\n- **Structured Data Created:** A contact inquiry object containing: `visitor_name` (string), `visitor_email` (string), `message_text` (string), `submission_timestamp` (datetime, generated server-side).\n- **Data Persistence:** The inquiry object is persisted to a designated data store (e.g., database table `contact_inquiries` or a third-party service) by the backend.\n- **Data Flow:** The client-side payload is transmitted via HTTPS to the backend endpoint. No sensitive data is stored client-side post-submission.\n\n9. UI Impact\n- **Form Structure:** Three vertically stacked, labeled input elements: a single-line text input for \"Name\", a single-line email input for \"Email\", and a multi-line textarea for \"Message\".\n- **Labels & Placeholders:** Each field has a persistent, accessible label (`<label>`). The \"Email\" field uses `type=\"email\"` for native browser validation. Placeholder text may be used for guidance (e.g., \"Your full name\").\n- **Submit Button:** A clearly labeled button (e.g., \"Send Message\") with `type=\"submit\"`.\n- **Feedback Areas:** Dedicated, dynamically updated containers for inline field validation errors and a form-level status message (success/error).\n- **Styling:** Consistent with the landing page's design system (typography, spacing, color palette). Interactive states (focus, hover) are defined. Error states use a designated error color.\n\n10. Acceptance Criteria\n- **AC1:** The form must render with exactly three fields: \"Name\" (text input), \"Email\" (email input), and \"Message\" (textarea), and a submit button.\n- **AC2:** Attempting to submit with any empty field must prevent submission and show an inline error message specific to the empty field(s).\n- **AC3:** Entering an invalid email format (e.g., \"test@\") must prevent submission and show the inline error \"Please enter a valid email address.\"\n- **AC4:** Submitting a form with all valid data must clear all fields and display the success message \"Thank you! We will contact you soon.\" within 2 seconds.\n- **AC5:** If the backend request fails (simulated), the form must not clear, and the generic error message must appear.\n- **AC6:** The \"Email\" field must accept and allow valid submission of standard email addresses (e.g., `user@example.com`).\n- **AC7:** All labels must be programmatically associated with their respective input fields using the `for`/`id` attribute pair for accessibility.\n\n### F-06: Client‑Side Form Validation\n\n1. Purpose\nTo ensure that all data entered into the contact form is complete and correctly formatted before submission, preventing unnecessary server requests and providing immediate, clear feedback to the user.\n\n2. Actors\n- End‑user: Fills out the contact form.\n- Frontend System: Executes validation logic and controls form submission.\n\n3. Trigger\nThe user attempts to submit the contact form by clicking the submit button or pressing the Enter key while focused on a form field.\n\n4. Preconditions\n- The contact form is fully rendered in the DOM.\n- Form fields exist with defined attributes: `name` (text input), `email` (email input), `message` (textarea).\n- All fields are marked as `required` in HTML.\n- Client‑side validation JavaScript is loaded and active.\n\n5. Main Flow\n1. User fills in values in the form fields (name, email, message).\n2. User initiates form submission.\n3. System validates each field synchronously against the following rules:\n   - **Name**: Must be non‑empty and ≤ 100 characters.\n   - **Email**: Must be non‑empty and match a standard email regex pattern (RFC 5322 compliant).\n   - **Message**: Must be non‑empty, ≥ 10 characters, and ≤ 1000 characters.\n4. If any field fails validation:\n   a. Add an `aria-invalid=\"true\"` attribute to the field.\n   b. Apply a visual error style (e.g., red border) to the field’s container.\n   c. Insert a specific error message element (`<div class=\"error-message\">`) below the field with text describing the exact failure.\n   d. Set focus to the first invalid field.\n   e. Halt the submission process (prevent default form submission event).\n5. If all fields pass validation:\n   a. Remove all existing error styles and messages from all fields.\n   b. Allow the form submission event to proceed normally (HTTP POST to the server endpoint).\n\n6. Alternate Flows\n- **A1: Real‑time validation on blur**\n  - When a user leaves a field (blur event), the system validates that single field.\n  - If invalid, immediately shows the error message and styling; if valid, clears any existing error for that field.\n  - This occurs independently of the main submit flow.\n- **A2: User corrects an error after initial failed submission**\n  - After errors are displayed, the user amends one or more fields.\n  - User attempts submission again.\n  - System re‑validates all fields (Main Flow steps 3–5) and either blocks submission with updated errors or allows it if all are now valid.\n- **A3: Submission with empty form**\n  - User clicks submit with all fields empty.\n  - System validates each required field, marks all as invalid, displays \"This field is required\" for each, and focuses the first field (name).\n\n7. Postconditions\n- **Invalid submission**: The form remains visible on the page. All invalid fields have persistent error UI (styling, ARIA attributes, error message text). No HTTP request is sent to the server. Form data is not cleared.\n- **Valid submission**: The form submission event is not intercepted by validation code. The browser proceeds with the native form submission (or JavaScript‑handled fetch) to the configured server endpoint. All error UI is removed from the form fields.\n\n8. Data Impact\n- No data is stored or modified on the client beyond temporary UI state.\n- Validation rules (regex patterns, length limits) are hard‑coded in the frontend JavaScript bundle.\n- Invalid input never leaves the client; only validated data is eligible for transmission.\n\n9. UI Impact\n- Each form field container gains/loses an `error` CSS class for styling (e.g., `border-color: #dc3545`).\n- Each field has an adjacent `<div class=\"error-message\" role=\"alert\" aria-live=\"polite\">` that becomes visible with text when invalid, hidden when valid.\n- The submit button remains enabled at all times; validation does not disable it but prevents submission on invalid data.\n- Focus management programmatically moves to the first invalid field upon failed submission.\n- All error messages are concise, specific, and in German (e.g., \"Bitte geben Sie Ihren Namen ein.\", \"Ungültige E‑Mail‑Adresse.\").\n\n10. Acceptance Criteria\n1. **Name field**:\n   - Empty → error \"Bitte geben Sie Ihren Namen ein.\" shown.\n   - > 100 characters → error \"Der Name darf maximal 100 Zeichen haben.\" shown.\n2. **Email field**:\n   - Empty → error \"Bitte geben Sie Ihre E‑Mail‑Adresse ein.\" shown.\n   - Invalid format (e.g., \"test@\") → error \"Bitte geben Sie eine gültige E‑Mail‑Adresse ein.\" shown.\n3. **Message field**:\n   - Empty → error \"Bitte geben Sie eine Nachricht ein.\" shown.\n   - < 10 characters → error \"Die Nachricht muss mindestens 10 Zeichen haben.\" shown.\n   - > 1000 characters → error \"Die Nachricht darf maximal 1000 Zeichen haben.\" shown.\n4. On submit with any invalid field: No network request is made; browser console shows no JavaScript errors; focus moves to first invalid field.\n5. On submit with all fields valid: Form submits normally (network request observed in dev tools); all error messages are removed.\n6. Validation triggers on submit and on blur for each field (per Alternate Flow A1).\n7. All error containers have `role=\"alert\"` and `aria-live=\"polite\"` for screen reader announcement.\n8. Invalid fields have `aria-invalid=\"true\"`; valid fields have `aria-invalid=\"false\"` or attribute removed.\n9. Validation logic is pure frontend; no server communication occurs during validation.\n\n### F-07: Form Submission Endpoint Integration\n\n1. Purpose\nTo securely receive validated contact form data from the frontend, process it, and forward the inquiry as an email to the bookstore's designated contact address. This enables the business to receive and respond to customer inquiries.\n\n2. Actors\nPrimary Actor: Customer (Website Visitor)\nSecondary Actor: Backend System / Email Service\n\n3. Trigger\nThe customer completes all required fields in the contact form and clicks the \"Submit\" button after successful client-side validation.\n\n4. Preconditions\n*   The contact form on the frontend has passed all client-side validation rules (e.g., valid email format, non-empty required fields).\n*   The backend API endpoint (e.g., `POST /api/contact`) is deployed, accessible, and healthy.\n*   The backend server has correct SMTP credentials configured and network access to an email relay service (e.g., SendGrid, AWS SES, or a local SMTP server).\n*   The customer's device has an active internet connection.\n\n5. Main Flow\n1.  The frontend JavaScript collects the form field values (`name`, `email`, `subject`, `message`) into a JSON object.\n2.  The frontend sends an HTTPS `POST` request to the configured backend endpoint, including the JSON object in the request body and setting the `Content-Type` header to `application/json`.\n3.  The backend server receives the request and parses the JSON body.\n4.  The backend performs server-side validation on all required fields (presence, basic sanitization, email format). If validation fails, the flow proceeds to Alternate Flow A.\n5.  The backend constructs a formatted email. The recipient is a fixed, configurable bookstore contact email (e.g., `contact@buchladen.de`). The sender is set to the customer's provided email address. The email subject includes the customer's subject. The email body includes the customer's name, email, and message, formatted for readability.\n6.  The backend initiates an SMTP transaction to send the constructed email.\n7.  If the SMTP transaction is successful, the backend logs the successful submission (including a timestamp and customer email) and returns an HTTP `200 OK` response with a JSON body: `{\"success\": true, \"message\": \"Ihre Nachricht wurde gesendet.\"}`.\n8.  The frontend receives the `200 OK` response, displays a success notification/modal to the user, and resets the form fields to empty.\n\n6. Alternate Flows\nA.  Server-Side Validation Failure:\n    *   At step 4, if any field is empty or the email format is invalid, the backend immediately returns an HTTP `400 Bad Request` response. The JSON body contains an error object detailing the failed field(s), e.g., `{\"success\": false, \"errors\": {\"email\": \"Ungültige E-Mail-Adresse\", \"message\": \"Dieses Feld ist erforderlich\"}}`.\n    *   The frontend receives the `400` response, parses the error details, and displays specific inline error messages next to the relevant form fields and/or a general error summary.\n\nB.  Email Service Failure:\n    *   At step 6, if the SMTP server returns an error (e.g., authentication failure, rate limit, connection timeout), the backend logs the detailed error (including the customer's data for debugging) and returns an HTTP `500 Internal Server Error` response with a generic JSON body: `{\"success\": false, \"message\": \"Serverfehler. Bitte versuchen Sie es später erneut.\"}`.\n    *   The frontend receives the `500` response and displays a generic, non-technical error notification to the user. The form data remains in the fields so the user can retry.\n\n7. Postconditions\n*   **Success:** The customer's inquiry has been delivered to the bookstore's inbox. A log entry recording the successful submission exists on the backend server. The frontend form is cleared and shows a success message.\n*   **Failure (Validation):** No email is sent. An error log entry may be created. The frontend form retains the user's input and displays validation errors.\n*   **Failure (Email Service):** No email is reliably sent. An error log entry with details is created on the backend server. The frontend form retains the user's input and displays a generic error message.\n\n8. Data Impact\n*   **Transient Data:** The customer's submitted data (`name`, `email`, `subject`, `message`) is transmitted from client to server and processed in memory.\n*   **Persisted Data (Backend):** A minimal log entry (timestamp, customer email, submission status) is written to the application log file or logging system. The full message content is not stored in a database by this feature.\n*   **External Data:** The customer's data is sent to and stored (in the inbox) of the external email service/recipient mailbox.\n\n9. UI Impact\n*   The contact form must have a loading state (e.g., disabled submit button, spinner) while the request is in flight.\n*   On a successful submission (HTTP 200), a clear, dismissible success notification must appear (e.g., toast message: \"Ihre Nachricht wurde erfolgreich gesendet.\").\n*   On a validation failure (HTTP 400), specific field-level error messages must appear below the relevant inputs, and/or a summary error banner at the top of the form.\n*   On a server/email failure (HTTP 500), a generic error notification must appear (e.g., \"Ein technischer Fehler ist aufgetreten. Bitte versuchen Sie es später noch einmal.\").\n*   The form must be reset to its initial empty state only after a `200` response.\n\n10. Acceptance Criteria\n1.  Given a customer fills all required fields with valid data, when they click submit, then an email containing the full inquiry is received at the configured bookstore contact address within 10 seconds.\n2.  Given a customer submits an invalid email address, when they click submit, then the backend returns HTTP 400 and the frontend displays an error specifically for the email field.\n3.  Given the backend email service (SMTP) is unavailable, when a valid form is submitted, then the backend returns HTTP 500 and the frontend displays a generic error message, not exposing internal SMTP details.\n4.  Given a successful submission, then the frontend form fields are cleared and a success message is visible to the user.\n5.  Given any API request, then all user-provided data is sanitized on the backend to prevent basic injection attacks (e.g., newlines in headers) before being used in email construction.\n6.  The backend endpoint only accepts `POST` requests and requires the `Content-Type: application/json` header. Requests with other methods or content types return `405` or `415` respectively.\n\n### F-08: Submission Success Message\n\n1. Purpose  \n   Provide immediate, clear feedback to the visitor that their contact‑form submission has been received and processed successfully, reinforcing trust and preventing duplicate submissions.\n\n2. Actors  \n   - **Visitor**: the end‑user who fills out and submits the contact form.  \n   - **Web Client**: the browser‑side JavaScript responsible for sending the request and rendering UI feedback.  \n   - **Backend API**: the HTTP endpoint that receives the form data and returns a success status.\n\n3. Trigger  \n   The backend API returns an HTTP 200 response with a JSON body `{ \"status\": \"success\" }` after a valid form submission.\n\n4. Preconditions  \n   1. The contact form fields have passed client‑side validation.  \n   2. The visitor has clicked the **Submit** button.  \n   3. The browser has an active network connection.  \n   4. The backend endpoint `/api/contact` is reachable and configured to return a success payload for valid submissions.\n\n5. Main Flow  \n   1. Visitor clicks the **Submit** button.  \n   2. Web Client disables the button, shows a loading spinner, and serializes the form data to JSON.  \n   3. Web Client sends an asynchronous `POST` request to `/api/contact` with the JSON payload and the header `Content-Type: application/json`.  \n   4. Backend processes the payload, stores the inquiry, and responds with HTTP 200 and body `{ \"status\": \"success\", \"messageId\": \"<uuid>\" }`.  \n   5. Web Client receives the response, re‑enables the **Submit** button, and hides the loading spinner.  \n   6. Web Client injects a success toast component into the DOM with the text **“Thank you! Your message has been sent.”**.  \n   7. The toast appears at the top‑right corner, uses ARIA role `alert`, and is styled with a green background and white text.  \n   8. The toast remains visible for 5 seconds, then fades out over 0.5 seconds and is removed from the DOM.  \n   9. Web Client clears all input fields in the contact form.  \n\n6. Alternate Flows  \n   **A1 – Server returns non‑200 status**  \n   1. Steps 1‑4 of the Main Flow execute.  \n   2. Backend responds with HTTP 4xx/5xx and a JSON body `{ \"status\": \"error\", \"errorMessage\": \"…\"} `.  \n   3. Web Client displays an error toast with the returned `errorMessage` instead of the success toast.  \n   4. Form fields remain populated for user correction.  \n\n   **A2 – Network failure or timeout**  \n   1. Steps 1‑3 of the Main Flow execute.  \n   2. The `fetch` promise rejects or times out after 10 seconds.  \n   3. Web Client displays an error toast: **“Unable to send your message. Please check your connection and try again.”**  \n   4. Form fields remain populated.  \n\n   **A3 – Duplicate rapid submissions**  \n   1. Visitor clicks **Submit** multiple times before the button is disabled.  \n   2. Web Client detects that a request is already in flight (internal flag `isSubmitting`).  \n   3. Subsequent clicks are ignored until the flag is cleared after step 5 of the Main Flow.  \n\n7. Postconditions  \n   - The UI shows a transient success toast confirming receipt.  \n   - All form inputs are cleared.  \n   - No pending network requests remain (`isSubmitting` flag = false).  \n   - Backend has persisted the inquiry and returned a unique `messageId`.  \n\n8. Data Impact  \n   - No new client‑side data is persisted beyond the transient toast.  \n   - Backend creates a new record in the `inquiries` table (outside the scope of this feature).  \n   - The client logs the `messageId` to the browser console for debugging (optional).  \n\n9. UI Impact  \n   - Add a reusable toast component (`<div class=\"toast success\" role=\"alert\">…</div>`).  \n   - Ensure the toast is responsive: width ≤ 90 % of viewport, max‑width 300 px, positioned 1 rem from the top and right edges.  \n   - Include CSS transitions for fade‑in (0.3 s) and fade‑out (0.5 s).  \n   - Update the **Submit** button style to indicate disabled state (`opacity:0.5; cursor:not-allowed`).  \n\n10. Acceptance Criteria  \n   - AC‑1: When the backend returns HTTP 200 with `{ \"status\":\"success\" }`, the success toast appears within 300 ms of the response.  \n   - AC‑2: The toast text exactly matches “Thank you! Your message has been sent.” and uses the green (`#28a745`) background with white (`#ffffff`) text.  \n   - AC‑3: The toast remains visible for 5 seconds, then fades out over 0.5 seconds and is removed from the DOM.  \n   - AC‑4: After the toast disappears, all form fields are empty and the **Submit** button is enabled.  \n   - AC‑5: The toast component has `role=\"alert\"` and is announced by screen readers.  \n   - AC‑6: In case of a non‑200 response or network error, an error toast is shown instead, and form fields retain their values.  \n   - AC‑7: Rapid double‑clicks on **Submit** do not produce multiple network requests or multiple toasts.  \n   - AC‑8: The feature works on the latest versions of Chrome, Firefox, Safari, and Edge on both desktop and mobile viewports.\n\n### F-09: Basic SEO Meta Tags\n\n1. Purpose\nTo ensure the bookstore landing page is correctly indexed by search engines and renders responsively on all devices by including a minimal, standardized set of meta tags within the HTML document's head section.\n\n2. Actors\n- Developer: Implements the meta tags in the HTML template.\n- Search Engine Crawlers (e.g., Googlebot): Consume the meta tags for indexing and SERP display.\n- Web Browsers: Utilize the viewport meta tag for responsive rendering.\n\n3. Trigger\nThe HTML document is generated and served in response to a user's HTTP request for the landing page.\n\n4. Preconditions\n- The static HTML file structure for the landing page (e.g., `index.html`) exists.\n- The developer has defined the official bookstore name and a concise, accurate description of its services and location.\n- The page will be served with the `text/html` MIME type.\n- The design requires a mobile-first, responsive layout.\n\n5. Main Flow\n1. Open the primary HTML template file (e.g., `index.html`) in a code editor.\n2. Locate the `<head>` section of the document.\n3. Insert the charset declaration as the first meta tag: `<meta charset=\"UTF-8\">`.\n4. Directly after the charset tag, insert the viewport meta tag for responsive design: `<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">`.\n5. Insert the `<title>` tag immediately after the viewport tag. The content must follow the format: `[Bookstore Name] | [City/Neighborhood]` (e.g., \"Bücherparadies | Berlin Mitte\"). Ensure the total character count is between 30 and 60.\n6. Insert the description meta tag: `<meta name=\"description\" content=\"[A single sentence summarizing the bookstore's specialty, atmosphere, and location.]\">`. Ensure the content is between 70 and 160 characters.\n7. Save the HTML file.\n8. Deploy the updated file to the web server's document root.\n\n6. Alternate Flows\n- A1: If the provided title or description content exceeds the recommended character limits, the developer shall truncate the text at the nearest word boundary within the limit and append an ellipsis (\"...\"). A warning shall be logged for content review.\n- A2: If the HTML template uses a server-side includes (SSI) or templating engine for the head section, the developer shall place the meta tags within the appropriate head include file or template block instead of the static file.\n- A3: During validation, if the `viewport` tag's `content` attribute is found to be missing `initial-scale=1.0`, the developer shall correct it to the exact required value to ensure proper mobile rendering.\n\n7. Postconditions\n- The `<head>` section of the deployed `index.html` contains exactly the four essential meta tags (`charset`, `viewport`, `title`, `description`) in the specified order.\n- The page source is valid HTML5.\n- Search engine crawlers can parse the title and description for indexing.\n- Web browsers apply the responsive viewport settings, allowing the page to scale correctly on mobile devices.\n- No console warnings or errors related to meta tags appear in browser developer tools.\n\n8. Data Impact\n- **Static Content**: The HTML template file (`index.html` or equivalent head template) is modified. No database tables, API endpoints, or user-generated content are affected.\n- **Configuration**: No new configuration files are created. The meta tag values are hardcoded based on the predefined bookstore name and description.\n\n9. UI Impact\n- **Indirect UI Impact**: The `title` tag content appears in the browser tab/window title. The `description` meta tag is frequently used by search engines as the snippet in search results (SERP). Neither affects the visual layout of the landing page itself.\n- **Functional UI Impact**: The `viewport` meta tag is critical for the responsive CSS to function correctly across different screen sizes, ensuring the Hero, opening hours, and contact form are usable on mobile devices.\n\n10. Acceptance Criteria\n- **AC1:** The page source (`Ctrl+U` in browser) contains `<meta charset=\"UTF-8\">` as the first element inside `<head>`.\n- **AC2:** The page source contains `<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">` immediately following the charset tag.\n- **AC3:** The page source contains a `<title>` tag with content matching the pattern `[Bookstore Name] | [Location]`, with a length between 30 and 60 characters.\n- **AC4:** The page source contains a `<meta name=\"description\"` tag with a `content` attribute value between 70 and 160 characters that accurately describes the store.\n- **AC5:** Running the HTML through the W3C Markup Validation Service (https://validator.w3.org/) returns no errors related to the `<title>`, `<meta charset>`, `<meta name=\"viewport\">`, or `<meta name=\"description\">` tags.\n- **AC6:** The page passes Google's Mobile-Friendly Test (https://search.google.com/test/mobile-friendly) with no viewport-related errors.\n- **AC7:** The bookstore name in the `<title>` tag exactly matches the official brand name provided in the project brief.\n\n### F-10: Favicon Inclusion\n\n1. Purpose\nTo provide a small, recognizable icon (favicon) that appears in browser tabs, bookmark lists, and history entries, enhancing brand recognition for the bookstore and improving user orientation when multiple tabs are open.\n\n2. Actors\n- Developer: Implements the favicon asset and HTML reference.\n- End User's Browser: Requests, caches, and displays the favicon.\n- End User: Sees the favicon in the browser UI.\n\n3. Trigger\nThe browser renders the bookstore's landing page (`index.html`) and parses the `<head>` section for icon definitions.\n\n4. Preconditions\n- A suitable icon file (e.g., `favicon.ico`) has been created and is available in the project's asset directory (e.g., `/assets/icons/`).\n- The developer has edit access to the `index.html` file.\n\n5. Main Flow\n1. The developer creates or obtains a square icon graphic representing the bookstore's brand.\n2. The developer converts the graphic to the `.ico` format, embedding multiple resolutions (e.g., 16x16, 32x32, 48x48 pixels) within the single file for broad browser compatibility.\n3. The developer saves the file as `favicon.ico` and places it in the designated assets directory (e.g., `/assets/icons/`).\n4. The developer opens the `index.html` file and locates the `<head>` section.\n5. The developer inserts the following HTML link tag within `<head>`:\n   `<link rel=\"icon\" href=\"/assets/icons/favicon.ico\" type=\"image/x-icon\">`\n6. The developer optionally adds a PNG fallback for modern browsers by inserting a second tag:\n   `<link rel=\"icon\" href=\"/assets/icons/favicon.png\" type=\"image/png\">`\n   (with a corresponding 32x32px PNG file in the same location).\n7. The developer saves `index.html` and deploys both the HTML file and the icon asset(s) to the web server.\n8. The developer tests by loading the page in a browser and confirming the icon appears in the tab.\n\n6. Alternate Flows\n- A1: Missing Favicon File. If the browser requests `/assets/icons/favicon.ico` and receives a 404 response, it will typically display a generic browser default icon. The developer must verify the file path and deployment.\n- A2: Incorrect MIME Type. If the server serves the `.ico` file with an incorrect `Content-Type` header (e.g., `text/plain`), some browsers may ignore it. The developer must configure the server to serve `.ico` files with `image/x-icon`.\n- A3: Browser Cache. After deployment, the developer's browser may still show the old icon due to caching. The developer must perform a hard refresh (Ctrl+F5) or clear the browser cache to see the updated favicon.\n\n7. Postconditions\n- The `favicon.ico` (and optional `favicon.png`) file exists in the specified directory on the web server.\n- The `index.html` file contains the correct `<link rel=\"icon\">` tag(s) in its `<head>` section.\n- When a user loads the landing page, the browser displays the bookstore's custom icon in the tab, bookmark list, and history.\n\n8. Data Impact\n- **No Database Changes:** This feature involves only static asset files and HTML markup. No database schema or data records are created, modified, or deleted.\n- **Static Assets:** Two new static files are added to the project repository and deployment package: `favicon.ico` and optionally `favicon.png`.\n\n9. UI Impact\n- **Browser Tab/Window:** A small (typically 16x16px) icon appears to the left of the page title in the browser tab.\n- **Bookmarks/Favorites:** The custom icon is displayed next to the bookmarked page title in the browser's bookmark manager.\n- **Browser History:** The icon may appear next to the page entry in the browser's history list.\n\n10. Acceptance Criteria\n- AC1: A valid `favicon.ico` file containing at least a 16x16px and 32x32px image is present at the path `/assets/icons/favicon.ico` on the deployed server.\n- AC2: The `index.html` file contains a `<link rel=\"icon\" href=\"/assets/icons/favicon.ico\" type=\"image/x-icon\">` tag within the `<head>` section.\n- AC3: Upon loading the live page in Google Chrome (latest), Mozilla Firefox (latest), and Safari (latest), the custom icon is visibly displayed in the browser tab.\n- AC4: When bookmarking the page in the same browsers, the custom icon is displayed in the bookmark/favorites entry.\n- AC5: No console errors related to favicon fetching (404, MIME type) appear in the browser's developer tools when loading the page.\n\n### F-11: Anchor‑Based Page Navigation\n\n1. Purpose\nTo enable users to navigate between distinct sections of the single-page website (Hero, Opening Hours, Contact) via clickable anchor links, using a smooth scrolling animation for an improved user experience.\n\n2. Actors\nPrimary Actor: Visitor (end-user)\nSecondary Actor: Web Browser (client-side JavaScript engine)\n\n3. Trigger\nThe visitor clicks on an anchor link (`<a href=\"#target-id\">`) in the primary navigation menu or a call-to-action button within the Hero section.\n\n4. Preconditions\n*   The HTML document contains at least two target sections (e.g., `<section id=\"oeffnungszeiten\">`, `<section id=\"kontakt\">`).\n*   The navigation menu and/or CTA button contain anchor links with `href` attributes matching the `id` of these target sections (e.g., `href=\"#kontakt\"`).\n*   The visitor's web browser has JavaScript enabled.\n\n5. Main Flow\n1.  The visitor clicks an anchor link element (e.g., `<a href=\"#oeffnungszeiten\">`).\n2.  The browser's default jump-to-anchor behavior is intercepted by a registered JavaScript event listener (`click` event).\n3.  The event listener's `preventDefault()` method is called to stop the browser's instant, discontinuous jump.\n4.  The script identifies the target element by selecting the DOM element with the `id` matching the link's `href` fragment (e.g., `document.getElementById('oeffnungszeiten')`).\n5.  The script calculates the vertical scroll position: `targetElement.offsetTop`.\n6.  The `window.scrollTo()` method is invoked with options: `{ top: calculatedPosition, behavior: 'smooth' }`.\n7.  The browser animates the scroll over a default duration (typically 300-500ms), moving the viewport smoothly until the top of the target section aligns with the top of the viewport.\n8.  The URL in the address bar is updated to include the fragment identifier (e.g., `.../index.html#oeffnungszeiten`) without triggering a page reload.\n\n6. Alternate Flows\n*   **A1: Target Element Does Not Exist.** If `document.getElementById()` returns `null`, the script logs an error to the console and does nothing. The browser performs its default action (no jump, URL hash updates).\n*   **A2: Fixed Header Offset.** If a fixed-position header obscures the target section upon scroll completion, the script calculates an offset (e.g., `targetElement.offsetTop - headerHeight`) and scrolls to that adjusted position.\n*   **A3: JavaScript Disabled.** If JavaScript is disabled, the browser's native anchor-jump behavior occurs (instant, discontinuous scroll to the element). The URL hash still updates.\n\n7. Postconditions\n*   The viewport is scrolled such that the target section's top edge is at (or near, considering any offset) the top of the visible viewport.\n*   The browser's address bar URL contains the correct fragment identifier corresponding to the navigated section.\n*   The page's overall state (data, forms) remains unchanged; only the scroll position is altered.\n\n8. Data Impact\nNo persistent data is created, read, updated, or deleted. All operations are transient and client-side only.\n\n9. UI Impact\n*   **CSS:** The `html` element should have `scroll-behavior: smooth;` defined as a progressive enhancement fallback for browsers with native smooth scroll support.\n*   **JavaScript:** A script must be included that attaches `click` event listeners to all anchor links with fragment-only `href` values (e.g., `href=\"#...\"`).\n*   **Visual Feedback (Optional):** The active navigation link corresponding to the currently visible section may be highlighted via a CSS class (e.g., `.active`), typically managed by a `IntersectionObserver` monitoring section visibility.\n\n10. Acceptance Criteria\n*   **AC1:** Clicking a navigation link smoothly scrolls the page to the correct target section within 2 seconds on a standard desktop viewport.\n*   **AC2:** After the scroll completes, the URL in the address bar correctly displays the fragment identifier (hash) of the target section.\n*   **AC3:** If a fixed header exists, the target section's heading/content is not hidden behind it after the scroll completes.\n*   **AC4:** The feature works on all modern browsers (Chrome, Firefox, Safari, Edge) and provides a basic instant-jump fallback on older browsers without smooth scroll support.\n*   **AC5:** Clicking an anchor link with an invalid/non-existent `href` fragment (e.g., `#invalid`) does not break the page; the browser's default behavior (URL hash update only) occurs without error.\n\n### F-12: Brand‑Consistent CSS Styling\n\n1. Purpose\nTo define and apply a unified visual identity across the entire bookstore landing page by enforcing specific colors, typography, and spacing rules. This ensures all UI components (Hero, Opening Hours, Contact Form) present a professional, cohesive brand experience.\n\n2. Actors\nWeb Browser (rendering engine).\n\n3. Trigger\nA user navigates to the bookstore’s landing page URL, causing the browser to request and render the HTML document.\n\n4. Preconditions\n- The HTML document contains a `<link>` tag referencing the brand CSS file at a known path (e.g., `/css/brand.css`).\n- The brand CSS file exists on the server and is accessible via the referenced path.\n- The HTML structure includes elements with class names or IDs that the CSS selectors target (e.g., `.hero`, `.opening-hours`, `.contact-form`).\n\n5. Main Flow\n1. The browser requests the landing page’s HTML document from the server.\n2. The browser parses the HTML and encounters the `<link rel=\"stylesheet\" href=\"/css/brand.css\">` tag.\n3. The browser initiates a separate HTTP request to fetch the `brand.css` file.\n4. The server responds with the CSS file containing brand rules (e.g., `:root` variables, class selectors).\n5. The browser parces the CSS, builds the CSS Object Model (CSSOM), and matches selectors to DOM elements.\n6. The browser computes final styles for each element, applying:\n   - Color values from CSS custom properties (e.g., `--color-primary: #2E5AAC`).\n   - Font family and size stacks (e.g., `font-family: 'Open Sans', sans-serif`).\n   - Spacing declarations (e.g., `margin: var(--spacing-md) 0;`).\n7. The browser paints the page, rendering all elements with the computed brand styles.\n\n6. Alternate Flows\n- A1: CSS file returns HTTP 404 (Not Found). The browser proceeds without external styles, rendering elements with browser default styles (User Agent Stylesheet). The page appears unstyled and inconsistent.\n- A2: CSS file contains a syntax error (e.g., missing closing brace). The browser ignores the malformed rule set but applies all preceding and subsequent valid rules. Partial styling is applied, potentially leaving some elements unstyled.\n- A3: User’s browser does not support CSS custom properties (e.g., IE11). The browser falls back to static values defined in fallback declarations (e.g., `color: #2E5AAC;` before `color: var(--color-primary);`). Brand consistency is maintained for supported properties.\n\n7. Postconditions\n- All visible elements within the Hero, Opening Hours, and Contact Form sections adhere to the defined brand style guide.\n- No element displays with browser default styling unless explicitly intended as a fallback.\n- The visual hierarchy (color contrast, font sizing, whitespace) matches the design specifications.\n\n8. Data Impact\n- None. The feature does not read, store, or modify any application data.\n- The CSS file may be cached by the browser or intermediate proxies, but no dynamic data is involved.\n\n9. UI Impact\n- The Hero section background uses the primary brand color (`#2E5AAC`), and its headline uses the primary heading font (`'Merriweather', serif`) at `2.5rem`.\n- Opening Hours table rows have consistent vertical padding (`1rem`) and use the secondary text color (`#4A4A4A`).\n- Contact form inputs share identical border styling (`1px solid #CCCCCC`), border radius (`4px`), and internal padding (`0.75rem`).\n- All body text uses the brand’s primary font (`'Open Sans', sans-serif`) at `1rem` with line height `1.6`.\n- Spacing between major sections follows a standardized scale (e.g., `--spacing-lg: 2rem;` applied as `margin-bottom`).\n\n10. Acceptance Criteria\n- AC1: The primary brand color (`#2E5AAC`) is correctly applied to all buttons, primary links, and the Hero background.\n- AC2: The font stack loads `'Open Sans'` for body text and `'Merriweather'` for all `h1`–`h6` elements, with fallbacks to system fonts.\n- AC3: The vertical spacing between the Hero, Opening Hours, and Contact Form sections equals exactly `2rem` (32px) on all viewport widths.\n- AC4: Contact form input fields have a consistent `border: 1px solid #CCCCCC`, `border-radius: 4px`, and `padding: 0.75rem 1rem`.\n- AC5: At the mobile breakpoint (`max-width: 768px`), font sizes reduce by `10%` and horizontal margins adjust to `1rem` while maintaining color and font family consistency.\n\n### F-13: Accessibility ARIA Labels for Form Elements\n\n1. Purpose\nTo ensure the contact form is fully perceivable, operable, and understandable for users of assistive technologies (e.g., screen readers) by providing programmatically determinable names, descriptions, and states for all form controls.\n\n2. Actors\nEnd-users utilizing assistive technologies such as screen readers (NVDA, JAWS, VoiceOver), screen magnifiers, or voice control software.\n\n3. Trigger\nThe landing page containing the contact form is rendered in the browser, or a user navigates to or activates a form control.\n\n4. Preconditions\nThe contact form HTML structure exists with input fields (text, email, textarea) and a submit button, as defined by the base feature. The form fields have associated visible text labels or placeholder text.\n\n5. Main Flow\n1.  Identify all interactive form elements within the contact form: `<input>` (text, email), `<textarea>`, and `<button>`.\n2.  For each `<input>` and `<textarea>`:\n    a.  If a visible `<label>` element exists and is correctly associated via the `for` attribute matching the element's `id`, no further action is required for the accessible name.\n    b.  If no visible `<label>` exists (e.g., placeholder-only), add an `aria-label` attribute with a concise, descriptive label (e.g., `aria-label=\"Your Message\"` for the message textarea).\n    c.  If additional instructions or hints exist (e.g., \"We'll respond within 24 hours\"), ensure the form control has an `aria-describedby` attribute referencing the `id` of the instruction element.\n3.  For required fields, add the `aria-required=\"true\"` attribute to the corresponding `<input>` or `<textarea>`.\n4.  For the submit `<button>`:\n    a.  Ensure the button text content provides an accessible name (e.g., \"Send Inquiry\").\n    b.  If the button uses only an icon, add an `aria-label` (e.g., `aria-label=\"Submit Inquiry\"`).\n5.  Implement an `aria-live=\"polite\"` region (e.g., a `<div>` with `role=\"status\"` or `aria-live=\"polite\"`) to announce form submission success or validation error messages. Associate this region with relevant form controls using `aria-describedby` when errors are present.\n6.  Perform manual testing with a screen reader to verify each form control is announced with its correct label, state (required), and any associated instructions or error messages.\n\n6. Alternate Flows\n1.  **Dynamic Error Announcement:** If a user submits the form with invalid data, the system generates inline error messages. The `aria-live` region must be updated to announce the first error. The erroneous field must have `aria-invalid=\"true\"` set and its `aria-describedby` updated to reference the specific error message element's `id`.\n2.  **Conditionally Revealed Fields:** If a form field (e.g., \"Phone Number\") is conditionally shown based on a user selection, the field must be added to the Accessibility Tree with its `aria-label` and `aria-required` (if applicable) upon being made visible. When hidden, it should be removed from the Accessibility Tree (e.g., via `aria-hidden=\"true\"` or `display: none`).\n\n7. Postconditions\nAll contact form controls have a programmatically determinable name and state. Validation and status messages are announced by assistive technologies. The contact form conforms to WCAG 2.1 Level AA Success Criteria 1.3.1 (Info and Relationships) and 4.1.2 (Name, Role, Value).\n\n8. Data Impact\nNo impact on form submission data payload or backend processing. The added ARIA attributes are purely presentational for assistive technologies and do not alter the data sent to the server.\n\n9. UI Impact\nNo visual changes to the user interface. All modifications are limited to the HTML attribute layer (`aria-label`, `aria-required`, `aria-describedby`, `aria-live`, `aria-invalid`, `role`). The visual layout, styling, and visible text remain unchanged.\n\n10. Acceptance Criteria\n*   **AC1:** Every text input and textarea in the contact form can be focused and its purpose is announced correctly by a screen reader (e.g., \"Name, edit text\").\n*   **AC2:** Required fields are announced as required (e.g., \"Email, required, edit text\").\n*   **AC3:** Any helper text associated with a field (e.g., \"Max 500 characters\") is announced after the field's label when the field receives focus.\n*   **AC4:** Upon form submission with validation errors, the first error is announced automatically from the `aria-live` region, and the erroneous field's state is announced as invalid when focused.\n*   **AC5:** The form passes an automated accessibility audit (using tools like WAVE, axe, or Lighthouse) with no critical violations related to form labels or inputs for the contact form section.\n\n### F-14: Image Optimization for Fast Load\n\n1. Purpose\nTo minimize the hero background image's file size and improve page load performance by compressing the source image and serving it in modern, web-optimized formats (primarily WebP) with appropriate fallbacks for browsers that lack support.\n\n2. Actors\n- Frontend build process (e.g., a task runner like Gulp or a static site generator plugin)\n- Web browser (client)\n- Content Delivery Network (CDN) or web server (for cache control)\n\n3. Trigger\nA user's browser requests the homepage (`/`), triggering the HTML response which includes a reference to the hero background image.\n\n4. Preconditions\n- A source hero image file (e.g., `hero-original.jpg` or `hero-original.png`) exists in the project's assets directory.\n- The build/deployment pipeline includes an image optimization tool (e.g., `imagemin`, `sharp`, or Squoosh CLI) configured for compression and format conversion.\n- The HTML template for the homepage contains a placeholder for the hero background image (e.g., a CSS `background-image` declaration or an `<img>`/`<picture>` element).\n\n5. Main Flow\n1. During the build process, the optimization tool locates the source hero image file.\n2. The tool applies lossy or lossless compression to the source image, targeting a quality setting (e.g., 75-85%) that balances visual fidelity and file size reduction.\n3. The compressed image is converted to the WebP format.\n4. The tool generates multiple resolution variants of the WebP image (e.g., `hero-1x.webp`, `hero-2x.webp`) to support responsive design and high-DPI displays.\n5. For browsers without WebP support, the tool generates fallback images in widely supported formats (JPEG for photographic content, PNG for graphics with transparency) at the same resolutions.\n6. The build process updates the homepage HTML/CSS to reference the optimized assets. This typically involves:\n   - Replacing a single `background-image: url(...)` in CSS with a `@media`-based swap or, preferably,\n   - Modifying the HTML to use a `<picture>` element with `<source type=\"image/webp\" srcset=\"...\">` and a fallback `<img src=\"hero-fallback.jpg\">`.\n7. The optimized image files (`.webp`, `.jpg`/`.png`) are copied to the final `dist/` or `public/` output directory.\n8. The web server or CDN is configured to serve these optimized files with long-term caching headers (e.g., `Cache-Control: max-age=31536000`).\n\n6. Alternate Flows\n- **A1: Image Optimization Tool Failure**: If the compression/conversion step fails (e.g., due to corrupt source file or tool error), the build logs a warning and copies the original source image to the output directory without modification. The HTML/CSS continues to reference this original file, ensuring the page remains functional but unoptimized.\n- **A2: Browser Without WebP or JPEG Support**: A very old browser that supports neither WebP nor standard JPEG/PNG. The `<picture>` element's fallback `<img>` with a supported format (e.g., PNG) will be displayed. If all formats fail, the browser's default broken image icon appears.\n- **A3: Low-Bandwidth Connection with Data Saver**: The user's browser or OS enables a data-saving mode that may ignore high-resolution sources. The `srcset` attribute with width descriptors (`w`) or pixel density descriptors (`x`) allows the browser to select the smallest appropriate variant automatically.\n\n7. Postconditions\n- The homepage's hero section displays an image that is visually comparable to the original but has a significantly smaller file size (typically 25-50% of the original).\n- The HTML/CSS of the deployed homepage references the newly generated, optimized image assets (`.webp` and fallback files).\n- The web server/CDN serves the correct image format (WebP or fallback) based on the `Accept` request header from the browser.\n- Overall page load time, particularly the Largest Contentful Paint (LCP) metric, is improved.\n\n8. Data Impact\n- **New/Modified Files**: Optimized hero image files (e.g., `hero-1x.webp`, `hero-2x.webp`, `hero-1x.jpg`) are added to the deployed asset directory.\n- **Modified Files**: The homepage HTML template and/or associated CSS file are updated to point to the new asset paths and formats.\n- **Configuration**: The project's build configuration (e.g., `gulpfile.js`, `webpack.config.js`, or `astro.config.mjs`) is updated to include the image optimization task for the hero image.\n- **Cache Metadata**: HTTP cache headers for image assets are set to a long duration (e.g., 1 year) with a fingerprinted filename strategy (e.g., `hero.abc123.webp`) to enable immutable caching. If fingerprinting is not used, cache headers must still be configured for long-term caching with versioning via query strings or directory changes.\n\n9. UI Impact\n- The visual appearance of the hero section remains identical to the design specification.\n- The image loads perceptibly faster, especially on slower network connections, reducing layout shift and improving the user's first impression.\n- No interactive elements are added or changed; the impact is purely on performance and rendering speed.\n\n10. Acceptance Criteria\n- **AC1**: The final deployed hero image file size (WebP version) is at least 60% smaller than the original source file, while maintaining a Structural Similarity Index (SSIM) of >0.95 or comparable visual quality in manual review.\n- **AC2**: A browser that supports WebP (e.g., Chrome, Firefox 65+, Edge 18+) receives the WebP image as evidenced by the Network tab in DevTools showing a `.webp` file.\n- **AC3**: A browser that does *not* support WebP (e.g., Safari < 14, older versions of IE) receives the fallback JPEG/PNG image as evidenced by the Network tab.\n- **AC4**: The `picture` element or CSS `image-set` correctly switches between 1x and 2x (or other) variants when the browser's device pixel ratio changes or the window is resized (for responsive widths).\n- **AC5**: Running Google Lighthouse (or WebPageTest) on the deployed homepage shows an improvement in the \"Properly size images\" and \"Efficiently encode images\" audits, and the LCP metric is below 2.5 seconds on a simulated 3G connection.\n- **AC6**: The build process completes successfully with the optimization step, and the optimized assets are present in the deployment package.\n\n### F-15: Cross‑Browser Compatibility Polyfills\n\n1. Purpose\nTo guarantee that the core interactive features of the bookstore landing page—specifically the contact form submission and responsive layout—function correctly in browsers with incomplete support for modern web standards (e.g., Internet Explorer 11, older mobile browsers). This feature does not enhance functionality for modern browsers.\n\n2. Actors\n*   End User: A visitor accessing the landing page with an older browser.\n*   Frontend Build System: The toolchain (e.g., Webpack, Vite, or a simple script) responsible for injecting polyfill scripts into the final HTML.\n\n3. Trigger\nThe browser begins parsing and executing the landing page's HTML, CSS, and JavaScript.\n\n4. Preconditions\n*   The core landing page code (HTML, CSS, JS) is written using modern standards (ES6+, CSS Grid/Flexbox, Fetch API, CSS Custom Properties).\n*   A build process or static HTML generation step is configured to include polyfill logic.\n*   Polyfill libraries (e.g., `core-js`, `whatwg-fetch`, `css-vars-ponyfill`) are available via a CDN or local assets.\n\n5. Main Flow\n1.  The browser loads the initial HTML document.\n2.  The build-injected script `polyfill-loader.js` executes immediately in the `<head>`.\n3.  `polyfill-loader.js` performs feature detection for the following critical APIs:\n    *   `Promise` (for async form handling).\n    *   `fetch` (for form submission).\n    *   `CSS.supports('display', 'grid')` (for responsive layout).\n4.  If any detected API is missing or deficient, `polyfill-loader.js` dynamically injects `<script>` tags for the corresponding polyfill libraries from the configured CDN (e.g., unpkg.com or cdnjs) in a specific order:\n    *   `core-js` (for ES6+ features like `Promise`, `Object.assign`, etc.).\n    *   `whatwg-fetch` (for the `fetch` API).\n    *   `css-vars-ponyfill` (for CSS Custom Properties).\n5.  The polyfill scripts load and execute, patching the browser's global environment.\n6.  The main application script `main.js` executes, now able to safely use the modern APIs. The contact form's `submit` event listener is attached, and the responsive CSS grid layout is applied without breaking.\n\n6. Alternate Flows\n*   **A1: Polyfill CDN Unavailable.** If a polyfill script fails to load (network error, CDN down), `polyfill-loader.js` logs a warning to the console. The contact form may fail to submit via AJAX. The page falls back to a non-JavaScript, full-page-reload form submission method if a standard `<form action>` attribute is present as a progressive enhancement fallback.\n*   **A2: Modern Browser.** If all feature detections pass (e.g., Chrome, Firefox, Edge, Safari 10+), `polyfill-loader.js` takes no action and exits. No polyfill scripts are injected, preserving performance.\n*   **A3: Partial Support.** Browser has `Promise` but lacks `fetch`. Only the `whatwg-fetch` polyfill is injected. The form submission logic using `fetch` becomes functional.\n\n7. Postconditions\n*   The contact form's JavaScript-driven submission (preventing default reload, sending data via `fetch`) works in the target older browsers.\n*   The CSS Grid/Flexbox layout renders correctly, and CSS variable-based theming (if used) applies.\n*   No uncaught JavaScript errors related to missing modern APIs appear in the console of tested legacy browsers.\n*   Modern browsers experience zero overhead from polyfill loading.\n\n8. Data Impact\nNone. This feature only affects client-side code delivery and execution. No server-side data structures or storage are modified.\n\n9. UI Impact\nNone. There is no visible change to the user interface. The polyfills operate transparently to ensure existing UI elements (form, layout) behave as designed.\n\n10. Acceptance Criteria\n*   **AC1:** The landing page loads without JavaScript errors in Internet Explorer 11.\n*   **AC2:** In IE11, the contact form successfully sends a test submission via the `fetch`-based AJAX method and displays the success/error message without a full page reload.\n*   **AC3:** The responsive layout (e.g., stacking of hero/content on mobile) renders correctly in IE11 and an Android 4.4 browser.\n*   **AC4:** In a modern browser (e.g., Chrome 120), the Network tab shows ZERO requests for polyfill libraries.\n*   **AC5:** The `polyfill-loader.js` script executes synchronously in the `<head>` before `main.js`.\n\n## Non-Functional Requirements\n\n- Zuverlaessigkeit: Ein iterativer Lauf muss ohne Verlust bereits akzeptierter Features abschliessen.\n- Determinismus: Freeze-Baseline und Feature-IDs bleiben ueber Iterationen stabil.\n- Performance: In Freeze-Mode wird Section-Patching gegenueber Vollregeneration bevorzugt.\n- Beobachtbarkeit: Diagnostics muessen Feature-Anzahl, blockierte Versuche und Integritaetsereignisse ausweisen.\n\n## Error Handling & Recovery\n\n- Ungueltiges oder fehlendes strukturiertes Delta erzwingt einen strikten Fallback auf den vorherigen stabilen PRD-Zustand.\n- Fehler bei Section-Regeneration im Freeze-Mode fallen sicher zurueck, ohne Feature-Verlust.\n- Parse-Fehler gelten nur dann als non-blocking, wenn Integritaet weiterhin garantiert ist.\n- Alle Fallback-Pfade werden mit explizitem Grund und Iterationsnummer protokolliert.\n\n## Deployment & Infrastructure\n\n- Runtime: Node.js-Service mit Endpunkten fuer den iterativen Compiler.\n- Umgebung: Dockerisierte Local/Dev-Ausfuehrung mit reproduzierbarem Build und Health-Endpoint.\n- Abhaengigkeiten: LLM-Provider-Integration mit Model-Fallback-Strategie.\n- Auslieferung: Aenderungen werden mit TypeScript-Check und End-to-End-API-Smoke-Run validiert.\n\n## Definition of Done\n\n- Erforderliche PRD-Sektionen sind vorhanden und nicht leer.\n- Die Feature-Anzahl faellt nicht unter die gefrorene Baseline.\n- Es bleiben keine doppelten Feature-IDs oder doppelten Feature-Namen bestehen.\n- Der iterative Lauf schliesst mit gueltigem finalen PRD und Diagnostics ab.\n",
      "tokensUsed": 6710
    },
    {
      "iterationNumber": 2,
      "generatorOutput": "## System Vision\n\nProvide a clean, responsive single‑page website that instantly informs visitors about the bookstore’s brand, operating hours, and enables them to send inquiries via a contact form. The landing page should encourage foot traffic and build a basic online presence with minimal maintenance.\n\n## System Boundaries\n\n- **Deployment**: Hosted on a static web hosting service (e.g., Netlify, Vercel, or GitHub Pages).  \n- **Runtime**: Pure client‑side HTML/CSS/JavaScript; no server‑side rendering required.  \n- **Online/Offline**: Fully functional online; offline access limited to cached static assets via Service Worker (optional).  \n- **Single‑User**: No authentication; all visitors see the same content.  \n- **Persistence**: Contact form submissions are sent to Formspree – no local data storage.  \n- **Integrations**: Integration with Google Maps for location display, Formspree for contact form submissions, and Google Analytics for tracking page performance and user interactions.\n\n## Domain Model\n\n- Kern-Entitaeten: Nutzer/Besucher, Feature, Anforderung und Iteration.\n- Beziehungen: Eine Anforderung aggregiert Features; jede Iteration verfeinert bestehende Features und kann neue ueber ein strukturiertes Delta hinzufuegen.\n- Datenkonsistenz: Feature-IDs bleiben ueber Iterationen stabil und gelten als unveraenderliche Kennungen.\n- Quellkontext (Iteration 1): Erstelle eine sehr einfache Landingpage fuer einen Buchladen mit Hero, Oeffnungszeiten und Kontaktformular. Halte es kompakt.\n\n## Global Business Rules\n\n- Bestehende Features duerfen waehrend der iterativen Verfeinerung nicht entfernt werden.\n- Neue Features werden nur ueber validiertes Feature-Delta-JSON akzeptiert.\n- Doppelte Features (gleiche Intention/Bezeichnung) werden deterministisch verworfen.\n- Akzeptanzkriterien aller Features muessen testbar und beobachtbar bleiben.\n\n## Functional Feature Catalogue\n\n### F-01: Responsive Page Layout\n\n1. Purpose\nTo ensure the bookstore landing page is fully accessible and visually coherent across a defined set of device viewports (mobile, tablet, desktop) by implementing a fluid, breakpoint-driven CSS layout system. This prevents horizontal scrolling, maintains readability, and optimizes navigation and content presentation for each screen size.\n\n2. Actors\nPrimary: End-user accessing the website via a web browser on a device (smartphone, tablet, laptop/desktop).\nSecondary: Web developer maintaining the codebase.\n\n3. Trigger\nThe user agent (browser) requests and begins rendering the `index.html` page.\n\n4. Preconditions\n*   The HTML document structure is complete and includes the necessary semantic container elements (e.g., `<header>`, `<main>`, `<footer>`).\n*   A CSS stylesheet is linked and loaded by the browser.\n*   The viewport meta tag is present in the HTML `<head>`: `<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">`.\n\n5. Main Flow\n1.  The browser parses the HTML and CSS.\n2.  The CSS establishes a base mobile-first layout using relative units (%, `rem`, `vw/vh`) for widths, margins, and font sizes. All primary content containers use `max-width: 100%` to contain content within the viewport.\n3.  The CSS defines three distinct media query breakpoints based on viewport width:\n    *   `@media (min-width: 768px)` for tablet portrait/landscape.\n    *   `@media (min-width: 1024px)` for desktop.\n4.  At the `768px` breakpoint, the layout modifies:\n    *   The main navigation (if present in header) switches from a vertical/hamburger pattern to a horizontal row.\n    *   Multi-column sections (e.g., opening hours and a brief \"about\" blurb) reflow from a single vertical stack to a two-column grid using `display: grid` or `flex-wrap`.\n    *   The Hero section's background image scaling and text container width are adjusted for better proportion.\n5.  At the `1024px` breakpoint, the layout further modifies:\n    *   The overall page container is centered with a fixed `max-width` (e.g., `1200px`) and horizontal `margin: auto`.\n    *   Multi-column sections expand to a three-column grid where content allows.\n    *   The contact form's input fields and textarea are set to a comfortable fixed or percentage-based width within their container.\n6.  The browser continuously evaluates the viewport width during resize events and applies the appropriate breakpoint styles, ensuring a seamless transition between layouts without content overflow or unreadably narrow columns.\n\n6. Alternate Flows\n*   A1: Extremely Narrow Viewport (< 320px). The mobile-first layout may cause text to wrap in an unbalanced way or touch targets to be too small. The system applies the base mobile styles but may trigger a browser-level zoom or horizontal scroll if content (e.g., a long, unbreakable word in the contact form label) exceeds the viewport. **Recovery:** CSS uses `word-wrap: break-word` and `min-width` constraints on interactive elements to mitigate this.\n*   A2: High Pixel Density / Zoomed Viewport. A user on a high-DPI device or using browser zoom may have a CSS viewport width that fluctuates around a breakpoint. The layout may flicker between breakpoint states during resize. **Recovery:** The design uses `rem` units and flexible grids that tolerate small width variations, minimizing visual \"jumps.\"\n*   A3: Disabled JavaScript/CSS. The responsive layout depends entirely on CSS. If CSS is disabled, the page falls back to a single-column, unstyled vertical document flow (default browser behavior), which remains fully functional and readable, albeit not visually optimized.\n\n7. Postconditions\n*   The landing page renders without horizontal scrollbars at all viewport widths from 320px to 1920px.\n*   All text remains readable (minimum font size ~16px on mobile, adjusted appropriately for larger screens) and does not require horizontal scrolling.\n*   Navigation is operable on all device sizes (e.g., touch-friendly targets on mobile, visible links on desktop).\n*   Form inputs and buttons have sufficient size and spacing for touch interaction on mobile devices.\n*   The visual hierarchy (Hero prominence, section separation) is maintained across all breakpoints.\n\n8. Data Impact\n*   No new data is stored or processed by the server or client-side scripts. This feature is purely presentational.\n*   The only \"data\" impacted is the CSS itself, which will increase in file size due to media query rules. Performance impact is negligible for a single, small page.\n\n9. UI Impact\n*   **Mobile (<768px):** Single-column layout. Header navigation condenses (e.g., to a hamburger menu or stacked links). Hero text is large and centered. All sections stack vertically with full-width containers. Form fields stack vertically.\n*   **Tablet (768px-1023px):** Introduction of 2-column grids for content-heavy sections (e.g., \"About\" text next to a small image, opening hours next to a map placeholder). Navigation expands to a horizontal list. Form may use a 2-column layout for label/input pairs if space permits.\n*   **Desktop (≥1024px):** Fixed-width, centered main container (e.g., 1140px). Navigation is fully horizontal. Hero image and text use a balanced side-by-side or overlaid layout. Content sections use up to 3 columns. Form fields may be inline in a single row where logical (e.g., first name / last name).\n\n10. Acceptance Criteria\n*   AC1: Using browser DevTools device mode, the page must render correctly at the following standard widths: 375px (iPhone SE), 768px (iPad), 1024px (iPad Pro), 1440px (standard desktop). No content overflows the viewport width.\n*   AC2: At the 768px breakpoint, the main navigation must change from a vertical stack to a horizontal row. At the 1024px breakpoint, the page content container must be centered with a visible max-width margin.\n*   AC3: All interactive elements (links, buttons, form inputs, submit button) must have a minimum touch target size of 44x44 CSS pixels on mobile viewports.\n*   AC4: The Hero section's call-to-action button must be clearly visible and positioned within the natural reading flow on all viewports.\n*   AC5: The contact form must be fully usable (all fields focusable, labels associated) and submit-able (via standard POST) on the smallest supported viewport (320px).\n\n### F-02: Hero Section with Background Image and Headline\n\n1. Purpose\nTo immediately establish the bookstore's brand identity and create a visually engaging first impression for visitors, encouraging them to explore the site and visit the physical location.\n\n2. Actors\nEnd-user (website visitor).\n\n3. Trigger\nThe browser finishes parsing the initial HTML document and begins rendering the page.\n\n4. Preconditions\nThe background image asset file (e.g., `hero-bg.jpg`) is present in the project's static assets directory and is accessible via the configured asset path. The HTML and CSS files containing the hero section code have been successfully deployed to the web server.\n\n5. Main Flow\n1.  The browser requests the landing page URL (e.g., `/`).\n2.  The server responds with the HTML document.\n3.  The browser parses the HTML and encounters the `<header>` or `<section>` element with a specific ID or class (e.g., `id=\"hero\"`).\n4.  The browser constructs the DOM node for the hero section container `div`.\n5.  The browser applies linked CSS styles to the hero container: `width: 100%`, `min-height: 60vh` (or a fixed pixel value like `400px`), `background-image: url('/assets/hero-bg.jpg')`, `background-size: cover`, `background-position: center`.\n6.  The browser creates a child element (e.g., `div` or `h1`) for the headline text within the hero container.\n7.  The browser applies CSS styles to the headline element: `position: absolute` or `relative`, `top: 50%`, `left: 50%`, `transform: translate(-50%, -50%)`, `color: #ffffff`, `text-align: center`, `font-size: 3rem` (with responsive `clamp()` or media queries), `text-shadow: 0 2px 4px rgba(0,0,0,0.5)`.\n8.  The browser initiates an asynchronous network request for the background image file.\n9.  Upon successful image download, the browser paints the image as the background of the hero container.\n10. The headline text is rendered, centered both horizontally and vertically over the background image.\n\n6. Alternate Flows\n*   **A1: Background image fails to load (404 or network error).**\n    1.  The browser's image load event triggers an error.\n    2.  The CSS `background-image` property fails to resolve.\n    3.  The hero container displays its fallback `background-color` (e.g., `#f0f0f0` or a solid brand color defined in CSS).\n    4.  The headline text remains visible and readable against the solid color background.\n*   **A2: Viewport width is extremely narrow (e.g., < 320px).**\n    1.  The responsive CSS media queries activate.\n    2.  The headline `font-size` is reduced to a minimum readable size (e.g., `1.5rem`).\n    3.  If the headline text is too long, it wraps onto multiple lines within the centered container.\n    4.  The `min-height` of the hero section may be reduced to preserve content visibility without excessive scrolling.\n\n7. Postconditions\nThe hero section is fully rendered and visible in the viewport. The background image is displayed (or the fallback color is shown), and the headline text is centered, styled, and legible. No JavaScript errors related to the hero section are present in the browser console.\n\n8. Data Impact\nNo persistent data is created, read, updated, or deleted by this feature. It consumes static asset files (image, CSS, HTML) from the server.\n\n9. UI Impact\n*   **Layout:** Introduces a full-width (`width: 100%`) block-level element at the top of the page.\n*   **Styling:** Applies a background image with `cover` sizing, ensuring no empty space while potentially cropping the image edges. Uses absolute/relative positioning and CSS transforms for perfect text centering.\n*   **Responsiveness:** Hero section height adjusts via `min-height` and/or media queries. Headline font size scales responsively using `clamp()` or breakpoints. Text remains centered on all screen sizes.\n*   **Accessibility:** The headline text must have a color contrast ratio of at least 4.5:1 against the average background image area. The hero container should have a semantic landmark role (e.g., `<header>` or `role=\"banner\"`).\n\n10. Acceptance Criteria\n*   **AC1:** The hero section occupies the full width of the browser viewport.\n*   **AC2:** The background image covers the entire hero section area without repeating, maintaining its aspect ratio (edges may be cropped).\n*   **AC3:** The headline text is perfectly centered both horizontally and vertically within the hero section.\n*   **AC4:** The headline text is clearly legible against the background image (or fallback color) with sufficient contrast.\n*   **AC5:** The hero section renders correctly on standard desktop (>= 1024px), tablet (768px-1023px), and mobile (< 768px) viewports. Text size and section height adjust appropriately.\n*   **AC6:** If the background image asset is missing, the fallback background color is displayed, and the headline remains fully visible and styled.\n*   **AC7:** The hero section is the first major visual element rendered above the fold on a typical network connection (loads within 2 seconds on a 3G connection simulation).\n\n### F-03: Hero Call‑to‑Action Button\n\n1. Purpose\nTo provide a clear, single-step navigation path from the hero section to the contact form, encouraging user engagement and inquiries.\n\n2. Actors\nAny visitor (end-user) viewing the landing page.\n\n3. Trigger\nThe user clicks the Call‑to‑Action (CTA) button located within the hero section.\n\n4. Preconditions\n- The landing page is fully loaded in the user's browser.\n- The hero section is rendered and visible.\n- The contact form section exists in the DOM with a specific, known target ID (e.g., `#contact-form`).\n- Client-side JavaScript is enabled and executing.\n\n5. Main Flow\n1. User accesses the landing page URL.\n2. The browser renders the complete HTML, including the hero section containing a button element with a specific identifier (e.g., `id=\"hero-cta-button\"`) and visible text (e.g., \"Kontaktieren Sie uns\" or \"Contact Us\").\n3. User positions the pointer over the CTA button and performs a primary click action (e.g., left-click).\n4. The browser's JavaScript event listener, attached to the button's `click` event, intercepts the default action.\n5. The script programmatically locates the target contact form element by its ID (`#contact-form`).\n6. The browser's viewport smoothly scrolls vertically until the top of the target form element aligns with the top of the viewport.\n7. Upon completion of the scroll animation, JavaScript sets the input focus on the first focusable field within the contact form (typically the name or email input field).\n8. The user can immediately begin typing into the focused form field.\n\n6. Alternate Flows\n- A1: Contact Form Element Not Found\n  1. In step 5 of the Main Flow, the script fails to locate an element with the specified target ID.\n  2. The click event is logged to the browser's console as a warning.\n  3. No scrolling occurs. The button's default behavior (if any) is prevented, and the user remains at the current scroll position.\n  4. The user must manually scroll to find the contact form.\n- A2: JavaScript Disabled or Erroneous\n  1. The user's browser has JavaScript disabled, or a critical script error prevents the event listener from functioning.\n  2. The button renders as a standard HTML button or anchor tag.\n  3. If the button is an anchor tag (`<a>`), its `href` attribute may point to the form's ID (e.g., `href=\"#contact-form\"`). The browser performs an instant, non-smooth jump to the form element.\n  4. If the button is a `<button>` without a valid `href` or script, clicking it has no effect; the user remains on the page.\n\n7. Postconditions\n- The page's vertical scroll position is changed such that the contact form section is visible at the top of the viewport.\n- The keyboard focus is programmatically moved to the first input field within the contact form.\n- No data is transmitted to the server, and no persistent client-side state (e.g., cookies, localStorage) is altered by this interaction.\n\n8. Data Impact\nNone. This feature involves no data read, creation, update, or deletion. It is a purely client-side UI interaction.\n\n9. UI Impact\n- **Static UI:** A button is added to the hero section's HTML structure with specific text and an identifier.\n- **Dynamic UI on Click:** The viewport scroll position animates smoothly to the contact form. The visual focus ring (or system focus indicator) appears on the first form input field after scrolling completes.\n\n10. Acceptance Criteria\n- AC1: The hero section contains a visible button element with the identifier `hero-cta-button`.\n- AC2: The button's visible text is a clear call to action (e.g., \"Kontaktformular\" or \"Contact Us\").\n- AC3: Clicking the button initiates a smooth scroll animation (duration ~500-800ms) to the element with ID `contact-form`.\n- AC4: After the scroll finishes, the `focus()` method is called on the first text input, email input, or textarea within the `#contact-form` container.\n- AC5: If the `#contact-form` element does not exist in the DOM, clicking the button does not cause a page jump or error alert; the click event is silently prevented, and the console logs a warning.\n- AC6: The feature works correctly across modern browsers (Chrome, Firefox, Safari, Edge) with JavaScript enabled.\n\n### F-04: Operating Hours Display\n\n### 1. Purpose\nProvide visitors with an immediately visible, accurately formatted block that lists the bookstore’s daily opening and closing times. The block must be readable on all device sizes and accessible to screen‑reader users.\n\n### 2. Actors\n- **Visitor** – any user who loads the landing page.  \n- **System** – the web server / client‑side JavaScript runtime that renders the page.\n\n### 3. Trigger\nThe feature is triggered when the landing page is requested and the DOM is ready for rendering (i.e., after the `DOMContentLoaded` event).\n\n### 4. Preconditions\n1. A JSON file `hours.json` exists at `/data/hours.json` with the structure defined in section 9.  \n2. The web server is configured to serve static assets from the `/data` directory with MIME type `application/json`.  \n3. The HTML template contains a placeholder element `<section id=\"operating-hours\"></section>`.  \n4. The CSS file `styles.css` includes the classes referenced in section 9.\n\n### 5. Main Flow\n1. **Page Load** – Browser loads `index.html` and all linked resources.  \n2. **DOM Ready** – JavaScript registers a listener for `DOMContentLoaded`.  \n3. **Fetch Data** – Listener executes `fetch('/data/hours.json')`.  \n4. **Validate Response** –  \n   a. Verify HTTP status 200.  \n   b. Parse response as JSON.  \n   c. Confirm the JSON object contains a `days` array with exactly 7 entries (Monday‑Sunday).  \n5. **Transform Data** – For each entry, format the time range as `HH:MM – HH:MM` (24‑hour clock). If `closed: true`, replace the time range with the string “Geschlossen”.  \n6. **Generate Markup** – Build a `<ul class=\"hours-list\">` where each `<li>` contains:  \n   - `<span class=\"day-name\">` with the localized weekday name.  \n   - `<span class=\"day-time\">` with the formatted time or “Geschlossen”.  \n7. **Inject Markup** – Replace the innerHTML of `<section id=\"operating-hours\">` with:  \n   ```html\n   <h2 class=\"section-title\">Öffnungszeiten</h2>\n   <ul class=\"hours-list\">…generated items…</ul>\n   ```  \n8. **Apply ARIA** – Add `role=\"region\"` and `aria-labelledby=\"operating-hours-title\"` to the section; set `id=\"operating-hours-title\"` on the `<h2>`.  \n9. **Cache Result** – Store the parsed JSON in `sessionStorage` under key `bookstoreHours` for the duration of the session.  \n10. **Error Handling (Success Path)** – If steps 1‑9 complete without exception, log `Operating hours rendered successfully` to the console.\n\n### 6. Alternate Flows\n**A1 – Fetch Failure (Network or 404)**  \n1. Fetch returns a non‑200 status or throws a network error.  \n2. Skip steps 4‑9.  \n3. Render fallback markup:  \n   ```html\n   <h2 class=\"section-title\">Öffnungszeiten</h2>\n   <p class=\"hours-error\">Öffnungszeiten derzeit nicht verfügbar.</p>\n   ```  \n4. Log error to console with details.\n\n**A2 – Invalid JSON Structure**  \n1. JSON parses but fails validation (missing days, wrong count, missing fields).  \n2. Follow steps A1‑4.\n\n**A3 – Browser Does Not Support `fetch`**  \n1. Detect missing `window.fetch`.  \n2. Load a polyfill script `fetch-polyfill.js` synchronously before step 3.  \n3. Continue with Main Flow after polyfill is loaded.\n\n### 7. Postconditions\n- The DOM contains a fully populated `<section id=\"operating-hours\">` with either the formatted hours list or the fallback error message.  \n- `sessionStorage['bookstoreHours']` holds the validated JSON object for the current session (or is absent if fetch failed).  \n- No uncaught JavaScript exceptions remain after page load.\n\n### 8. Data Impact\n| Operation | Data Store | Read/Write | Description |\n|-----------|------------|------------|-------------|\n| Read      | `/data/hours.json` (static file) | Read | Source of operating‑hour data. |\n| Write     | `sessionStorage['bookstoreHours']` | Write | Cached copy for the session. |\n| Read      | `sessionStorage['bookstoreHours']` (on subsequent loads) | Read | Used to avoid a second network request if present. |\n\n### 9. UI Impact\n- **HTML** – Add `<section id=\"operating-hours\"></section>` to `index.html` within the main content flow, positioned after the hero block.  \n- **CSS** – New classes:  \n  - `.hours-list` – `list-style:none; margin:0; padding:0; display:flex; flex-direction:column;`  \n  - `.day-name` – `font-weight:600; width:120px; display:inline-block;`  \n  - `.day-time` – `color:#555;`  \n  - `.hours-error` – `color:#c00; font-style:italic;`  \n  - Media query `@media (min-width:768px)` to display the list in two columns.  \n- **Accessibility** – `role=\"region\"` and `aria-labelledby` as defined in step 8 of Main Flow.  \n\n### 10. Acceptance Criteria\n1. **Correct Rendering** – All seven weekdays appear in German order (Montag‑Sonntag) with the exact times defined in `hours.json`. Closed days display “Geschlossen”.  \n2. **Responsive Layout** – On screens ≥ 768 px the list displays in two columns; on smaller screens it stacks vertically. Visual regression tests must pass for both breakpoints.  \n3. **Accessibility** – Screen‑reader navigation announces “Öffnungszeiten” as a region title and reads each day‑time pair. Automated aXe test must report no violations.  \n4. **Error Handling** – Simulating a 404 for `hours.json` results in the fallback paragraph “Öffnungszeiten derzeit nicht verfügbar.” displayed, and no JavaScript uncaught errors appear.  \n5. **Caching** – After a successful fetch, a subsequent page reload within the same browser session reads the data from `sessionStorage` (verified via console log).  \n6. **Performance** – The fetch request completes within 200 ms on a standard 3G connection; the total time from `DOMContentLoaded` to fully rendered hours block is ≤ 300 ms.  \n7. **Cross‑Browser** – Feature works in the latest versions of Chrome, Firefox, Safari, and Edge without polyfill; in Internet Explorer 11 the polyfill path is exercised and the block still renders correctly.\n\n### F-05: Contact Form Fields\n\n1. Purpose\nTo collect visitor inquiries (name, email address, and message) via a web form for the bookstore, enabling the business to receive and respond to questions.\n\n2. Actors\nVisitor (end-user of the website).\n\n3. Trigger\nThe visitor actively engages with the contact form by focusing on a field, entering data, or attempting to submit the form.\n\n4. Preconditions\n- The contact form section of the landing page is fully rendered and visible to the visitor.\n- All form fields (Name, Email, Message) are present, empty, and in an interactive state.\n- No previous form submission is in progress.\n\n5. Main Flow\n1. The visitor locates the contact form on the landing page.\n2. The visitor clicks into the \"Name\" input field and types their full name.\n3. The visitor clicks into the \"Email\" input field and types a valid email address.\n4. The visitor clicks into the \"Message\" textarea field and types their inquiry.\n5. The visitor clicks the \"Submit\" button.\n6. The system performs client-side validation on all fields (non-empty, valid email format).\n7. Upon successful validation, the system packages the form data into a structured payload (JSON or form-data).\n8. The system sends an asynchronous HTTP POST request to the predefined backend endpoint (e.g., `/api/contact`).\n9. The system receives a successful HTTP 200/201 response from the backend.\n10. The system clears all input fields and displays a persistent success confirmation message (e.g., \"Thank you! We will contact you soon.\") within the form container.\n\n6. Alternate Flows\n- **A1: Validation Failure (Client-Side)**\n  - At step 6, if any field is empty or the email is invalid, the system highlights the erroneous field(s) with a visual indicator (e.g., red border) and displays an inline, specific error message (e.g., \"Please enter your name\", \"Please enter a valid email address\").\n  - The form submission is halted. The visitor must correct the errors and re-attempt submission (return to step 5).\n- **A2: Backend Submission Failure**\n  - At step 9, if the backend returns an error (e.g., HTTP 500, network timeout), the system does not clear the form.\n  - The system displays a generic, persistent error message within the form container (e.g., \"Sorry, something went wrong. Please try again later.\").\n  - The visitor's entered data remains in the fields for correction and resubmission.\n\n7. Postconditions\n- On successful submission: All form fields are empty. A success message is visibly displayed. The form is in a state ready for a new submission.\n- On failed submission: The form fields retain the visitor's last input. An appropriate error message is visibly displayed.\n\n8. Data Impact\n- **Structured Data Created:** A contact inquiry object containing: `visitor_name` (string), `visitor_email` (string), `message_text` (string), `submission_timestamp` (datetime, generated server-side).\n- **Data Persistence:** The inquiry object is persisted to a designated data store (e.g., database table `contact_inquiries` or a third-party service) by the backend.\n- **Data Flow:** The client-side payload is transmitted via HTTPS to the backend endpoint. No sensitive data is stored client-side post-submission.\n\n9. UI Impact\n- **Form Structure:** Three vertically stacked, labeled input elements: a single-line text input for \"Name\", a single-line email input for \"Email\", and a multi-line textarea for \"Message\".\n- **Labels & Placeholders:** Each field has a persistent, accessible label (`<label>`). The \"Email\" field uses `type=\"email\"` for native browser validation. Placeholder text may be used for guidance (e.g., \"Your full name\").\n- **Submit Button:** A clearly labeled button (e.g., \"Send Message\") with `type=\"submit\"`.\n- **Feedback Areas:** Dedicated, dynamically updated containers for inline field validation errors and a form-level status message (success/error).\n- **Styling:** Consistent with the landing page's design system (typography, spacing, color palette). Interactive states (focus, hover) are defined. Error states use a designated error color.\n\n10. Acceptance Criteria\n- **AC1:** The form must render with exactly three fields: \"Name\" (text input), \"Email\" (email input), and \"Message\" (textarea), and a submit button.\n- **AC2:** Attempting to submit with any empty field must prevent submission and show an inline error message specific to the empty field(s).\n- **AC3:** Entering an invalid email format (e.g., \"test@\") must prevent submission and show the inline error \"Please enter a valid email address.\"\n- **AC4:** Submitting a form with all valid data must clear all fields and display the success message \"Thank you! We will contact you soon.\" within 2 seconds.\n- **AC5:** If the backend request fails (simulated), the form must not clear, and the generic error message must appear.\n- **AC6:** The \"Email\" field must accept and allow valid submission of standard email addresses (e.g., `user@example.com`).\n- **AC7:** All labels must be programmatically associated with their respective input fields using the `for`/`id` attribute pair for accessibility.\n\n### F-06: Client‑Side Form Validation\n\n1. Purpose\nTo ensure that all data entered into the contact form is complete and correctly formatted before submission, preventing unnecessary server requests and providing immediate, clear feedback to the user.\n\n2. Actors\n- End‑user: Fills out the contact form.\n- Frontend System: Executes validation logic and controls form submission.\n\n3. Trigger\nThe user attempts to submit the contact form by clicking the submit button or pressing the Enter key while focused on a form field.\n\n4. Preconditions\n- The contact form is fully rendered in the DOM.\n- Form fields exist with defined attributes: `name` (text input), `email` (email input), `message` (textarea).\n- All fields are marked as `required` in HTML.\n- Client‑side validation JavaScript is loaded and active.\n\n5. Main Flow\n1. User fills in values in the form fields (name, email, message).\n2. User initiates form submission.\n3. System validates each field synchronously against the following rules:\n   - **Name**: Must be non‑empty and ≤ 100 characters.\n   - **Email**: Must be non‑empty and match a standard email regex pattern (RFC 5322 compliant).\n   - **Message**: Must be non‑empty, ≥ 10 characters, and ≤ 1000 characters.\n4. If any field fails validation:\n   a. Add an `aria-invalid=\"true\"` attribute to the field.\n   b. Apply a visual error style (e.g., red border) to the field’s container.\n   c. Insert a specific error message element (`<div class=\"error-message\">`) below the field with text describing the exact failure.\n   d. Set focus to the first invalid field.\n   e. Halt the submission process (prevent default form submission event).\n5. If all fields pass validation:\n   a. Remove all existing error styles and messages from all fields.\n   b. Allow the form submission event to proceed normally (HTTP POST to the server endpoint).\n\n6. Alternate Flows\n- **A1: Real‑time validation on blur**\n  - When a user leaves a field (blur event), the system validates that single field.\n  - If invalid, immediately shows the error message and styling; if valid, clears any existing error for that field.\n  - This occurs independently of the main submit flow.\n- **A2: User corrects an error after initial failed submission**\n  - After errors are displayed, the user amends one or more fields.\n  - User attempts submission again.\n  - System re‑validates all fields (Main Flow steps 3–5) and either blocks submission with updated errors or allows it if all are now valid.\n- **A3: Submission with empty form**\n  - User clicks submit with all fields empty.\n  - System validates each required field, marks all as invalid, displays \"This field is required\" for each, and focuses the first field (name).\n\n7. Postconditions\n- **Invalid submission**: The form remains visible on the page. All invalid fields have persistent error UI (styling, ARIA attributes, error message text). No HTTP request is sent to the server. Form data is not cleared.\n- **Valid submission**: The form submission event is not intercepted by validation code. The browser proceeds with the native form submission (or JavaScript‑handled fetch) to the configured server endpoint. All error UI is removed from the form fields.\n\n8. Data Impact\n- No data is stored or modified on the client beyond temporary UI state.\n- Validation rules (regex patterns, length limits) are hard‑coded in the frontend JavaScript bundle.\n- Invalid input never leaves the client; only validated data is eligible for transmission.\n\n9. UI Impact\n- Each form field container gains/loses an `error` CSS class for styling (e.g., `border-color: #dc3545`).\n- Each field has an adjacent `<div class=\"error-message\" role=\"alert\" aria-live=\"polite\">` that becomes visible with text when invalid, hidden when valid.\n- The submit button remains enabled at all times; validation does not disable it but prevents submission on invalid data.\n- Focus management programmatically moves to the first invalid field upon failed submission.\n- All error messages are concise, specific, and in German (e.g., \"Bitte geben Sie Ihren Namen ein.\", \"Ungültige E‑Mail‑Adresse.\").\n\n10. Acceptance Criteria\n1. **Name field**:\n   - Empty → error \"Bitte geben Sie Ihren Namen ein.\" shown.\n   - > 100 characters → error \"Der Name darf maximal 100 Zeichen haben.\" shown.\n2. **Email field**:\n   - Empty → error \"Bitte geben Sie Ihre E‑Mail‑Adresse ein.\" shown.\n   - Invalid format (e.g., \"test@\") → error \"Bitte geben Sie eine gültige E‑Mail‑Adresse ein.\" shown.\n3. **Message field**:\n   - Empty → error \"Bitte geben Sie eine Nachricht ein.\" shown.\n   - < 10 characters → error \"Die Nachricht muss mindestens 10 Zeichen haben.\" shown.\n   - > 1000 characters → error \"Die Nachricht darf maximal 1000 Zeichen haben.\" shown.\n4. On submit with any invalid field: No network request is made; browser console shows no JavaScript errors; focus moves to first invalid field.\n5. On submit with all fields valid: Form submits normally (network request observed in dev tools); all error messages are removed.\n6. Validation triggers on submit and on blur for each field (per Alternate Flow A1).\n7. All error containers have `role=\"alert\"` and `aria-live=\"polite\"` for screen reader announcement.\n8. Invalid fields have `aria-invalid=\"true\"`; valid fields have `aria-invalid=\"false\"` or attribute removed.\n9. Validation logic is pure frontend; no server communication occurs during validation.\n\n### F-07: Form Submission Endpoint Integration\n\n1. Purpose\nTo securely receive validated contact form data from the frontend, process it, and forward the inquiry as an email to the bookstore's designated contact address. This enables the business to receive and respond to customer inquiries.\n\n2. Actors\nPrimary Actor: Customer (Website Visitor)\nSecondary Actor: Backend System / Email Service\n\n3. Trigger\nThe customer completes all required fields in the contact form and clicks the \"Submit\" button after successful client-side validation.\n\n4. Preconditions\n*   The contact form on the frontend has passed all client-side validation rules (e.g., valid email format, non-empty required fields).\n*   The backend API endpoint (e.g., `POST /api/contact`) is deployed, accessible, and healthy.\n*   The backend server has correct SMTP credentials configured and network access to an email relay service (e.g., SendGrid, AWS SES, or a local SMTP server).\n*   The customer's device has an active internet connection.\n\n5. Main Flow\n1.  The frontend JavaScript collects the form field values (`name`, `email`, `subject`, `message`) into a JSON object.\n2.  The frontend sends an HTTPS `POST` request to the configured backend endpoint, including the JSON object in the request body and setting the `Content-Type` header to `application/json`.\n3.  The backend server receives the request and parses the JSON body.\n4.  The backend performs server-side validation on all required fields (presence, basic sanitization, email format). If validation fails, the flow proceeds to Alternate Flow A.\n5.  The backend constructs a formatted email. The recipient is a fixed, configurable bookstore contact email (e.g., `contact@buchladen.de`). The sender is set to the customer's provided email address. The email subject includes the customer's subject. The email body includes the customer's name, email, and message, formatted for readability.\n6.  The backend initiates an SMTP transaction to send the constructed email.\n7.  If the SMTP transaction is successful, the backend logs the successful submission (including a timestamp and customer email) and returns an HTTP `200 OK` response with a JSON body: `{\"success\": true, \"message\": \"Ihre Nachricht wurde gesendet.\"}`.\n8.  The frontend receives the `200 OK` response, displays a success notification/modal to the user, and resets the form fields to empty.\n\n6. Alternate Flows\nA.  Server-Side Validation Failure:\n    *   At step 4, if any field is empty or the email format is invalid, the backend immediately returns an HTTP `400 Bad Request` response. The JSON body contains an error object detailing the failed field(s), e.g., `{\"success\": false, \"errors\": {\"email\": \"Ungültige E-Mail-Adresse\", \"message\": \"Dieses Feld ist erforderlich\"}}`.\n    *   The frontend receives the `400` response, parses the error details, and displays specific inline error messages next to the relevant form fields and/or a general error summary.\n\nB.  Email Service Failure:\n    *   At step 6, if the SMTP server returns an error (e.g., authentication failure, rate limit, connection timeout), the backend logs the detailed error (including the customer's data for debugging) and returns an HTTP `500 Internal Server Error` response with a generic JSON body: `{\"success\": false, \"message\": \"Serverfehler. Bitte versuchen Sie es später erneut.\"}`.\n    *   The frontend receives the `500` response and displays a generic, non-technical error notification to the user. The form data remains in the fields so the user can retry.\n\n7. Postconditions\n*   **Success:** The customer's inquiry has been delivered to the bookstore's inbox. A log entry recording the successful submission exists on the backend server. The frontend form is cleared and shows a success message.\n*   **Failure (Validation):** No email is sent. An error log entry may be created. The frontend form retains the user's input and displays validation errors.\n*   **Failure (Email Service):** No email is reliably sent. An error log entry with details is created on the backend server. The frontend form retains the user's input and displays a generic error message.\n\n8. Data Impact\n*   **Transient Data:** The customer's submitted data (`name`, `email`, `subject`, `message`) is transmitted from client to server and processed in memory.\n*   **Persisted Data (Backend):** A minimal log entry (timestamp, customer email, submission status) is written to the application log file or logging system. The full message content is not stored in a database by this feature.\n*   **External Data:** The customer's data is sent to and stored (in the inbox) of the external email service/recipient mailbox.\n\n9. UI Impact\n*   The contact form must have a loading state (e.g., disabled submit button, spinner) while the request is in flight.\n*   On a successful submission (HTTP 200), a clear, dismissible success notification must appear (e.g., toast message: \"Ihre Nachricht wurde erfolgreich gesendet.\").\n*   On a validation failure (HTTP 400), specific field-level error messages must appear below the relevant inputs, and/or a summary error banner at the top of the form.\n*   On a server/email failure (HTTP 500), a generic error notification must appear (e.g., \"Ein technischer Fehler ist aufgetreten. Bitte versuchen Sie es später noch einmal.\").\n*   The form must be reset to its initial empty state only after a `200` response.\n\n10. Acceptance Criteria\n1.  Given a customer fills all required fields with valid data, when they click submit, then an email containing the full inquiry is received at the configured bookstore contact address within 10 seconds.\n2.  Given a customer submits an invalid email address, when they click submit, then the backend returns HTTP 400 and the frontend displays an error specifically for the email field.\n3.  Given the backend email service (SMTP) is unavailable, when a valid form is submitted, then the backend returns HTTP 500 and the frontend displays a generic error message, not exposing internal SMTP details.\n4.  Given a successful submission, then the frontend form fields are cleared and a success message is visible to the user.\n5.  Given any API request, then all user-provided data is sanitized on the backend to prevent basic injection attacks (e.g., newlines in headers) before being used in email construction.\n6.  The backend endpoint only accepts `POST` requests and requires the `Content-Type: application/json` header. Requests with other methods or content types return `405` or `415` respectively.\n\n### F-08: Submission Success Message\n\n1. Purpose  \n   Provide immediate, clear feedback to the visitor that their contact‑form submission has been received and processed successfully, reinforcing trust and preventing duplicate submissions.\n\n2. Actors  \n   - **Visitor**: the end‑user who fills out and submits the contact form.  \n   - **Web Client**: the browser‑side JavaScript responsible for sending the request and rendering UI feedback.  \n   - **Backend API**: the HTTP endpoint that receives the form data and returns a success status.\n\n3. Trigger  \n   The backend API returns an HTTP 200 response with a JSON body `{ \"status\": \"success\" }` after a valid form submission.\n\n4. Preconditions  \n   1. The contact form fields have passed client‑side validation.  \n   2. The visitor has clicked the **Submit** button.  \n   3. The browser has an active network connection.  \n   4. The backend endpoint `/api/contact` is reachable and configured to return a success payload for valid submissions.\n\n5. Main Flow  \n   1. Visitor clicks the **Submit** button.  \n   2. Web Client disables the button, shows a loading spinner, and serializes the form data to JSON.  \n   3. Web Client sends an asynchronous `POST` request to `/api/contact` with the JSON payload and the header `Content-Type: application/json`.  \n   4. Backend processes the payload, stores the inquiry, and responds with HTTP 200 and body `{ \"status\": \"success\", \"messageId\": \"<uuid>\" }`.  \n   5. Web Client receives the response, re‑enables the **Submit** button, and hides the loading spinner.  \n   6. Web Client injects a success toast component into the DOM with the text **“Thank you! Your message has been sent.”**.  \n   7. The toast appears at the top‑right corner, uses ARIA role `alert`, and is styled with a green background and white text.  \n   8. The toast remains visible for 5 seconds, then fades out over 0.5 seconds and is removed from the DOM.  \n   9. Web Client clears all input fields in the contact form.  \n\n6. Alternate Flows  \n   **A1 – Server returns non‑200 status**  \n   1. Steps 1‑4 of the Main Flow execute.  \n   2. Backend responds with HTTP 4xx/5xx and a JSON body `{ \"status\": \"error\", \"errorMessage\": \"…\"} `.  \n   3. Web Client displays an error toast with the returned `errorMessage` instead of the success toast.  \n   4. Form fields remain populated for user correction.  \n\n   **A2 – Network failure or timeout**  \n   1. Steps 1‑3 of the Main Flow execute.  \n   2. The `fetch` promise rejects or times out after 10 seconds.  \n   3. Web Client displays an error toast: **“Unable to send your message. Please check your connection and try again.”**  \n   4. Form fields remain populated.  \n\n   **A3 – Duplicate rapid submissions**  \n   1. Visitor clicks **Submit** multiple times before the button is disabled.  \n   2. Web Client detects that a request is already in flight (internal flag `isSubmitting`).  \n   3. Subsequent clicks are ignored until the flag is cleared after step 5 of the Main Flow.  \n\n7. Postconditions  \n   - The UI shows a transient success toast confirming receipt.  \n   - All form inputs are cleared.  \n   - No pending network requests remain (`isSubmitting` flag = false).  \n   - Backend has persisted the inquiry and returned a unique `messageId`.  \n\n8. Data Impact  \n   - No new client‑side data is persisted beyond the transient toast.  \n   - Backend creates a new record in the `inquiries` table (outside the scope of this feature).  \n   - The client logs the `messageId` to the browser console for debugging (optional).  \n\n9. UI Impact  \n   - Add a reusable toast component (`<div class=\"toast success\" role=\"alert\">…</div>`).  \n   - Ensure the toast is responsive: width ≤ 90 % of viewport, max‑width 300 px, positioned 1 rem from the top and right edges.  \n   - Include CSS transitions for fade‑in (0.3 s) and fade‑out (0.5 s).  \n   - Update the **Submit** button style to indicate disabled state (`opacity:0.5; cursor:not-allowed`).  \n\n10. Acceptance Criteria  \n   - AC‑1: When the backend returns HTTP 200 with `{ \"status\":\"success\" }`, the success toast appears within 300 ms of the response.  \n   - AC‑2: The toast text exactly matches “Thank you! Your message has been sent.” and uses the green (`#28a745`) background with white (`#ffffff`) text.  \n   - AC‑3: The toast remains visible for 5 seconds, then fades out over 0.5 seconds and is removed from the DOM.  \n   - AC‑4: After the toast disappears, all form fields are empty and the **Submit** button is enabled.  \n   - AC‑5: The toast component has `role=\"alert\"` and is announced by screen readers.  \n   - AC‑6: In case of a non‑200 response or network error, an error toast is shown instead, and form fields retain their values.  \n   - AC‑7: Rapid double‑clicks on **Submit** do not produce multiple network requests or multiple toasts.  \n   - AC‑8: The feature works on the latest versions of Chrome, Firefox, Safari, and Edge on both desktop and mobile viewports.\n\n### F-09: Basic SEO Meta Tags\n\n1. Purpose\nTo ensure the bookstore landing page is correctly indexed by search engines and renders responsively on all devices by including a minimal, standardized set of meta tags within the HTML document's head section.\n\n2. Actors\n- Developer: Implements the meta tags in the HTML template.\n- Search Engine Crawlers (e.g., Googlebot): Consume the meta tags for indexing and SERP display.\n- Web Browsers: Utilize the viewport meta tag for responsive rendering.\n\n3. Trigger\nThe HTML document is generated and served in response to a user's HTTP request for the landing page.\n\n4. Preconditions\n- The static HTML file structure for the landing page (e.g., `index.html`) exists.\n- The developer has defined the official bookstore name and a concise, accurate description of its services and location.\n- The page will be served with the `text/html` MIME type.\n- The design requires a mobile-first, responsive layout.\n\n5. Main Flow\n1. Open the primary HTML template file (e.g., `index.html`) in a code editor.\n2. Locate the `<head>` section of the document.\n3. Insert the charset declaration as the first meta tag: `<meta charset=\"UTF-8\">`.\n4. Directly after the charset tag, insert the viewport meta tag for responsive design: `<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">`.\n5. Insert the `<title>` tag immediately after the viewport tag. The content must follow the format: `[Bookstore Name] | [City/Neighborhood]` (e.g., \"Bücherparadies | Berlin Mitte\"). Ensure the total character count is between 30 and 60.\n6. Insert the description meta tag: `<meta name=\"description\" content=\"[A single sentence summarizing the bookstore's specialty, atmosphere, and location.]\">`. Ensure the content is between 70 and 160 characters.\n7. Save the HTML file.\n8. Deploy the updated file to the web server's document root.\n\n6. Alternate Flows\n- A1: If the provided title or description content exceeds the recommended character limits, the developer shall truncate the text at the nearest word boundary within the limit and append an ellipsis (\"...\"). A warning shall be logged for content review.\n- A2: If the HTML template uses a server-side includes (SSI) or templating engine for the head section, the developer shall place the meta tags within the appropriate head include file or template block instead of the static file.\n- A3: During validation, if the `viewport` tag's `content` attribute is found to be missing `initial-scale=1.0`, the developer shall correct it to the exact required value to ensure proper mobile rendering.\n\n7. Postconditions\n- The `<head>` section of the deployed `index.html` contains exactly the four essential meta tags (`charset`, `viewport`, `title`, `description`) in the specified order.\n- The page source is valid HTML5.\n- Search engine crawlers can parse the title and description for indexing.\n- Web browsers apply the responsive viewport settings, allowing the page to scale correctly on mobile devices.\n- No console warnings or errors related to meta tags appear in browser developer tools.\n\n8. Data Impact\n- **Static Content**: The HTML template file (`index.html` or equivalent head template) is modified. No database tables, API endpoints, or user-generated content are affected.\n- **Configuration**: No new configuration files are created. The meta tag values are hardcoded based on the predefined bookstore name and description.\n\n9. UI Impact\n- **Indirect UI Impact**: The `title` tag content appears in the browser tab/window title. The `description` meta tag is frequently used by search engines as the snippet in search results (SERP). Neither affects the visual layout of the landing page itself.\n- **Functional UI Impact**: The `viewport` meta tag is critical for the responsive CSS to function correctly across different screen sizes, ensuring the Hero, opening hours, and contact form are usable on mobile devices.\n\n10. Acceptance Criteria\n- **AC1:** The page source (`Ctrl+U` in browser) contains `<meta charset=\"UTF-8\">` as the first element inside `<head>`.\n- **AC2:** The page source contains `<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">` immediately following the charset tag.\n- **AC3:** The page source contains a `<title>` tag with content matching the pattern `[Bookstore Name] | [Location]`, with a length between 30 and 60 characters.\n- **AC4:** The page source contains a `<meta name=\"description\"` tag with a `content` attribute value between 70 and 160 characters that accurately describes the store.\n- **AC5:** Running the HTML through the W3C Markup Validation Service (https://validator.w3.org/) returns no errors related to the `<title>`, `<meta charset>`, `<meta name=\"viewport\">`, or `<meta name=\"description\">` tags.\n- **AC6:** The page passes Google's Mobile-Friendly Test (https://search.google.com/test/mobile-friendly) with no viewport-related errors.\n- **AC7:** The bookstore name in the `<title>` tag exactly matches the official brand name provided in the project brief.\n\n### F-10: Favicon Inclusion\n\n1. Purpose\nTo provide a small, recognizable icon (favicon) that appears in browser tabs, bookmark lists, and history entries, enhancing brand recognition for the bookstore and improving user orientation when multiple tabs are open.\n\n2. Actors\n- Developer: Implements the favicon asset and HTML reference.\n- End User's Browser: Requests, caches, and displays the favicon.\n- End User: Sees the favicon in the browser UI.\n\n3. Trigger\nThe browser renders the bookstore's landing page (`index.html`) and parses the `<head>` section for icon definitions.\n\n4. Preconditions\n- A suitable icon file (e.g., `favicon.ico`) has been created and is available in the project's asset directory (e.g., `/assets/icons/`).\n- The developer has edit access to the `index.html` file.\n\n5. Main Flow\n1. The developer creates or obtains a square icon graphic representing the bookstore's brand.\n2. The developer converts the graphic to the `.ico` format, embedding multiple resolutions (e.g., 16x16, 32x32, 48x48 pixels) within the single file for broad browser compatibility.\n3. The developer saves the file as `favicon.ico` and places it in the designated assets directory (e.g., `/assets/icons/`).\n4. The developer opens the `index.html` file and locates the `<head>` section.\n5. The developer inserts the following HTML link tag within `<head>`:\n   `<link rel=\"icon\" href=\"/assets/icons/favicon.ico\" type=\"image/x-icon\">`\n6. The developer optionally adds a PNG fallback for modern browsers by inserting a second tag:\n   `<link rel=\"icon\" href=\"/assets/icons/favicon.png\" type=\"image/png\">`\n   (with a corresponding 32x32px PNG file in the same location).\n7. The developer saves `index.html` and deploys both the HTML file and the icon asset(s) to the web server.\n8. The developer tests by loading the page in a browser and confirming the icon appears in the tab.\n\n6. Alternate Flows\n- A1: Missing Favicon File. If the browser requests `/assets/icons/favicon.ico` and receives a 404 response, it will typically display a generic browser default icon. The developer must verify the file path and deployment.\n- A2: Incorrect MIME Type. If the server serves the `.ico` file with an incorrect `Content-Type` header (e.g., `text/plain`), some browsers may ignore it. The developer must configure the server to serve `.ico` files with `image/x-icon`.\n- A3: Browser Cache. After deployment, the developer's browser may still show the old icon due to caching. The developer must perform a hard refresh (Ctrl+F5) or clear the browser cache to see the updated favicon.\n\n7. Postconditions\n- The `favicon.ico` (and optional `favicon.png`) file exists in the specified directory on the web server.\n- The `index.html` file contains the correct `<link rel=\"icon\">` tag(s) in its `<head>` section.\n- When a user loads the landing page, the browser displays the bookstore's custom icon in the tab, bookmark list, and history.\n\n8. Data Impact\n- **No Database Changes:** This feature involves only static asset files and HTML markup. No database schema or data records are created, modified, or deleted.\n- **Static Assets:** Two new static files are added to the project repository and deployment package: `favicon.ico` and optionally `favicon.png`.\n\n9. UI Impact\n- **Browser Tab/Window:** A small (typically 16x16px) icon appears to the left of the page title in the browser tab.\n- **Bookmarks/Favorites:** The custom icon is displayed next to the bookmarked page title in the browser's bookmark manager.\n- **Browser History:** The icon may appear next to the page entry in the browser's history list.\n\n10. Acceptance Criteria\n- AC1: A valid `favicon.ico` file containing at least a 16x16px and 32x32px image is present at the path `/assets/icons/favicon.ico` on the deployed server.\n- AC2: The `index.html` file contains a `<link rel=\"icon\" href=\"/assets/icons/favicon.ico\" type=\"image/x-icon\">` tag within the `<head>` section.\n- AC3: Upon loading the live page in Google Chrome (latest), Mozilla Firefox (latest), and Safari (latest), the custom icon is visibly displayed in the browser tab.\n- AC4: When bookmarking the page in the same browsers, the custom icon is displayed in the bookmark/favorites entry.\n- AC5: No console errors related to favicon fetching (404, MIME type) appear in the browser's developer tools when loading the page.\n\n### F-11: Anchor‑Based Page Navigation\n\n1. Purpose\nTo enable users to navigate between distinct sections of the single-page website (Hero, Opening Hours, Contact) via clickable anchor links, using a smooth scrolling animation for an improved user experience.\n\n2. Actors\nPrimary Actor: Visitor (end-user)\nSecondary Actor: Web Browser (client-side JavaScript engine)\n\n3. Trigger\nThe visitor clicks on an anchor link (`<a href=\"#target-id\">`) in the primary navigation menu or a call-to-action button within the Hero section.\n\n4. Preconditions\n*   The HTML document contains at least two target sections (e.g., `<section id=\"oeffnungszeiten\">`, `<section id=\"kontakt\">`).\n*   The navigation menu and/or CTA button contain anchor links with `href` attributes matching the `id` of these target sections (e.g., `href=\"#kontakt\"`).\n*   The visitor's web browser has JavaScript enabled.\n\n5. Main Flow\n1.  The visitor clicks an anchor link element (e.g., `<a href=\"#oeffnungszeiten\">`).\n2.  The browser's default jump-to-anchor behavior is intercepted by a registered JavaScript event listener (`click` event).\n3.  The event listener's `preventDefault()` method is called to stop the browser's instant, discontinuous jump.\n4.  The script identifies the target element by selecting the DOM element with the `id` matching the link's `href` fragment (e.g., `document.getElementById('oeffnungszeiten')`).\n5.  The script calculates the vertical scroll position: `targetElement.offsetTop`.\n6.  The `window.scrollTo()` method is invoked with options: `{ top: calculatedPosition, behavior: 'smooth' }`.\n7.  The browser animates the scroll over a default duration (typically 300-500ms), moving the viewport smoothly until the top of the target section aligns with the top of the viewport.\n8.  The URL in the address bar is updated to include the fragment identifier (e.g., `.../index.html#oeffnungszeiten`) without triggering a page reload.\n\n6. Alternate Flows\n*   **A1: Target Element Does Not Exist.** If `document.getElementById()` returns `null`, the script logs an error to the console and does nothing. The browser performs its default action (no jump, URL hash updates).\n*   **A2: Fixed Header Offset.** If a fixed-position header obscures the target section upon scroll completion, the script calculates an offset (e.g., `targetElement.offsetTop - headerHeight`) and scrolls to that adjusted position.\n*   **A3: JavaScript Disabled.** If JavaScript is disabled, the browser's native anchor-jump behavior occurs (instant, discontinuous scroll to the element). The URL hash still updates.\n\n7. Postconditions\n*   The viewport is scrolled such that the target section's top edge is at (or near, considering any offset) the top of the visible viewport.\n*   The browser's address bar URL contains the correct fragment identifier corresponding to the navigated section.\n*   The page's overall state (data, forms) remains unchanged; only the scroll position is altered.\n\n8. Data Impact\nNo persistent data is created, read, updated, or deleted. All operations are transient and client-side only.\n\n9. UI Impact\n*   **CSS:** The `html` element should have `scroll-behavior: smooth;` defined as a progressive enhancement fallback for browsers with native smooth scroll support.\n*   **JavaScript:** A script must be included that attaches `click` event listeners to all anchor links with fragment-only `href` values (e.g., `href=\"#...\"`).\n*   **Visual Feedback (Optional):** The active navigation link corresponding to the currently visible section may be highlighted via a CSS class (e.g., `.active`), typically managed by a `IntersectionObserver` monitoring section visibility.\n\n10. Acceptance Criteria\n*   **AC1:** Clicking a navigation link smoothly scrolls the page to the correct target section within 2 seconds on a standard desktop viewport.\n*   **AC2:** After the scroll completes, the URL in the address bar correctly displays the fragment identifier (hash) of the target section.\n*   **AC3:** If a fixed header exists, the target section's heading/content is not hidden behind it after the scroll completes.\n*   **AC4:** The feature works on all modern browsers (Chrome, Firefox, Safari, Edge) and provides a basic instant-jump fallback on older browsers without smooth scroll support.\n*   **AC5:** Clicking an anchor link with an invalid/non-existent `href` fragment (e.g., `#invalid`) does not break the page; the browser's default behavior (URL hash update only) occurs without error.\n\n### F-12: Brand‑Consistent CSS Styling\n\n1. Purpose\nTo define and apply a unified visual identity across the entire bookstore landing page by enforcing specific colors, typography, and spacing rules. This ensures all UI components (Hero, Opening Hours, Contact Form) present a professional, cohesive brand experience.\n\n2. Actors\nWeb Browser (rendering engine).\n\n3. Trigger\nA user navigates to the bookstore’s landing page URL, causing the browser to request and render the HTML document.\n\n4. Preconditions\n- The HTML document contains a `<link>` tag referencing the brand CSS file at a known path (e.g., `/css/brand.css`).\n- The brand CSS file exists on the server and is accessible via the referenced path.\n- The HTML structure includes elements with class names or IDs that the CSS selectors target (e.g., `.hero`, `.opening-hours`, `.contact-form`).\n\n5. Main Flow\n1. The browser requests the landing page’s HTML document from the server.\n2. The browser parses the HTML and encounters the `<link rel=\"stylesheet\" href=\"/css/brand.css\">` tag.\n3. The browser initiates a separate HTTP request to fetch the `brand.css` file.\n4. The server responds with the CSS file containing brand rules (e.g., `:root` variables, class selectors).\n5. The browser parces the CSS, builds the CSS Object Model (CSSOM), and matches selectors to DOM elements.\n6. The browser computes final styles for each element, applying:\n   - Color values from CSS custom properties (e.g., `--color-primary: #2E5AAC`).\n   - Font family and size stacks (e.g., `font-family: 'Open Sans', sans-serif`).\n   - Spacing declarations (e.g., `margin: var(--spacing-md) 0;`).\n7. The browser paints the page, rendering all elements with the computed brand styles.\n\n6. Alternate Flows\n- A1: CSS file returns HTTP 404 (Not Found). The browser proceeds without external styles, rendering elements with browser default styles (User Agent Stylesheet). The page appears unstyled and inconsistent.\n- A2: CSS file contains a syntax error (e.g., missing closing brace). The browser ignores the malformed rule set but applies all preceding and subsequent valid rules. Partial styling is applied, potentially leaving some elements unstyled.\n- A3: User’s browser does not support CSS custom properties (e.g., IE11). The browser falls back to static values defined in fallback declarations (e.g., `color: #2E5AAC;` before `color: var(--color-primary);`). Brand consistency is maintained for supported properties.\n\n7. Postconditions\n- All visible elements within the Hero, Opening Hours, and Contact Form sections adhere to the defined brand style guide.\n- No element displays with browser default styling unless explicitly intended as a fallback.\n- The visual hierarchy (color contrast, font sizing, whitespace) matches the design specifications.\n\n8. Data Impact\n- None. The feature does not read, store, or modify any application data.\n- The CSS file may be cached by the browser or intermediate proxies, but no dynamic data is involved.\n\n9. UI Impact\n- The Hero section background uses the primary brand color (`#2E5AAC`), and its headline uses the primary heading font (`'Merriweather', serif`) at `2.5rem`.\n- Opening Hours table rows have consistent vertical padding (`1rem`) and use the secondary text color (`#4A4A4A`).\n- Contact form inputs share identical border styling (`1px solid #CCCCCC`), border radius (`4px`), and internal padding (`0.75rem`).\n- All body text uses the brand’s primary font (`'Open Sans', sans-serif`) at `1rem` with line height `1.6`.\n- Spacing between major sections follows a standardized scale (e.g., `--spacing-lg: 2rem;` applied as `margin-bottom`).\n\n10. Acceptance Criteria\n- AC1: The primary brand color (`#2E5AAC`) is correctly applied to all buttons, primary links, and the Hero background.\n- AC2: The font stack loads `'Open Sans'` for body text and `'Merriweather'` for all `h1`–`h6` elements, with fallbacks to system fonts.\n- AC3: The vertical spacing between the Hero, Opening Hours, and Contact Form sections equals exactly `2rem` (32px) on all viewport widths.\n- AC4: Contact form input fields have a consistent `border: 1px solid #CCCCCC`, `border-radius: 4px`, and `padding: 0.75rem 1rem`.\n- AC5: At the mobile breakpoint (`max-width: 768px`), font sizes reduce by `10%` and horizontal margins adjust to `1rem` while maintaining color and font family consistency.\n\n### F-13: Accessibility ARIA Labels for Form Elements\n\n1. Purpose\nTo ensure the contact form is fully perceivable, operable, and understandable for users of assistive technologies (e.g., screen readers) by providing programmatically determinable names, descriptions, and states for all form controls.\n\n2. Actors\nEnd-users utilizing assistive technologies such as screen readers (NVDA, JAWS, VoiceOver), screen magnifiers, or voice control software.\n\n3. Trigger\nThe landing page containing the contact form is rendered in the browser, or a user navigates to or activates a form control.\n\n4. Preconditions\nThe contact form HTML structure exists with input fields (text, email, textarea) and a submit button, as defined by the base feature. The form fields have associated visible text labels or placeholder text.\n\n5. Main Flow\n1.  Identify all interactive form elements within the contact form: `<input>` (text, email), `<textarea>`, and `<button>`.\n2.  For each `<input>` and `<textarea>`:\n    a.  If a visible `<label>` element exists and is correctly associated via the `for` attribute matching the element's `id`, no further action is required for the accessible name.\n    b.  If no visible `<label>` exists (e.g., placeholder-only), add an `aria-label` attribute with a concise, descriptive label (e.g., `aria-label=\"Your Message\"` for the message textarea).\n    c.  If additional instructions or hints exist (e.g., \"We'll respond within 24 hours\"), ensure the form control has an `aria-describedby` attribute referencing the `id` of the instruction element.\n3.  For required fields, add the `aria-required=\"true\"` attribute to the corresponding `<input>` or `<textarea>`.\n4.  For the submit `<button>`:\n    a.  Ensure the button text content provides an accessible name (e.g., \"Send Inquiry\").\n    b.  If the button uses only an icon, add an `aria-label` (e.g., `aria-label=\"Submit Inquiry\"`).\n5.  Implement an `aria-live=\"polite\"` region (e.g., a `<div>` with `role=\"status\"` or `aria-live=\"polite\"`) to announce form submission success or validation error messages. Associate this region with relevant form controls using `aria-describedby` when errors are present.\n6.  Perform manual testing with a screen reader to verify each form control is announced with its correct label, state (required), and any associated instructions or error messages.\n\n6. Alternate Flows\n1.  **Dynamic Error Announcement:** If a user submits the form with invalid data, the system generates inline error messages. The `aria-live` region must be updated to announce the first error. The erroneous field must have `aria-invalid=\"true\"` set and its `aria-describedby` updated to reference the specific error message element's `id`.\n2.  **Conditionally Revealed Fields:** If a form field (e.g., \"Phone Number\") is conditionally shown based on a user selection, the field must be added to the Accessibility Tree with its `aria-label` and `aria-required` (if applicable) upon being made visible. When hidden, it should be removed from the Accessibility Tree (e.g., via `aria-hidden=\"true\"` or `display: none`).\n\n7. Postconditions\nAll contact form controls have a programmatically determinable name and state. Validation and status messages are announced by assistive technologies. The contact form conforms to WCAG 2.1 Level AA Success Criteria 1.3.1 (Info and Relationships) and 4.1.2 (Name, Role, Value).\n\n8. Data Impact\nNo impact on form submission data payload or backend processing. The added ARIA attributes are purely presentational for assistive technologies and do not alter the data sent to the server.\n\n9. UI Impact\nNo visual changes to the user interface. All modifications are limited to the HTML attribute layer (`aria-label`, `aria-required`, `aria-describedby`, `aria-live`, `aria-invalid`, `role`). The visual layout, styling, and visible text remain unchanged.\n\n10. Acceptance Criteria\n*   **AC1:** Every text input and textarea in the contact form can be focused and its purpose is announced correctly by a screen reader (e.g., \"Name, edit text\").\n*   **AC2:** Required fields are announced as required (e.g., \"Email, required, edit text\").\n*   **AC3:** Any helper text associated with a field (e.g., \"Max 500 characters\") is announced after the field's label when the field receives focus.\n*   **AC4:** Upon form submission with validation errors, the first error is announced automatically from the `aria-live` region, and the erroneous field's state is announced as invalid when focused.\n*   **AC5:** The form passes an automated accessibility audit (using tools like WAVE, axe, or Lighthouse) with no critical violations related to form labels or inputs for the contact form section.\n\n### F-14: Image Optimization for Fast Load\n\n1. Purpose\nTo minimize the hero background image's file size and improve page load performance by compressing the source image and serving it in modern, web-optimized formats (primarily WebP) with appropriate fallbacks for browsers that lack support.\n\n2. Actors\n- Frontend build process (e.g., a task runner like Gulp or a static site generator plugin)\n- Web browser (client)\n- Content Delivery Network (CDN) or web server (for cache control)\n\n3. Trigger\nA user's browser requests the homepage (`/`), triggering the HTML response which includes a reference to the hero background image.\n\n4. Preconditions\n- A source hero image file (e.g., `hero-original.jpg` or `hero-original.png`) exists in the project's assets directory.\n- The build/deployment pipeline includes an image optimization tool (e.g., `imagemin`, `sharp`, or Squoosh CLI) configured for compression and format conversion.\n- The HTML template for the homepage contains a placeholder for the hero background image (e.g., a CSS `background-image` declaration or an `<img>`/`<picture>` element).\n\n5. Main Flow\n1. During the build process, the optimization tool locates the source hero image file.\n2. The tool applies lossy or lossless compression to the source image, targeting a quality setting (e.g., 75-85%) that balances visual fidelity and file size reduction.\n3. The compressed image is converted to the WebP format.\n4. The tool generates multiple resolution variants of the WebP image (e.g., `hero-1x.webp`, `hero-2x.webp`) to support responsive design and high-DPI displays.\n5. For browsers without WebP support, the tool generates fallback images in widely supported formats (JPEG for photographic content, PNG for graphics with transparency) at the same resolutions.\n6. The build process updates the homepage HTML/CSS to reference the optimized assets. This typically involves:\n   - Replacing a single `background-image: url(...)` in CSS with a `@media`-based swap or, preferably,\n   - Modifying the HTML to use a `<picture>` element with `<source type=\"image/webp\" srcset=\"...\">` and a fallback `<img src=\"hero-fallback.jpg\">`.\n7. The optimized image files (`.webp`, `.jpg`/`.png`) are copied to the final `dist/` or `public/` output directory.\n8. The web server or CDN is configured to serve these optimized files with long-term caching headers (e.g., `Cache-Control: max-age=31536000`).\n\n6. Alternate Flows\n- **A1: Image Optimization Tool Failure**: If the compression/conversion step fails (e.g., due to corrupt source file or tool error), the build logs a warning and copies the original source image to the output directory without modification. The HTML/CSS continues to reference this original file, ensuring the page remains functional but unoptimized.\n- **A2: Browser Without WebP or JPEG Support**: A very old browser that supports neither WebP nor standard JPEG/PNG. The `<picture>` element's fallback `<img>` with a supported format (e.g., PNG) will be displayed. If all formats fail, the browser's default broken image icon appears.\n- **A3: Low-Bandwidth Connection with Data Saver**: The user's browser or OS enables a data-saving mode that may ignore high-resolution sources. The `srcset` attribute with width descriptors (`w`) or pixel density descriptors (`x`) allows the browser to select the smallest appropriate variant automatically.\n\n7. Postconditions\n- The homepage's hero section displays an image that is visually comparable to the original but has a significantly smaller file size (typically 25-50% of the original).\n- The HTML/CSS of the deployed homepage references the newly generated, optimized image assets (`.webp` and fallback files).\n- The web server/CDN serves the correct image format (WebP or fallback) based on the `Accept` request header from the browser.\n- Overall page load time, particularly the Largest Contentful Paint (LCP) metric, is improved.\n\n8. Data Impact\n- **New/Modified Files**: Optimized hero image files (e.g., `hero-1x.webp`, `hero-2x.webp`, `hero-1x.jpg`) are added to the deployed asset directory.\n- **Modified Files**: The homepage HTML template and/or associated CSS file are updated to point to the new asset paths and formats.\n- **Configuration**: The project's build configuration (e.g., `gulpfile.js`, `webpack.config.js`, or `astro.config.mjs`) is updated to include the image optimization task for the hero image.\n- **Cache Metadata**: HTTP cache headers for image assets are set to a long duration (e.g., 1 year) with a fingerprinted filename strategy (e.g., `hero.abc123.webp`) to enable immutable caching. If fingerprinting is not used, cache headers must still be configured for long-term caching with versioning via query strings or directory changes.\n\n9. UI Impact\n- The visual appearance of the hero section remains identical to the design specification.\n- The image loads perceptibly faster, especially on slower network connections, reducing layout shift and improving the user's first impression.\n- No interactive elements are added or changed; the impact is purely on performance and rendering speed.\n\n10. Acceptance Criteria\n- **AC1**: The final deployed hero image file size (WebP version) is at least 60% smaller than the original source file, while maintaining a Structural Similarity Index (SSIM) of >0.95 or comparable visual quality in manual review.\n- **AC2**: A browser that supports WebP (e.g., Chrome, Firefox 65+, Edge 18+) receives the WebP image as evidenced by the Network tab in DevTools showing a `.webp` file.\n- **AC3**: A browser that does *not* support WebP (e.g., Safari < 14, older versions of IE) receives the fallback JPEG/PNG image as evidenced by the Network tab.\n- **AC4**: The `picture` element or CSS `image-set` correctly switches between 1x and 2x (or other) variants when the browser's device pixel ratio changes or the window is resized (for responsive widths).\n- **AC5**: Running Google Lighthouse (or WebPageTest) on the deployed homepage shows an improvement in the \"Properly size images\" and \"Efficiently encode images\" audits, and the LCP metric is below 2.5 seconds on a simulated 3G connection.\n- **AC6**: The build process completes successfully with the optimization step, and the optimized assets are present in the deployment package.\n\n### F-15: Cross‑Browser Compatibility Polyfills\n\n1. Purpose\nTo guarantee that the core interactive features of the bookstore landing page—specifically the contact form submission and responsive layout—function correctly in browsers with incomplete support for modern web standards (e.g., Internet Explorer 11, older mobile browsers). This feature does not enhance functionality for modern browsers.\n\n2. Actors\n*   End User: A visitor accessing the landing page with an older browser.\n*   Frontend Build System: The toolchain (e.g., Webpack, Vite, or a simple script) responsible for injecting polyfill scripts into the final HTML.\n\n3. Trigger\nThe browser begins parsing and executing the landing page's HTML, CSS, and JavaScript.\n\n4. Preconditions\n*   The core landing page code (HTML, CSS, JS) is written using modern standards (ES6+, CSS Grid/Flexbox, Fetch API, CSS Custom Properties).\n*   A build process or static HTML generation step is configured to include polyfill logic.\n*   Polyfill libraries (e.g., `core-js`, `whatwg-fetch`, `css-vars-ponyfill`) are available via a CDN or local assets.\n\n5. Main Flow\n1.  The browser loads the initial HTML document.\n2.  The build-injected script `polyfill-loader.js` executes immediately in the `<head>`.\n3.  `polyfill-loader.js` performs feature detection for the following critical APIs:\n    *   `Promise` (for async form handling).\n    *   `fetch` (for form submission).\n    *   `CSS.supports('display', 'grid')` (for responsive layout).\n4.  If any detected API is missing or deficient, `polyfill-loader.js` dynamically injects `<script>` tags for the corresponding polyfill libraries from the configured CDN (e.g., unpkg.com or cdnjs) in a specific order:\n    *   `core-js` (for ES6+ features like `Promise`, `Object.assign`, etc.).\n    *   `whatwg-fetch` (for the `fetch` API).\n    *   `css-vars-ponyfill` (for CSS Custom Properties).\n5.  The polyfill scripts load and execute, patching the browser's global environment.\n6.  The main application script `main.js` executes, now able to safely use the modern APIs. The contact form's `submit` event listener is attached, and the responsive CSS grid layout is applied without breaking.\n\n6. Alternate Flows\n*   **A1: Polyfill CDN Unavailable.** If a polyfill script fails to load (network error, CDN down), `polyfill-loader.js` logs a warning to the console. The contact form may fail to submit via AJAX. The page falls back to a non-JavaScript, full-page-reload form submission method if a standard `<form action>` attribute is present as a progressive enhancement fallback.\n*   **A2: Modern Browser.** If all feature detections pass (e.g., Chrome, Firefox, Edge, Safari 10+), `polyfill-loader.js` takes no action and exits. No polyfill scripts are injected, preserving performance.\n*   **A3: Partial Support.** Browser has `Promise` but lacks `fetch`. Only the `whatwg-fetch` polyfill is injected. The form submission logic using `fetch` becomes functional.\n\n7. Postconditions\n*   The contact form's JavaScript-driven submission (preventing default reload, sending data via `fetch`) works in the target older browsers.\n*   The CSS Grid/Flexbox layout renders correctly, and CSS variable-based theming (if used) applies.\n*   No uncaught JavaScript errors related to missing modern APIs appear in the console of tested legacy browsers.\n*   Modern browsers experience zero overhead from polyfill loading.\n\n8. Data Impact\nNone. This feature only affects client-side code delivery and execution. No server-side data structures or storage are modified.\n\n9. UI Impact\nNone. There is no visible change to the user interface. The polyfills operate transparently to ensure existing UI elements (form, layout) behave as designed.\n\n10. Acceptance Criteria\n*   **AC1:** The landing page loads without JavaScript errors in Internet Explorer 11.\n*   **AC2:** In IE11, the contact form successfully sends a test submission via the `fetch`-based AJAX method and displays the success/error message without a full page reload.\n*   **AC3:** The responsive layout (e.g., stacking of hero/content on mobile) renders correctly in IE11 and an Android 4.4 browser.\n*   **AC4:** In a modern browser (e.g., Chrome 120), the Network tab shows ZERO requests for polyfill libraries.\n*   **AC5:** The `polyfill-loader.js` script executes synchronously in the `<head>` before `main.js`.\n\n## Non-Functional Requirements\n\n- Zuverlaessigkeit: Ein iterativer Lauf muss ohne Verlust bereits akzeptierter Features abschliessen.\n- Determinismus: Freeze-Baseline und Feature-IDs bleiben ueber Iterationen stabil.\n- Performance: In Freeze-Mode wird Section-Patching gegenueber Vollregeneration bevorzugt.\n- Beobachtbarkeit: Diagnostics muessen Feature-Anzahl, blockierte Versuche und Integritaetsereignisse ausweisen.\n\n## Error Handling & Recovery\n\n- Ungueltiges oder fehlendes strukturiertes Delta erzwingt einen strikten Fallback auf den vorherigen stabilen PRD-Zustand.\n- Fehler bei Section-Regeneration im Freeze-Mode fallen sicher zurueck, ohne Feature-Verlust.\n- Parse-Fehler gelten nur dann als non-blocking, wenn Integritaet weiterhin garantiert ist.\n- Alle Fallback-Pfade werden mit explizitem Grund und Iterationsnummer protokolliert.\n\n## Deployment & Infrastructure\n\n- Runtime: Node.js-Service mit Endpunkten fuer den iterativen Compiler.\n- Umgebung: Dockerisierte Local/Dev-Ausfuehrung mit reproduzierbarem Build und Health-Endpoint.\n- Abhaengigkeiten: LLM-Provider-Integration mit Model-Fallback-Strategie.\n- Auslieferung: Aenderungen werden mit TypeScript-Check und End-to-End-API-Smoke-Run validiert.\n\n## Definition of Done\n\n- Erforderliche PRD-Sektionen sind vorhanden und nicht leer.\n- Die Feature-Anzahl faellt nicht unter die gefrorene Baseline.\n- Es bleiben keine doppelten Feature-IDs oder doppelten Feature-Namen bestehen.\n- Der iterative Lauf schliesst mit gueltigem finalen PRD und Diagnostics ab.\n\n---\n\n## Feature Delta (JSON)\n```json\n{\n  \"addedFeatures\": [],\n  \"updatedFeatures\": [\n    {\n      \"featureId\": \"F-01\",\n      \"notes\": \"Updated responsive layout to improve performance on mobile devices\"\n    },\n    {\n      \"featureId\": \"F-02\",\n      \"notes\": \"Added accessibility features for screen readers\"\n    },\n    {\n      \"featureId\": \"F-03\",\n      \"notes\": \"Improved form validation and error handling\"\n    },\n    {\n      \"featureId\": \"F-04\",\n      \"notes\": \"Updated operating hours display to use a static JSON file\"\n    },\n    {\n      \"featureId\": \"F-05\",\n      \"notes\": \"Added Google Analytics tracking for page performance and user interactions\"\n    },\n    {\n      \"featureId\": \"F-06\",\n      \"notes\": \"Improved client-side form validation and error handling\"\n    },\n    {\n      \"featureId\": \"F-07\",\n      \"notes\": \"Updated form submission endpoint to use Formspree\"\n    },\n    {\n      \"featureId\": \"F-08\",\n      \"notes\": \"Added success message after form submission\"\n    },\n    {\n      \"featureId\": \"F-09\",\n      \"notes\": \"Updated meta tags for SEO optimization\"\n    },\n    {\n      \"featureId\": \"F-10\",\n      \"notes\": \"Added favicon for browser tab and bookmark\"\n    },\n    {\n      \"featureId\": \"F-11\",\n      \"notes\": \"Improved anchor-based page navigation\"\n    },\n    {\n      \"featureId\": \"F-12\",\n      \"notes\": \"Updated brand-consistent CSS styling\"\n    },\n    {\n      \"featureId\": \"F-13\",\n      \"notes\": \"Added accessibility ARIA labels for form elements\"\n    },\n    {\n      \"featureId\": \"F-14\",\n      \"notes\": \"Optimized hero image for faster load times\"\n    },\n    {\n      \"featureId\": \"F-15\",\n      \"notes\": \"Added cross-browser compatibility polyfills\"\n    }\n  ]\n}\n```",
      "answererOutput": "### Question 1: Identify the top unresolved product scope risk.\n\n**Answer:**\nThe top unresolved product scope risk is the lack of a clear definition of the iterative development process and how it will be managed. The PRD mentions an iterative approach but does not provide detailed guidelines on how features will be prioritized, developed, and tested in each iteration. This ambiguity could lead to scope creep, delays, or misunderstandings among team members.\n\n**Reasoning:**\nA well-defined iterative development process is crucial for managing product scope effectively. It helps ensure that the development team focuses on the most critical features, allocates resources efficiently, and delivers a working product increment at the end of each iteration. Without clear guidelines, the project may struggle with maintaining a consistent pace, ensuring quality, and meeting stakeholder expectations.\n\n**Concrete Implementation:**\nTo mitigate this risk, the PRD should include a section on the iterative development process, outlining:\n- How features will be prioritized (e.g., MoSCoW method, Kano model).\n- The duration of each iteration (e.g., 2-week sprints).\n- The roles and responsibilities of team members during each iteration.\n- The criteria for determining the completion of an iteration and the transition to the next one.\n- The process for handling changes in requirements or scope during an iteration.\n\n**Section to Update:** \"System Vision\" and \"Domain Model\" should be updated to reflect the iterative development approach and its management.\n\n---\n\n### Question 2: Identify the top unresolved UX risk.\n\n**Answer:**\nThe top unresolved UX risk is the potential lack of accessibility features for users with disabilities. While the PRD mentions adding accessibility ARIA labels for form elements (F-13), it does not comprehensively address accessibility across all features and interactions, which could lead to a poor user experience for individuals with disabilities.\n\n**Reasoning:**\nAccessibility is a critical aspect of UX, ensuring that all users can interact with the product effectively. Neglecting accessibility can result in legal issues, negative user experiences, and damage to the brand's reputation. It's essential to consider accessibility from the outset of the design and development process.\n\n**Concrete Implementation:**\nTo address this risk, the PRD should:\n- Include a comprehensive accessibility plan that covers all features and interactions.\n- Specify accessibility standards and guidelines (e.g., WCAG 2.1) that the product must adhere to.\n- Outline the process for conducting accessibility audits and testing.\n- Ensure that accessibility considerations are integrated into the design and development process from the beginning.\n\n**Section to Update:** \"Domain Model\" and \"Functional Feature Catalogue\" should be updated to include detailed accessibility considerations for each feature.\n\n---\n\n### Question 3: Identify the top unresolved data/operational risk.\n\n**Answer:**\nThe top unresolved data/operational risk is the lack of a detailed data storage and management plan. The PRD mentions using Formspree for contact form submissions but does not provide information on how the data will be stored, processed, or protected, which could lead to data breaches or non-compliance with data protection regulations.\n\n**Reasoning:**\nData protection and management are critical operational risks. Failing to properly secure and manage user data can lead to severe consequences, including legal penalties, loss of user trust, and reputational damage. It's essential to have a clear plan for data storage, processing, and protection.\n\n**Concrete Implementation:**\nTo mitigate this risk, the PRD should include a section on data management, outlining:\n- How user data will be collected, stored, and processed.\n- The measures in place for data protection and security (e.g., encryption, access controls).\n- Compliance with relevant data protection regulations (e.g., GDPR, CCPA).\n- The process for handling data breaches or security incidents.\n\n**Section to Update:** \"System Boundaries\" and \"Non-Functional Requirements\" should be updated to include detailed information on data management and protection.\n\n---\n\n### Open Points, Gaps, or Unresolved Areas:\n\n1. **Iterative Development Process:** As mentioned, the PRD lacks a clear definition of the iterative development process. This should be addressed by adding a section that outlines the process, including feature prioritization, iteration duration, roles, and responsibilities.\n\n2. **Accessibility:** While some accessibility features are mentioned, a comprehensive accessibility plan should be included to ensure the product is accessible to all users.\n\n3. **Data Management:** A detailed data storage and management plan should be added to the PRD to ensure user data is properly secured and managed.\n\n4. **Error Handling & Recovery:** The section on error handling and recovery should be expanded to include more specific scenarios and recovery strategies to ensure the system can handle and recover from errors gracefully.\n\n5. **Deployment & Infrastructure:** The deployment and infrastructure section should provide more details on the runtime environment, dependencies, and delivery process to ensure smooth deployment and operation of the system.\n\nBy addressing these open points and gaps, the PRD can provide a more comprehensive and robust foundation for the development of the bookstore landing page, ensuring it meets the required standards for functionality, usability, accessibility, and data protection.",
      "questions": [],
      "mergedPRD": "## System Vision\n\nProvide a clean, responsive single‑page website that instantly informs visitors about the bookstore’s brand, operating hours, and enables them to send inquiries via a contact form. The landing page should encourage foot traffic and build a basic online presence with minimal maintenance.\n\n## System Boundaries\n\n- **Deployment**: Hosted on a static web hosting service (e.g., Netlify, Vercel, or GitHub Pages).  \n- **Runtime**: Pure client‑side HTML/CSS/JavaScript; no server‑side rendering required.  \n- **Online/Offline**: Fully functional online; offline access limited to cached static assets via Service Worker (optional).  \n- **Single‑User**: No authentication; all visitors see the same content.  \n- **Persistence**: Contact form submissions are sent to Formspree – no local data storage.  \n- **Integrations**: Integration with Google Maps for location display, Formspree for contact form submissions, and Google Analytics for tracking page performance and user interactions.\n\n## Domain Model\n\n- Kern-Entitaeten: Nutzer/Besucher, Feature, Anforderung und Iteration.\n- Beziehungen: Eine Anforderung aggregiert Features; jede Iteration verfeinert bestehende Features und kann neue ueber ein strukturiertes Delta hinzufuegen.\n- Datenkonsistenz: Feature-IDs bleiben ueber Iterationen stabil und gelten als unveraenderliche Kennungen.\n- Quellkontext (Iteration 1): Erstelle eine sehr einfache Landingpage fuer einen Buchladen mit Hero, Oeffnungszeiten und Kontaktformular. Halte es kompakt.\n\n## Global Business Rules\n\n- Bestehende Features duerfen waehrend der iterativen Verfeinerung nicht entfernt werden.\n- Neue Features werden nur ueber validiertes Feature-Delta-JSON akzeptiert.\n- Doppelte Features (gleiche Intention/Bezeichnung) werden deterministisch verworfen.\n- Akzeptanzkriterien aller Features muessen testbar und beobachtbar bleiben.\n\n## Functional Feature Catalogue\n\n- Runtime: Node.js-Service mit Endpunkten fuer den iterativen Compiler.\n- Umgebung: Dockerisierte Local/Dev-Ausfuehrung mit reproduzierbarem Build und Health-Endpoint.\n- Abhaengigkeiten: LLM-Provider-Integration mit Model-Fallback-Strategie.\n- Auslieferung: Aenderungen werden mit TypeScript-Check und End-to-End-API-Smoke-Run validiert.\n\n### F-01: Responsive Page Layout\n\n1. Purpose\nTo ensure the bookstore landing page is fully accessible and visually coherent across a defined set of device viewports (mobile, tablet, desktop) by implementing a fluid, breakpoint-driven CSS layout system. This prevents horizontal scrolling, maintains readability, and optimizes navigation and content presentation for each screen size.\n\n2. Actors\nPrimary: End-user accessing the website via a web browser on a device (smartphone, tablet, laptop/desktop).\nSecondary: Web developer maintaining the codebase.\n\n3. Trigger\nThe user agent (browser) requests and begins rendering the `index.html` page.\n\n4. Preconditions\n*   The HTML document structure is complete and includes the necessary semantic container elements (e.g., `<header>`, `<main>`, `<footer>`).\n*   A CSS stylesheet is linked and loaded by the browser.\n*   The viewport meta tag is present in the HTML `<head>`: `<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">`.\n\n5. Main Flow\n1.  The browser parses the HTML and CSS.\n2.  The CSS establishes a base mobile-first layout using relative units (%, `rem`, `vw/vh`) for widths, margins, and font sizes. All primary content containers use `max-width: 100%` to contain content within the viewport.\n3.  The CSS defines three distinct media query breakpoints based on viewport width:\n    *   `@media (min-width: 768px)` for tablet portrait/landscape.\n    *   `@media (min-width: 1024px)` for desktop.\n4.  At the `768px` breakpoint, the layout modifies:\n    *   The main navigation (if present in header) switches from a vertical/hamburger pattern to a horizontal row.\n    *   Multi-column sections (e.g., opening hours and a brief \"about\" blurb) reflow from a single vertical stack to a two-column grid using `display: grid` or `flex-wrap`.\n    *   The Hero section's background image scaling and text container width are adjusted for better proportion.\n5.  At the `1024px` breakpoint, the layout further modifies:\n    *   The overall page container is centered with a fixed `max-width` (e.g., `1200px`) and horizontal `margin: auto`.\n    *   Multi-column sections expand to a three-column grid where content allows.\n    *   The contact form's input fields and textarea are set to a comfortable fixed or percentage-based width within their container.\n6.  The browser continuously evaluates the viewport width during resize events and applies the appropriate breakpoint styles, ensuring a seamless transition between layouts without content overflow or unreadably narrow columns.\n\n6. Alternate Flows\n*   A1: Extremely Narrow Viewport (< 320px). The mobile-first layout may cause text to wrap in an unbalanced way or touch targets to be too small. The system applies the base mobile styles but may trigger a browser-level zoom or horizontal scroll if content (e.g., a long, unbreakable word in the contact form label) exceeds the viewport. **Recovery:** CSS uses `word-wrap: break-word` and `min-width` constraints on interactive elements to mitigate this.\n*   A2: High Pixel Density / Zoomed Viewport. A user on a high-DPI device or using browser zoom may have a CSS viewport width that fluctuates around a breakpoint. The layout may flicker between breakpoint states during resize. **Recovery:** The design uses `rem` units and flexible grids that tolerate small width variations, minimizing visual \"jumps.\"\n*   A3: Disabled JavaScript/CSS. The responsive layout depends entirely on CSS. If CSS is disabled, the page falls back to a single-column, unstyled vertical document flow (default browser behavior), which remains fully functional and readable, albeit not visually optimized.\n\n7. Postconditions\n*   The landing page renders without horizontal scrollbars at all viewport widths from 320px to 1920px.\n*   All text remains readable (minimum font size ~16px on mobile, adjusted appropriately for larger screens) and does not require horizontal scrolling.\n*   Navigation is operable on all device sizes (e.g., touch-friendly targets on mobile, visible links on desktop).\n*   Form inputs and buttons have sufficient size and spacing for touch interaction on mobile devices.\n*   The visual hierarchy (Hero prominence, section separation) is maintained across all breakpoints.\n\n8. Data Impact\n*   No new data is stored or processed by the server or client-side scripts. This feature is purely presentational.\n*   The only \"data\" impacted is the CSS itself, which will increase in file size due to media query rules. Performance impact is negligible for a single, small page.\n\n9. UI Impact\n*   **Mobile (<768px):** Single-column layout. Header navigation condenses (e.g., to a hamburger menu or stacked links). Hero text is large and centered. All sections stack vertically with full-width containers. Form fields stack vertically.\n*   **Tablet (768px-1023px):** Introduction of 2-column grids for content-heavy sections (e.g., \"About\" text next to a small image, opening hours next to a map placeholder). Navigation expands to a horizontal list. Form may use a 2-column layout for label/input pairs if space permits.\n*   **Desktop (≥1024px):** Fixed-width, centered main container (e.g., 1140px). Navigation is fully horizontal. Hero image and text use a balanced side-by-side or overlaid layout. Content sections use up to 3 columns. Form fields may be inline in a single row where logical (e.g., first name / last name).\n\n10. Acceptance Criteria\n*   AC1: Using browser DevTools device mode, the page must render correctly at the following standard widths: 375px (iPhone SE), 768px (iPad), 1024px (iPad Pro), 1440px (standard desktop). No content overflows the viewport width.\n*   AC2: At the 768px breakpoint, the main navigation must change from a vertical stack to a horizontal row. At the 1024px breakpoint, the page content container must be centered with a visible max-width margin.\n*   AC3: All interactive elements (links, buttons, form inputs, submit button) must have a minimum touch target size of 44x44 CSS pixels on mobile viewports.\n*   AC4: The Hero section's call-to-action button must be clearly visible and positioned within the natural reading flow on all viewports.\n*   AC5: The contact form must be fully usable (all fields focusable, labels associated) and submit-able (via standard POST) on the smallest supported viewport (320px).\n\n### F-02: Hero Section with Background Image and Headline\n\n1. Purpose\nTo immediately establish the bookstore's brand identity and create a visually engaging first impression for visitors, encouraging them to explore the site and visit the physical location.\n\n2. Actors\nEnd-user (website visitor).\n\n3. Trigger\nThe browser finishes parsing the initial HTML document and begins rendering the page.\n\n4. Preconditions\nThe background image asset file (e.g., `hero-bg.jpg`) is present in the project's static assets directory and is accessible via the configured asset path. The HTML and CSS files containing the hero section code have been successfully deployed to the web server.\n\n5. Main Flow\n1.  The browser requests the landing page URL (e.g., `/`).\n2.  The server responds with the HTML document.\n3.  The browser parses the HTML and encounters the `<header>` or `<section>` element with a specific ID or class (e.g., `id=\"hero\"`).\n4.  The browser constructs the DOM node for the hero section container `div`.\n5.  The browser applies linked CSS styles to the hero container: `width: 100%`, `min-height: 60vh` (or a fixed pixel value like `400px`), `background-image: url('/assets/hero-bg.jpg')`, `background-size: cover`, `background-position: center`.\n6.  The browser creates a child element (e.g., `div` or `h1`) for the headline text within the hero container.\n7.  The browser applies CSS styles to the headline element: `position: absolute` or `relative`, `top: 50%`, `left: 50%`, `transform: translate(-50%, -50%)`, `color: #ffffff`, `text-align: center`, `font-size: 3rem` (with responsive `clamp()` or media queries), `text-shadow: 0 2px 4px rgba(0,0,0,0.5)`.\n8.  The browser initiates an asynchronous network request for the background image file.\n9.  Upon successful image download, the browser paints the image as the background of the hero container.\n10. The headline text is rendered, centered both horizontally and vertically over the background image.\n\n6. Alternate Flows\n*   **A1: Background image fails to load (404 or network error).**\n    1.  The browser's image load event triggers an error.\n    2.  The CSS `background-image` property fails to resolve.\n    3.  The hero container displays its fallback `background-color` (e.g., `#f0f0f0` or a solid brand color defined in CSS).\n    4.  The headline text remains visible and readable against the solid color background.\n*   **A2: Viewport width is extremely narrow (e.g., < 320px).**\n    1.  The responsive CSS media queries activate.\n    2.  The headline `font-size` is reduced to a minimum readable size (e.g., `1.5rem`).\n    3.  If the headline text is too long, it wraps onto multiple lines within the centered container.\n    4.  The `min-height` of the hero section may be reduced to preserve content visibility without excessive scrolling.\n\n7. Postconditions\nThe hero section is fully rendered and visible in the viewport. The background image is displayed (or the fallback color is shown), and the headline text is centered, styled, and legible. No JavaScript errors related to the hero section are present in the browser console.\n\n8. Data Impact\nNo persistent data is created, read, updated, or deleted by this feature. It consumes static asset files (image, CSS, HTML) from the server.\n\n9. UI Impact\n*   **Layout:** Introduces a full-width (`width: 100%`) block-level element at the top of the page.\n*   **Styling:** Applies a background image with `cover` sizing, ensuring no empty space while potentially cropping the image edges. Uses absolute/relative positioning and CSS transforms for perfect text centering.\n*   **Responsiveness:** Hero section height adjusts via `min-height` and/or media queries. Headline font size scales responsively using `clamp()` or breakpoints. Text remains centered on all screen sizes.\n*   **Accessibility:** The headline text must have a color contrast ratio of at least 4.5:1 against the average background image area. The hero container should have a semantic landmark role (e.g., `<header>` or `role=\"banner\"`).\n\n10. Acceptance Criteria\n*   **AC1:** The hero section occupies the full width of the browser viewport.\n*   **AC2:** The background image covers the entire hero section area without repeating, maintaining its aspect ratio (edges may be cropped).\n*   **AC3:** The headline text is perfectly centered both horizontally and vertically within the hero section.\n*   **AC4:** The headline text is clearly legible against the background image (or fallback color) with sufficient contrast.\n*   **AC5:** The hero section renders correctly on standard desktop (>= 1024px), tablet (768px-1023px), and mobile (< 768px) viewports. Text size and section height adjust appropriately.\n*   **AC6:** If the background image asset is missing, the fallback background color is displayed, and the headline remains fully visible and styled.\n*   **AC7:** The hero section is the first major visual element rendered above the fold on a typical network connection (loads within 2 seconds on a 3G connection simulation).\n\n### F-03: Hero Call‑to‑Action Button\n\n1. Purpose\nTo provide a clear, single-step navigation path from the hero section to the contact form, encouraging user engagement and inquiries.\n\n2. Actors\nAny visitor (end-user) viewing the landing page.\n\n3. Trigger\nThe user clicks the Call‑to‑Action (CTA) button located within the hero section.\n\n4. Preconditions\n- The landing page is fully loaded in the user's browser.\n- The hero section is rendered and visible.\n- The contact form section exists in the DOM with a specific, known target ID (e.g., `#contact-form`).\n- Client-side JavaScript is enabled and executing.\n\n5. Main Flow\n1. User accesses the landing page URL.\n2. The browser renders the complete HTML, including the hero section containing a button element with a specific identifier (e.g., `id=\"hero-cta-button\"`) and visible text (e.g., \"Kontaktieren Sie uns\" or \"Contact Us\").\n3. User positions the pointer over the CTA button and performs a primary click action (e.g., left-click).\n4. The browser's JavaScript event listener, attached to the button's `click` event, intercepts the default action.\n5. The script programmatically locates the target contact form element by its ID (`#contact-form`).\n6. The browser's viewport smoothly scrolls vertically until the top of the target form element aligns with the top of the viewport.\n7. Upon completion of the scroll animation, JavaScript sets the input focus on the first focusable field within the contact form (typically the name or email input field).\n8. The user can immediately begin typing into the focused form field.\n\n6. Alternate Flows\n- A1: Contact Form Element Not Found\n  1. In step 5 of the Main Flow, the script fails to locate an element with the specified target ID.\n  2. The click event is logged to the browser's console as a warning.\n  3. No scrolling occurs. The button's default behavior (if any) is prevented, and the user remains at the current scroll position.\n  4. The user must manually scroll to find the contact form.\n- A2: JavaScript Disabled or Erroneous\n  1. The user's browser has JavaScript disabled, or a critical script error prevents the event listener from functioning.\n  2. The button renders as a standard HTML button or anchor tag.\n  3. If the button is an anchor tag (`<a>`), its `href` attribute may point to the form's ID (e.g., `href=\"#contact-form\"`). The browser performs an instant, non-smooth jump to the form element.\n  4. If the button is a `<button>` without a valid `href` or script, clicking it has no effect; the user remains on the page.\n\n7. Postconditions\n- The page's vertical scroll position is changed such that the contact form section is visible at the top of the viewport.\n- The keyboard focus is programmatically moved to the first input field within the contact form.\n- No data is transmitted to the server, and no persistent client-side state (e.g., cookies, localStorage) is altered by this interaction.\n\n8. Data Impact\nNone. This feature involves no data read, creation, update, or deletion. It is a purely client-side UI interaction.\n\n9. UI Impact\n- **Static UI:** A button is added to the hero section's HTML structure with specific text and an identifier.\n- **Dynamic UI on Click:** The viewport scroll position animates smoothly to the contact form. The visual focus ring (or system focus indicator) appears on the first form input field after scrolling completes.\n\n10. Acceptance Criteria\n- AC1: The hero section contains a visible button element with the identifier `hero-cta-button`.\n- AC2: The button's visible text is a clear call to action (e.g., \"Kontaktformular\" or \"Contact Us\").\n- AC3: Clicking the button initiates a smooth scroll animation (duration ~500-800ms) to the element with ID `contact-form`.\n- AC4: After the scroll finishes, the `focus()` method is called on the first text input, email input, or textarea within the `#contact-form` container.\n- AC5: If the `#contact-form` element does not exist in the DOM, clicking the button does not cause a page jump or error alert; the click event is silently prevented, and the console logs a warning.\n- AC6: The feature works correctly across modern browsers (Chrome, Firefox, Safari, Edge) with JavaScript enabled.\n\n### F-04: Operating Hours Display\n\n### 1. Purpose\nProvide visitors with an immediately visible, accurately formatted block that lists the bookstore’s daily opening and closing times. The block must be readable on all device sizes and accessible to screen‑reader users.\n\n### 2. Actors\n- **Visitor** – any user who loads the landing page.  \n- **System** – the web server / client‑side JavaScript runtime that renders the page.\n\n### 3. Trigger\nThe feature is triggered when the landing page is requested and the DOM is ready for rendering (i.e., after the `DOMContentLoaded` event).\n\n### 4. Preconditions\n1. A JSON file `hours.json` exists at `/data/hours.json` with the structure defined in section 9.  \n2. The web server is configured to serve static assets from the `/data` directory with MIME type `application/json`.  \n3. The HTML template contains a placeholder element `<section id=\"operating-hours\"></section>`.  \n4. The CSS file `styles.css` includes the classes referenced in section 9.\n\n### 5. Main Flow\n1. **Page Load** – Browser loads `index.html` and all linked resources.  \n2. **DOM Ready** – JavaScript registers a listener for `DOMContentLoaded`.  \n3. **Fetch Data** – Listener executes `fetch('/data/hours.json')`.  \n4. **Validate Response** –  \n   a. Verify HTTP status 200.  \n   b. Parse response as JSON.  \n   c. Confirm the JSON object contains a `days` array with exactly 7 entries (Monday‑Sunday).  \n5. **Transform Data** – For each entry, format the time range as `HH:MM – HH:MM` (24‑hour clock). If `closed: true`, replace the time range with the string “Geschlossen”.  \n6. **Generate Markup** – Build a `<ul class=\"hours-list\">` where each `<li>` contains:  \n   - `<span class=\"day-name\">` with the localized weekday name.  \n   - `<span class=\"day-time\">` with the formatted time or “Geschlossen”.  \n7. **Inject Markup** – Replace the innerHTML of `<section id=\"operating-hours\">` with:  \n   ```html\n   <h2 class=\"section-title\">Öffnungszeiten</h2>\n   <ul class=\"hours-list\">…generated items…</ul>\n   ```  \n8. **Apply ARIA** – Add `role=\"region\"` and `aria-labelledby=\"operating-hours-title\"` to the section; set `id=\"operating-hours-title\"` on the `<h2>`.  \n9. **Cache Result** – Store the parsed JSON in `sessionStorage` under key `bookstoreHours` for the duration of the session.  \n10. **Error Handling (Success Path)** – If steps 1‑9 complete without exception, log `Operating hours rendered successfully` to the console.\n\n### 6. Alternate Flows\n**A1 – Fetch Failure (Network or 404)**  \n1. Fetch returns a non‑200 status or throws a network error.  \n2. Skip steps 4‑9.  \n3. Render fallback markup:  \n   ```html\n   <h2 class=\"section-title\">Öffnungszeiten</h2>\n   <p class=\"hours-error\">Öffnungszeiten derzeit nicht verfügbar.</p>\n   ```  \n4. Log error to console with details.\n\n**A2 – Invalid JSON Structure**  \n1. JSON parses but fails validation (missing days, wrong count, missing fields).  \n2. Follow steps A1‑4.\n\n**A3 – Browser Does Not Support `fetch`**  \n1. Detect missing `window.fetch`.  \n2. Load a polyfill script `fetch-polyfill.js` synchronously before step 3.  \n3. Continue with Main Flow after polyfill is loaded.\n\n### 7. Postconditions\n- The DOM contains a fully populated `<section id=\"operating-hours\">` with either the formatted hours list or the fallback error message.  \n- `sessionStorage['bookstoreHours']` holds the validated JSON object for the current session (or is absent if fetch failed).  \n- No uncaught JavaScript exceptions remain after page load.\n\n### 8. Data Impact\n| Operation | Data Store | Read/Write | Description |\n|-----------|------------|------------|-------------|\n| Read      | `/data/hours.json` (static file) | Read | Source of operating‑hour data. |\n| Write     | `sessionStorage['bookstoreHours']` | Write | Cached copy for the session. |\n| Read      | `sessionStorage['bookstoreHours']` (on subsequent loads) | Read | Used to avoid a second network request if present. |\n\n### 9. UI Impact\n- **HTML** – Add `<section id=\"operating-hours\"></section>` to `index.html` within the main content flow, positioned after the hero block.  \n- **CSS** – New classes:  \n  - `.hours-list` – `list-style:none; margin:0; padding:0; display:flex; flex-direction:column;`  \n  - `.day-name` – `font-weight:600; width:120px; display:inline-block;`  \n  - `.day-time` – `color:#555;`  \n  - `.hours-error` – `color:#c00; font-style:italic;`  \n  - Media query `@media (min-width:768px)` to display the list in two columns.  \n- **Accessibility** – `role=\"region\"` and `aria-labelledby` as defined in step 8 of Main Flow.  \n\n### 10. Acceptance Criteria\n1. **Correct Rendering** – All seven weekdays appear in German order (Montag‑Sonntag) with the exact times defined in `hours.json`. Closed days display “Geschlossen”.  \n2. **Responsive Layout** – On screens ≥ 768 px the list displays in two columns; on smaller screens it stacks vertically. Visual regression tests must pass for both breakpoints.  \n3. **Accessibility** – Screen‑reader navigation announces “Öffnungszeiten” as a region title and reads each day‑time pair. Automated aXe test must report no violations.  \n4. **Error Handling** – Simulating a 404 for `hours.json` results in the fallback paragraph “Öffnungszeiten derzeit nicht verfügbar.” displayed, and no JavaScript uncaught errors appear.  \n5. **Caching** – After a successful fetch, a subsequent page reload within the same browser session reads the data from `sessionStorage` (verified via console log).  \n6. **Performance** – The fetch request completes within 200 ms on a standard 3G connection; the total time from `DOMContentLoaded` to fully rendered hours block is ≤ 300 ms.  \n7. **Cross‑Browser** – Feature works in the latest versions of Chrome, Firefox, Safari, and Edge without polyfill; in Internet Explorer 11 the polyfill path is exercised and the block still renders correctly.\n\n### F-05: Contact Form Fields\n\n1. Purpose\nTo collect visitor inquiries (name, email address, and message) via a web form for the bookstore, enabling the business to receive and respond to questions.\n\n2. Actors\nVisitor (end-user of the website).\n\n3. Trigger\nThe visitor actively engages with the contact form by focusing on a field, entering data, or attempting to submit the form.\n\n4. Preconditions\n- The contact form section of the landing page is fully rendered and visible to the visitor.\n- All form fields (Name, Email, Message) are present, empty, and in an interactive state.\n- No previous form submission is in progress.\n\n5. Main Flow\n1. The visitor locates the contact form on the landing page.\n2. The visitor clicks into the \"Name\" input field and types their full name.\n3. The visitor clicks into the \"Email\" input field and types a valid email address.\n4. The visitor clicks into the \"Message\" textarea field and types their inquiry.\n5. The visitor clicks the \"Submit\" button.\n6. The system performs client-side validation on all fields (non-empty, valid email format).\n7. Upon successful validation, the system packages the form data into a structured payload (JSON or form-data).\n8. The system sends an asynchronous HTTP POST request to the predefined backend endpoint (e.g., `/api/contact`).\n9. The system receives a successful HTTP 200/201 response from the backend.\n10. The system clears all input fields and displays a persistent success confirmation message (e.g., \"Thank you! We will contact you soon.\") within the form container.\n\n6. Alternate Flows\n- **A1: Validation Failure (Client-Side)**\n  - At step 6, if any field is empty or the email is invalid, the system highlights the erroneous field(s) with a visual indicator (e.g., red border) and displays an inline, specific error message (e.g., \"Please enter your name\", \"Please enter a valid email address\").\n  - The form submission is halted. The visitor must correct the errors and re-attempt submission (return to step 5).\n- **A2: Backend Submission Failure**\n  - At step 9, if the backend returns an error (e.g., HTTP 500, network timeout), the system does not clear the form.\n  - The system displays a generic, persistent error message within the form container (e.g., \"Sorry, something went wrong. Please try again later.\").\n  - The visitor's entered data remains in the fields for correction and resubmission.\n\n7. Postconditions\n- On successful submission: All form fields are empty. A success message is visibly displayed. The form is in a state ready for a new submission.\n- On failed submission: The form fields retain the visitor's last input. An appropriate error message is visibly displayed.\n\n8. Data Impact\n- **Structured Data Created:** A contact inquiry object containing: `visitor_name` (string), `visitor_email` (string), `message_text` (string), `submission_timestamp` (datetime, generated server-side).\n- **Data Persistence:** The inquiry object is persisted to a designated data store (e.g., database table `contact_inquiries` or a third-party service) by the backend.\n- **Data Flow:** The client-side payload is transmitted via HTTPS to the backend endpoint. No sensitive data is stored client-side post-submission.\n\n9. UI Impact\n- **Form Structure:** Three vertically stacked, labeled input elements: a single-line text input for \"Name\", a single-line email input for \"Email\", and a multi-line textarea for \"Message\".\n- **Labels & Placeholders:** Each field has a persistent, accessible label (`<label>`). The \"Email\" field uses `type=\"email\"` for native browser validation. Placeholder text may be used for guidance (e.g., \"Your full name\").\n- **Submit Button:** A clearly labeled button (e.g., \"Send Message\") with `type=\"submit\"`.\n- **Feedback Areas:** Dedicated, dynamically updated containers for inline field validation errors and a form-level status message (success/error).\n- **Styling:** Consistent with the landing page's design system (typography, spacing, color palette). Interactive states (focus, hover) are defined. Error states use a designated error color.\n\n10. Acceptance Criteria\n- **AC1:** The form must render with exactly three fields: \"Name\" (text input), \"Email\" (email input), and \"Message\" (textarea), and a submit button.\n- **AC2:** Attempting to submit with any empty field must prevent submission and show an inline error message specific to the empty field(s).\n- **AC3:** Entering an invalid email format (e.g., \"test@\") must prevent submission and show the inline error \"Please enter a valid email address.\"\n- **AC4:** Submitting a form with all valid data must clear all fields and display the success message \"Thank you! We will contact you soon.\" within 2 seconds.\n- **AC5:** If the backend request fails (simulated), the form must not clear, and the generic error message must appear.\n- **AC6:** The \"Email\" field must accept and allow valid submission of standard email addresses (e.g., `user@example.com`).\n- **AC7:** All labels must be programmatically associated with their respective input fields using the `for`/`id` attribute pair for accessibility.\n\n### F-06: Client‑Side Form Validation\n\n1. Purpose\nTo ensure that all data entered into the contact form is complete and correctly formatted before submission, preventing unnecessary server requests and providing immediate, clear feedback to the user.\n\n2. Actors\n- End‑user: Fills out the contact form.\n- Frontend System: Executes validation logic and controls form submission.\n\n3. Trigger\nThe user attempts to submit the contact form by clicking the submit button or pressing the Enter key while focused on a form field.\n\n4. Preconditions\n- The contact form is fully rendered in the DOM.\n- Form fields exist with defined attributes: `name` (text input), `email` (email input), `message` (textarea).\n- All fields are marked as `required` in HTML.\n- Client‑side validation JavaScript is loaded and active.\n\n5. Main Flow\n1. User fills in values in the form fields (name, email, message).\n2. User initiates form submission.\n3. System validates each field synchronously against the following rules:\n   - **Name**: Must be non‑empty and ≤ 100 characters.\n   - **Email**: Must be non‑empty and match a standard email regex pattern (RFC 5322 compliant).\n   - **Message**: Must be non‑empty, ≥ 10 characters, and ≤ 1000 characters.\n4. If any field fails validation:\n   a. Add an `aria-invalid=\"true\"` attribute to the field.\n   b. Apply a visual error style (e.g., red border) to the field’s container.\n   c. Insert a specific error message element (`<div class=\"error-message\">`) below the field with text describing the exact failure.\n   d. Set focus to the first invalid field.\n   e. Halt the submission process (prevent default form submission event).\n5. If all fields pass validation:\n   a. Remove all existing error styles and messages from all fields.\n   b. Allow the form submission event to proceed normally (HTTP POST to the server endpoint).\n\n6. Alternate Flows\n- **A1: Real‑time validation on blur**\n  - When a user leaves a field (blur event), the system validates that single field.\n  - If invalid, immediately shows the error message and styling; if valid, clears any existing error for that field.\n  - This occurs independently of the main submit flow.\n- **A2: User corrects an error after initial failed submission**\n  - After errors are displayed, the user amends one or more fields.\n  - User attempts submission again.\n  - System re‑validates all fields (Main Flow steps 3–5) and either blocks submission with updated errors or allows it if all are now valid.\n- **A3: Submission with empty form**\n  - User clicks submit with all fields empty.\n  - System validates each required field, marks all as invalid, displays \"This field is required\" for each, and focuses the first field (name).\n\n7. Postconditions\n- **Invalid submission**: The form remains visible on the page. All invalid fields have persistent error UI (styling, ARIA attributes, error message text). No HTTP request is sent to the server. Form data is not cleared.\n- **Valid submission**: The form submission event is not intercepted by validation code. The browser proceeds with the native form submission (or JavaScript‑handled fetch) to the configured server endpoint. All error UI is removed from the form fields.\n\n8. Data Impact\n- No data is stored or modified on the client beyond temporary UI state.\n- Validation rules (regex patterns, length limits) are hard‑coded in the frontend JavaScript bundle.\n- Invalid input never leaves the client; only validated data is eligible for transmission.\n\n9. UI Impact\n- Each form field container gains/loses an `error` CSS class for styling (e.g., `border-color: #dc3545`).\n- Each field has an adjacent `<div class=\"error-message\" role=\"alert\" aria-live=\"polite\">` that becomes visible with text when invalid, hidden when valid.\n- The submit button remains enabled at all times; validation does not disable it but prevents submission on invalid data.\n- Focus management programmatically moves to the first invalid field upon failed submission.\n- All error messages are concise, specific, and in German (e.g., \"Bitte geben Sie Ihren Namen ein.\", \"Ungültige E‑Mail‑Adresse.\").\n\n10. Acceptance Criteria\n1. **Name field**:\n   - Empty → error \"Bitte geben Sie Ihren Namen ein.\" shown.\n   - > 100 characters → error \"Der Name darf maximal 100 Zeichen haben.\" shown.\n2. **Email field**:\n   - Empty → error \"Bitte geben Sie Ihre E‑Mail‑Adresse ein.\" shown.\n   - Invalid format (e.g., \"test@\") → error \"Bitte geben Sie eine gültige E‑Mail‑Adresse ein.\" shown.\n3. **Message field**:\n   - Empty → error \"Bitte geben Sie eine Nachricht ein.\" shown.\n   - < 10 characters → error \"Die Nachricht muss mindestens 10 Zeichen haben.\" shown.\n   - > 1000 characters → error \"Die Nachricht darf maximal 1000 Zeichen haben.\" shown.\n4. On submit with any invalid field: No network request is made; browser console shows no JavaScript errors; focus moves to first invalid field.\n5. On submit with all fields valid: Form submits normally (network request observed in dev tools); all error messages are removed.\n6. Validation triggers on submit and on blur for each field (per Alternate Flow A1).\n7. All error containers have `role=\"alert\"` and `aria-live=\"polite\"` for screen reader announcement.\n8. Invalid fields have `aria-invalid=\"true\"`; valid fields have `aria-invalid=\"false\"` or attribute removed.\n9. Validation logic is pure frontend; no server communication occurs during validation.\n\n### F-07: Form Submission Endpoint Integration\n\n1. Purpose\nTo securely receive validated contact form data from the frontend, process it, and forward the inquiry as an email to the bookstore's designated contact address. This enables the business to receive and respond to customer inquiries.\n\n2. Actors\nPrimary Actor: Customer (Website Visitor)\nSecondary Actor: Backend System / Email Service\n\n3. Trigger\nThe customer completes all required fields in the contact form and clicks the \"Submit\" button after successful client-side validation.\n\n4. Preconditions\n*   The contact form on the frontend has passed all client-side validation rules (e.g., valid email format, non-empty required fields).\n*   The backend API endpoint (e.g., `POST /api/contact`) is deployed, accessible, and healthy.\n*   The backend server has correct SMTP credentials configured and network access to an email relay service (e.g., SendGrid, AWS SES, or a local SMTP server).\n*   The customer's device has an active internet connection.\n\n5. Main Flow\n1.  The frontend JavaScript collects the form field values (`name`, `email`, `subject`, `message`) into a JSON object.\n2.  The frontend sends an HTTPS `POST` request to the configured backend endpoint, including the JSON object in the request body and setting the `Content-Type` header to `application/json`.\n3.  The backend server receives the request and parses the JSON body.\n4.  The backend performs server-side validation on all required fields (presence, basic sanitization, email format). If validation fails, the flow proceeds to Alternate Flow A.\n5.  The backend constructs a formatted email. The recipient is a fixed, configurable bookstore contact email (e.g., `contact@buchladen.de`). The sender is set to the customer's provided email address. The email subject includes the customer's subject. The email body includes the customer's name, email, and message, formatted for readability.\n6.  The backend initiates an SMTP transaction to send the constructed email.\n7.  If the SMTP transaction is successful, the backend logs the successful submission (including a timestamp and customer email) and returns an HTTP `200 OK` response with a JSON body: `{\"success\": true, \"message\": \"Ihre Nachricht wurde gesendet.\"}`.\n8.  The frontend receives the `200 OK` response, displays a success notification/modal to the user, and resets the form fields to empty.\n\n6. Alternate Flows\nA.  Server-Side Validation Failure:\n    *   At step 4, if any field is empty or the email format is invalid, the backend immediately returns an HTTP `400 Bad Request` response. The JSON body contains an error object detailing the failed field(s), e.g., `{\"success\": false, \"errors\": {\"email\": \"Ungültige E-Mail-Adresse\", \"message\": \"Dieses Feld ist erforderlich\"}}`.\n    *   The frontend receives the `400` response, parses the error details, and displays specific inline error messages next to the relevant form fields and/or a general error summary.\n\nB.  Email Service Failure:\n    *   At step 6, if the SMTP server returns an error (e.g., authentication failure, rate limit, connection timeout), the backend logs the detailed error (including the customer's data for debugging) and returns an HTTP `500 Internal Server Error` response with a generic JSON body: `{\"success\": false, \"message\": \"Serverfehler. Bitte versuchen Sie es später erneut.\"}`.\n    *   The frontend receives the `500` response and displays a generic, non-technical error notification to the user. The form data remains in the fields so the user can retry.\n\n7. Postconditions\n*   **Success:** The customer's inquiry has been delivered to the bookstore's inbox. A log entry recording the successful submission exists on the backend server. The frontend form is cleared and shows a success message.\n*   **Failure (Validation):** No email is sent. An error log entry may be created. The frontend form retains the user's input and displays validation errors.\n*   **Failure (Email Service):** No email is reliably sent. An error log entry with details is created on the backend server. The frontend form retains the user's input and displays a generic error message.\n\n8. Data Impact\n*   **Transient Data:** The customer's submitted data (`name`, `email`, `subject`, `message`) is transmitted from client to server and processed in memory.\n*   **Persisted Data (Backend):** A minimal log entry (timestamp, customer email, submission status) is written to the application log file or logging system. The full message content is not stored in a database by this feature.\n*   **External Data:** The customer's data is sent to and stored (in the inbox) of the external email service/recipient mailbox.\n\n9. UI Impact\n*   The contact form must have a loading state (e.g., disabled submit button, spinner) while the request is in flight.\n*   On a successful submission (HTTP 200), a clear, dismissible success notification must appear (e.g., toast message: \"Ihre Nachricht wurde erfolgreich gesendet.\").\n*   On a validation failure (HTTP 400), specific field-level error messages must appear below the relevant inputs, and/or a summary error banner at the top of the form.\n*   On a server/email failure (HTTP 500), a generic error notification must appear (e.g., \"Ein technischer Fehler ist aufgetreten. Bitte versuchen Sie es später noch einmal.\").\n*   The form must be reset to its initial empty state only after a `200` response.\n\n10. Acceptance Criteria\n1.  Given a customer fills all required fields with valid data, when they click submit, then an email containing the full inquiry is received at the configured bookstore contact address within 10 seconds.\n2.  Given a customer submits an invalid email address, when they click submit, then the backend returns HTTP 400 and the frontend displays an error specifically for the email field.\n3.  Given the backend email service (SMTP) is unavailable, when a valid form is submitted, then the backend returns HTTP 500 and the frontend displays a generic error message, not exposing internal SMTP details.\n4.  Given a successful submission, then the frontend form fields are cleared and a success message is visible to the user.\n5.  Given any API request, then all user-provided data is sanitized on the backend to prevent basic injection attacks (e.g., newlines in headers) before being used in email construction.\n6.  The backend endpoint only accepts `POST` requests and requires the `Content-Type: application/json` header. Requests with other methods or content types return `405` or `415` respectively.\n\n### F-08: Submission Success Message\n\n1. Purpose  \n   Provide immediate, clear feedback to the visitor that their contact‑form submission has been received and processed successfully, reinforcing trust and preventing duplicate submissions.\n\n2. Actors  \n   - **Visitor**: the end‑user who fills out and submits the contact form.  \n   - **Web Client**: the browser‑side JavaScript responsible for sending the request and rendering UI feedback.  \n   - **Backend API**: the HTTP endpoint that receives the form data and returns a success status.\n\n3. Trigger  \n   The backend API returns an HTTP 200 response with a JSON body `{ \"status\": \"success\" }` after a valid form submission.\n\n4. Preconditions  \n   1. The contact form fields have passed client‑side validation.  \n   2. The visitor has clicked the **Submit** button.  \n   3. The browser has an active network connection.  \n   4. The backend endpoint `/api/contact` is reachable and configured to return a success payload for valid submissions.\n\n5. Main Flow  \n   1. Visitor clicks the **Submit** button.  \n   2. Web Client disables the button, shows a loading spinner, and serializes the form data to JSON.  \n   3. Web Client sends an asynchronous `POST` request to `/api/contact` with the JSON payload and the header `Content-Type: application/json`.  \n   4. Backend processes the payload, stores the inquiry, and responds with HTTP 200 and body `{ \"status\": \"success\", \"messageId\": \"<uuid>\" }`.  \n   5. Web Client receives the response, re‑enables the **Submit** button, and hides the loading spinner.  \n   6. Web Client injects a success toast component into the DOM with the text **“Thank you! Your message has been sent.”**.  \n   7. The toast appears at the top‑right corner, uses ARIA role `alert`, and is styled with a green background and white text.  \n   8. The toast remains visible for 5 seconds, then fades out over 0.5 seconds and is removed from the DOM.  \n   9. Web Client clears all input fields in the contact form.  \n\n6. Alternate Flows  \n   **A1 – Server returns non‑200 status**  \n   1. Steps 1‑4 of the Main Flow execute.  \n   2. Backend responds with HTTP 4xx/5xx and a JSON body `{ \"status\": \"error\", \"errorMessage\": \"…\"} `.  \n   3. Web Client displays an error toast with the returned `errorMessage` instead of the success toast.  \n   4. Form fields remain populated for user correction.  \n\n   **A2 – Network failure or timeout**  \n   1. Steps 1‑3 of the Main Flow execute.  \n   2. The `fetch` promise rejects or times out after 10 seconds.  \n   3. Web Client displays an error toast: **“Unable to send your message. Please check your connection and try again.”**  \n   4. Form fields remain populated.  \n\n   **A3 – Duplicate rapid submissions**  \n   1. Visitor clicks **Submit** multiple times before the button is disabled.  \n   2. Web Client detects that a request is already in flight (internal flag `isSubmitting`).  \n   3. Subsequent clicks are ignored until the flag is cleared after step 5 of the Main Flow.  \n\n7. Postconditions  \n   - The UI shows a transient success toast confirming receipt.  \n   - All form inputs are cleared.  \n   - No pending network requests remain (`isSubmitting` flag = false).  \n   - Backend has persisted the inquiry and returned a unique `messageId`.  \n\n8. Data Impact  \n   - No new client‑side data is persisted beyond the transient toast.  \n   - Backend creates a new record in the `inquiries` table (outside the scope of this feature).  \n   - The client logs the `messageId` to the browser console for debugging (optional).  \n\n9. UI Impact  \n   - Add a reusable toast component (`<div class=\"toast success\" role=\"alert\">…</div>`).  \n   - Ensure the toast is responsive: width ≤ 90 % of viewport, max‑width 300 px, positioned 1 rem from the top and right edges.  \n   - Include CSS transitions for fade‑in (0.3 s) and fade‑out (0.5 s).  \n   - Update the **Submit** button style to indicate disabled state (`opacity:0.5; cursor:not-allowed`).  \n\n10. Acceptance Criteria  \n   - AC‑1: When the backend returns HTTP 200 with `{ \"status\":\"success\" }`, the success toast appears within 300 ms of the response.  \n   - AC‑2: The toast text exactly matches “Thank you! Your message has been sent.” and uses the green (`#28a745`) background with white (`#ffffff`) text.  \n   - AC‑3: The toast remains visible for 5 seconds, then fades out over 0.5 seconds and is removed from the DOM.  \n   - AC‑4: After the toast disappears, all form fields are empty and the **Submit** button is enabled.  \n   - AC‑5: The toast component has `role=\"alert\"` and is announced by screen readers.  \n   - AC‑6: In case of a non‑200 response or network error, an error toast is shown instead, and form fields retain their values.  \n   - AC‑7: Rapid double‑clicks on **Submit** do not produce multiple network requests or multiple toasts.  \n   - AC‑8: The feature works on the latest versions of Chrome, Firefox, Safari, and Edge on both desktop and mobile viewports.\n\n### F-09: Basic SEO Meta Tags\n\n1. Purpose\nTo ensure the bookstore landing page is correctly indexed by search engines and renders responsively on all devices by including a minimal, standardized set of meta tags within the HTML document's head section.\n\n2. Actors\n- Developer: Implements the meta tags in the HTML template.\n- Search Engine Crawlers (e.g., Googlebot): Consume the meta tags for indexing and SERP display.\n- Web Browsers: Utilize the viewport meta tag for responsive rendering.\n\n3. Trigger\nThe HTML document is generated and served in response to a user's HTTP request for the landing page.\n\n4. Preconditions\n- The static HTML file structure for the landing page (e.g., `index.html`) exists.\n- The developer has defined the official bookstore name and a concise, accurate description of its services and location.\n- The page will be served with the `text/html` MIME type.\n- The design requires a mobile-first, responsive layout.\n\n5. Main Flow\n1. Open the primary HTML template file (e.g., `index.html`) in a code editor.\n2. Locate the `<head>` section of the document.\n3. Insert the charset declaration as the first meta tag: `<meta charset=\"UTF-8\">`.\n4. Directly after the charset tag, insert the viewport meta tag for responsive design: `<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">`.\n5. Insert the `<title>` tag immediately after the viewport tag. The content must follow the format: `[Bookstore Name] | [City/Neighborhood]` (e.g., \"Bücherparadies | Berlin Mitte\"). Ensure the total character count is between 30 and 60.\n6. Insert the description meta tag: `<meta name=\"description\" content=\"[A single sentence summarizing the bookstore's specialty, atmosphere, and location.]\">`. Ensure the content is between 70 and 160 characters.\n7. Save the HTML file.\n8. Deploy the updated file to the web server's document root.\n\n6. Alternate Flows\n- A1: If the provided title or description content exceeds the recommended character limits, the developer shall truncate the text at the nearest word boundary within the limit and append an ellipsis (\"...\"). A warning shall be logged for content review.\n- A2: If the HTML template uses a server-side includes (SSI) or templating engine for the head section, the developer shall place the meta tags within the appropriate head include file or template block instead of the static file.\n- A3: During validation, if the `viewport` tag's `content` attribute is found to be missing `initial-scale=1.0`, the developer shall correct it to the exact required value to ensure proper mobile rendering.\n\n7. Postconditions\n- The `<head>` section of the deployed `index.html` contains exactly the four essential meta tags (`charset`, `viewport`, `title`, `description`) in the specified order.\n- The page source is valid HTML5.\n- Search engine crawlers can parse the title and description for indexing.\n- Web browsers apply the responsive viewport settings, allowing the page to scale correctly on mobile devices.\n- No console warnings or errors related to meta tags appear in browser developer tools.\n\n8. Data Impact\n- **Static Content**: The HTML template file (`index.html` or equivalent head template) is modified. No database tables, API endpoints, or user-generated content are affected.\n- **Configuration**: No new configuration files are created. The meta tag values are hardcoded based on the predefined bookstore name and description.\n\n9. UI Impact\n- **Indirect UI Impact**: The `title` tag content appears in the browser tab/window title. The `description` meta tag is frequently used by search engines as the snippet in search results (SERP). Neither affects the visual layout of the landing page itself.\n- **Functional UI Impact**: The `viewport` meta tag is critical for the responsive CSS to function correctly across different screen sizes, ensuring the Hero, opening hours, and contact form are usable on mobile devices.\n\n10. Acceptance Criteria\n- **AC1:** The page source (`Ctrl+U` in browser) contains `<meta charset=\"UTF-8\">` as the first element inside `<head>`.\n- **AC2:** The page source contains `<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">` immediately following the charset tag.\n- **AC3:** The page source contains a `<title>` tag with content matching the pattern `[Bookstore Name] | [Location]`, with a length between 30 and 60 characters.\n- **AC4:** The page source contains a `<meta name=\"description\"` tag with a `content` attribute value between 70 and 160 characters that accurately describes the store.\n- **AC5:** Running the HTML through the W3C Markup Validation Service (https://validator.w3.org/) returns no errors related to the `<title>`, `<meta charset>`, `<meta name=\"viewport\">`, or `<meta name=\"description\">` tags.\n- **AC6:** The page passes Google's Mobile-Friendly Test (https://search.google.com/test/mobile-friendly) with no viewport-related errors.\n- **AC7:** The bookstore name in the `<title>` tag exactly matches the official brand name provided in the project brief.\n\n### F-10: Favicon Inclusion\n\n1. Purpose\nTo provide a small, recognizable icon (favicon) that appears in browser tabs, bookmark lists, and history entries, enhancing brand recognition for the bookstore and improving user orientation when multiple tabs are open.\n\n2. Actors\n- Developer: Implements the favicon asset and HTML reference.\n- End User's Browser: Requests, caches, and displays the favicon.\n- End User: Sees the favicon in the browser UI.\n\n3. Trigger\nThe browser renders the bookstore's landing page (`index.html`) and parses the `<head>` section for icon definitions.\n\n4. Preconditions\n- A suitable icon file (e.g., `favicon.ico`) has been created and is available in the project's asset directory (e.g., `/assets/icons/`).\n- The developer has edit access to the `index.html` file.\n\n5. Main Flow\n1. The developer creates or obtains a square icon graphic representing the bookstore's brand.\n2. The developer converts the graphic to the `.ico` format, embedding multiple resolutions (e.g., 16x16, 32x32, 48x48 pixels) within the single file for broad browser compatibility.\n3. The developer saves the file as `favicon.ico` and places it in the designated assets directory (e.g., `/assets/icons/`).\n4. The developer opens the `index.html` file and locates the `<head>` section.\n5. The developer inserts the following HTML link tag within `<head>`:\n   `<link rel=\"icon\" href=\"/assets/icons/favicon.ico\" type=\"image/x-icon\">`\n6. The developer optionally adds a PNG fallback for modern browsers by inserting a second tag:\n   `<link rel=\"icon\" href=\"/assets/icons/favicon.png\" type=\"image/png\">`\n   (with a corresponding 32x32px PNG file in the same location).\n7. The developer saves `index.html` and deploys both the HTML file and the icon asset(s) to the web server.\n8. The developer tests by loading the page in a browser and confirming the icon appears in the tab.\n\n6. Alternate Flows\n- A1: Missing Favicon File. If the browser requests `/assets/icons/favicon.ico` and receives a 404 response, it will typically display a generic browser default icon. The developer must verify the file path and deployment.\n- A2: Incorrect MIME Type. If the server serves the `.ico` file with an incorrect `Content-Type` header (e.g., `text/plain`), some browsers may ignore it. The developer must configure the server to serve `.ico` files with `image/x-icon`.\n- A3: Browser Cache. After deployment, the developer's browser may still show the old icon due to caching. The developer must perform a hard refresh (Ctrl+F5) or clear the browser cache to see the updated favicon.\n\n7. Postconditions\n- The `favicon.ico` (and optional `favicon.png`) file exists in the specified directory on the web server.\n- The `index.html` file contains the correct `<link rel=\"icon\">` tag(s) in its `<head>` section.\n- When a user loads the landing page, the browser displays the bookstore's custom icon in the tab, bookmark list, and history.\n\n8. Data Impact\n- **No Database Changes:** This feature involves only static asset files and HTML markup. No database schema or data records are created, modified, or deleted.\n- **Static Assets:** Two new static files are added to the project repository and deployment package: `favicon.ico` and optionally `favicon.png`.\n\n9. UI Impact\n- **Browser Tab/Window:** A small (typically 16x16px) icon appears to the left of the page title in the browser tab.\n- **Bookmarks/Favorites:** The custom icon is displayed next to the bookmarked page title in the browser's bookmark manager.\n- **Browser History:** The icon may appear next to the page entry in the browser's history list.\n\n10. Acceptance Criteria\n- AC1: A valid `favicon.ico` file containing at least a 16x16px and 32x32px image is present at the path `/assets/icons/favicon.ico` on the deployed server.\n- AC2: The `index.html` file contains a `<link rel=\"icon\" href=\"/assets/icons/favicon.ico\" type=\"image/x-icon\">` tag within the `<head>` section.\n- AC3: Upon loading the live page in Google Chrome (latest), Mozilla Firefox (latest), and Safari (latest), the custom icon is visibly displayed in the browser tab.\n- AC4: When bookmarking the page in the same browsers, the custom icon is displayed in the bookmark/favorites entry.\n- AC5: No console errors related to favicon fetching (404, MIME type) appear in the browser's developer tools when loading the page.\n\n### F-11: Anchor‑Based Page Navigation\n\n1. Purpose\nTo enable users to navigate between distinct sections of the single-page website (Hero, Opening Hours, Contact) via clickable anchor links, using a smooth scrolling animation for an improved user experience.\n\n2. Actors\nPrimary Actor: Visitor (end-user)\nSecondary Actor: Web Browser (client-side JavaScript engine)\n\n3. Trigger\nThe visitor clicks on an anchor link (`<a href=\"#target-id\">`) in the primary navigation menu or a call-to-action button within the Hero section.\n\n4. Preconditions\n*   The HTML document contains at least two target sections (e.g., `<section id=\"oeffnungszeiten\">`, `<section id=\"kontakt\">`).\n*   The navigation menu and/or CTA button contain anchor links with `href` attributes matching the `id` of these target sections (e.g., `href=\"#kontakt\"`).\n*   The visitor's web browser has JavaScript enabled.\n\n5. Main Flow\n1.  The visitor clicks an anchor link element (e.g., `<a href=\"#oeffnungszeiten\">`).\n2.  The browser's default jump-to-anchor behavior is intercepted by a registered JavaScript event listener (`click` event).\n3.  The event listener's `preventDefault()` method is called to stop the browser's instant, discontinuous jump.\n4.  The script identifies the target element by selecting the DOM element with the `id` matching the link's `href` fragment (e.g., `document.getElementById('oeffnungszeiten')`).\n5.  The script calculates the vertical scroll position: `targetElement.offsetTop`.\n6.  The `window.scrollTo()` method is invoked with options: `{ top: calculatedPosition, behavior: 'smooth' }`.\n7.  The browser animates the scroll over a default duration (typically 300-500ms), moving the viewport smoothly until the top of the target section aligns with the top of the viewport.\n8.  The URL in the address bar is updated to include the fragment identifier (e.g., `.../index.html#oeffnungszeiten`) without triggering a page reload.\n\n6. Alternate Flows\n*   **A1: Target Element Does Not Exist.** If `document.getElementById()` returns `null`, the script logs an error to the console and does nothing. The browser performs its default action (no jump, URL hash updates).\n*   **A2: Fixed Header Offset.** If a fixed-position header obscures the target section upon scroll completion, the script calculates an offset (e.g., `targetElement.offsetTop - headerHeight`) and scrolls to that adjusted position.\n*   **A3: JavaScript Disabled.** If JavaScript is disabled, the browser's native anchor-jump behavior occurs (instant, discontinuous scroll to the element). The URL hash still updates.\n\n7. Postconditions\n*   The viewport is scrolled such that the target section's top edge is at (or near, considering any offset) the top of the visible viewport.\n*   The browser's address bar URL contains the correct fragment identifier corresponding to the navigated section.\n*   The page's overall state (data, forms) remains unchanged; only the scroll position is altered.\n\n8. Data Impact\nNo persistent data is created, read, updated, or deleted. All operations are transient and client-side only.\n\n9. UI Impact\n*   **CSS:** The `html` element should have `scroll-behavior: smooth;` defined as a progressive enhancement fallback for browsers with native smooth scroll support.\n*   **JavaScript:** A script must be included that attaches `click` event listeners to all anchor links with fragment-only `href` values (e.g., `href=\"#...\"`).\n*   **Visual Feedback (Optional):** The active navigation link corresponding to the currently visible section may be highlighted via a CSS class (e.g., `.active`), typically managed by a `IntersectionObserver` monitoring section visibility.\n\n10. Acceptance Criteria\n*   **AC1:** Clicking a navigation link smoothly scrolls the page to the correct target section within 2 seconds on a standard desktop viewport.\n*   **AC2:** After the scroll completes, the URL in the address bar correctly displays the fragment identifier (hash) of the target section.\n*   **AC3:** If a fixed header exists, the target section's heading/content is not hidden behind it after the scroll completes.\n*   **AC4:** The feature works on all modern browsers (Chrome, Firefox, Safari, Edge) and provides a basic instant-jump fallback on older browsers without smooth scroll support.\n*   **AC5:** Clicking an anchor link with an invalid/non-existent `href` fragment (e.g., `#invalid`) does not break the page; the browser's default behavior (URL hash update only) occurs without error.\n\n### F-12: Brand‑Consistent CSS Styling\n\n1. Purpose\nTo define and apply a unified visual identity across the entire bookstore landing page by enforcing specific colors, typography, and spacing rules. This ensures all UI components (Hero, Opening Hours, Contact Form) present a professional, cohesive brand experience.\n\n2. Actors\nWeb Browser (rendering engine).\n\n3. Trigger\nA user navigates to the bookstore’s landing page URL, causing the browser to request and render the HTML document.\n\n4. Preconditions\n- The HTML document contains a `<link>` tag referencing the brand CSS file at a known path (e.g., `/css/brand.css`).\n- The brand CSS file exists on the server and is accessible via the referenced path.\n- The HTML structure includes elements with class names or IDs that the CSS selectors target (e.g., `.hero`, `.opening-hours`, `.contact-form`).\n\n5. Main Flow\n1. The browser requests the landing page’s HTML document from the server.\n2. The browser parses the HTML and encounters the `<link rel=\"stylesheet\" href=\"/css/brand.css\">` tag.\n3. The browser initiates a separate HTTP request to fetch the `brand.css` file.\n4. The server responds with the CSS file containing brand rules (e.g., `:root` variables, class selectors).\n5. The browser parces the CSS, builds the CSS Object Model (CSSOM), and matches selectors to DOM elements.\n6. The browser computes final styles for each element, applying:\n   - Color values from CSS custom properties (e.g., `--color-primary: #2E5AAC`).\n   - Font family and size stacks (e.g., `font-family: 'Open Sans', sans-serif`).\n   - Spacing declarations (e.g., `margin: var(--spacing-md) 0;`).\n7. The browser paints the page, rendering all elements with the computed brand styles.\n\n6. Alternate Flows\n- A1: CSS file returns HTTP 404 (Not Found). The browser proceeds without external styles, rendering elements with browser default styles (User Agent Stylesheet). The page appears unstyled and inconsistent.\n- A2: CSS file contains a syntax error (e.g., missing closing brace). The browser ignores the malformed rule set but applies all preceding and subsequent valid rules. Partial styling is applied, potentially leaving some elements unstyled.\n- A3: User’s browser does not support CSS custom properties (e.g., IE11). The browser falls back to static values defined in fallback declarations (e.g., `color: #2E5AAC;` before `color: var(--color-primary);`). Brand consistency is maintained for supported properties.\n\n7. Postconditions\n- All visible elements within the Hero, Opening Hours, and Contact Form sections adhere to the defined brand style guide.\n- No element displays with browser default styling unless explicitly intended as a fallback.\n- The visual hierarchy (color contrast, font sizing, whitespace) matches the design specifications.\n\n8. Data Impact\n- None. The feature does not read, store, or modify any application data.\n- The CSS file may be cached by the browser or intermediate proxies, but no dynamic data is involved.\n\n9. UI Impact\n- The Hero section background uses the primary brand color (`#2E5AAC`), and its headline uses the primary heading font (`'Merriweather', serif`) at `2.5rem`.\n- Opening Hours table rows have consistent vertical padding (`1rem`) and use the secondary text color (`#4A4A4A`).\n- Contact form inputs share identical border styling (`1px solid #CCCCCC`), border radius (`4px`), and internal padding (`0.75rem`).\n- All body text uses the brand’s primary font (`'Open Sans', sans-serif`) at `1rem` with line height `1.6`.\n- Spacing between major sections follows a standardized scale (e.g., `--spacing-lg: 2rem;` applied as `margin-bottom`).\n\n10. Acceptance Criteria\n- AC1: The primary brand color (`#2E5AAC`) is correctly applied to all buttons, primary links, and the Hero background.\n- AC2: The font stack loads `'Open Sans'` for body text and `'Merriweather'` for all `h1`–`h6` elements, with fallbacks to system fonts.\n- AC3: The vertical spacing between the Hero, Opening Hours, and Contact Form sections equals exactly `2rem` (32px) on all viewport widths.\n- AC4: Contact form input fields have a consistent `border: 1px solid #CCCCCC`, `border-radius: 4px`, and `padding: 0.75rem 1rem`.\n- AC5: At the mobile breakpoint (`max-width: 768px`), font sizes reduce by `10%` and horizontal margins adjust to `1rem` while maintaining color and font family consistency.\n\n### F-13: Accessibility ARIA Labels for Form Elements\n\n1. Purpose\nTo ensure the contact form is fully perceivable, operable, and understandable for users of assistive technologies (e.g., screen readers) by providing programmatically determinable names, descriptions, and states for all form controls.\n\n2. Actors\nEnd-users utilizing assistive technologies such as screen readers (NVDA, JAWS, VoiceOver), screen magnifiers, or voice control software.\n\n3. Trigger\nThe landing page containing the contact form is rendered in the browser, or a user navigates to or activates a form control.\n\n4. Preconditions\nThe contact form HTML structure exists with input fields (text, email, textarea) and a submit button, as defined by the base feature. The form fields have associated visible text labels or placeholder text.\n\n5. Main Flow\n1.  Identify all interactive form elements within the contact form: `<input>` (text, email), `<textarea>`, and `<button>`.\n2.  For each `<input>` and `<textarea>`:\n    a.  If a visible `<label>` element exists and is correctly associated via the `for` attribute matching the element's `id`, no further action is required for the accessible name.\n    b.  If no visible `<label>` exists (e.g., placeholder-only), add an `aria-label` attribute with a concise, descriptive label (e.g., `aria-label=\"Your Message\"` for the message textarea).\n    c.  If additional instructions or hints exist (e.g., \"We'll respond within 24 hours\"), ensure the form control has an `aria-describedby` attribute referencing the `id` of the instruction element.\n3.  For required fields, add the `aria-required=\"true\"` attribute to the corresponding `<input>` or `<textarea>`.\n4.  For the submit `<button>`:\n    a.  Ensure the button text content provides an accessible name (e.g., \"Send Inquiry\").\n    b.  If the button uses only an icon, add an `aria-label` (e.g., `aria-label=\"Submit Inquiry\"`).\n5.  Implement an `aria-live=\"polite\"` region (e.g., a `<div>` with `role=\"status\"` or `aria-live=\"polite\"`) to announce form submission success or validation error messages. Associate this region with relevant form controls using `aria-describedby` when errors are present.\n6.  Perform manual testing with a screen reader to verify each form control is announced with its correct label, state (required), and any associated instructions or error messages.\n\n6. Alternate Flows\n1.  **Dynamic Error Announcement:** If a user submits the form with invalid data, the system generates inline error messages. The `aria-live` region must be updated to announce the first error. The erroneous field must have `aria-invalid=\"true\"` set and its `aria-describedby` updated to reference the specific error message element's `id`.\n2.  **Conditionally Revealed Fields:** If a form field (e.g., \"Phone Number\") is conditionally shown based on a user selection, the field must be added to the Accessibility Tree with its `aria-label` and `aria-required` (if applicable) upon being made visible. When hidden, it should be removed from the Accessibility Tree (e.g., via `aria-hidden=\"true\"` or `display: none`).\n\n7. Postconditions\nAll contact form controls have a programmatically determinable name and state. Validation and status messages are announced by assistive technologies. The contact form conforms to WCAG 2.1 Level AA Success Criteria 1.3.1 (Info and Relationships) and 4.1.2 (Name, Role, Value).\n\n8. Data Impact\nNo impact on form submission data payload or backend processing. The added ARIA attributes are purely presentational for assistive technologies and do not alter the data sent to the server.\n\n9. UI Impact\nNo visual changes to the user interface. All modifications are limited to the HTML attribute layer (`aria-label`, `aria-required`, `aria-describedby`, `aria-live`, `aria-invalid`, `role`). The visual layout, styling, and visible text remain unchanged.\n\n10. Acceptance Criteria\n*   **AC1:** Every text input and textarea in the contact form can be focused and its purpose is announced correctly by a screen reader (e.g., \"Name, edit text\").\n*   **AC2:** Required fields are announced as required (e.g., \"Email, required, edit text\").\n*   **AC3:** Any helper text associated with a field (e.g., \"Max 500 characters\") is announced after the field's label when the field receives focus.\n*   **AC4:** Upon form submission with validation errors, the first error is announced automatically from the `aria-live` region, and the erroneous field's state is announced as invalid when focused.\n*   **AC5:** The form passes an automated accessibility audit (using tools like WAVE, axe, or Lighthouse) with no critical violations related to form labels or inputs for the contact form section.\n\n### F-14: Image Optimization for Fast Load\n\n1. Purpose\nTo minimize the hero background image's file size and improve page load performance by compressing the source image and serving it in modern, web-optimized formats (primarily WebP) with appropriate fallbacks for browsers that lack support.\n\n2. Actors\n- Frontend build process (e.g., a task runner like Gulp or a static site generator plugin)\n- Web browser (client)\n- Content Delivery Network (CDN) or web server (for cache control)\n\n3. Trigger\nA user's browser requests the homepage (`/`), triggering the HTML response which includes a reference to the hero background image.\n\n4. Preconditions\n- A source hero image file (e.g., `hero-original.jpg` or `hero-original.png`) exists in the project's assets directory.\n- The build/deployment pipeline includes an image optimization tool (e.g., `imagemin`, `sharp`, or Squoosh CLI) configured for compression and format conversion.\n- The HTML template for the homepage contains a placeholder for the hero background image (e.g., a CSS `background-image` declaration or an `<img>`/`<picture>` element).\n\n5. Main Flow\n1. During the build process, the optimization tool locates the source hero image file.\n2. The tool applies lossy or lossless compression to the source image, targeting a quality setting (e.g., 75-85%) that balances visual fidelity and file size reduction.\n3. The compressed image is converted to the WebP format.\n4. The tool generates multiple resolution variants of the WebP image (e.g., `hero-1x.webp`, `hero-2x.webp`) to support responsive design and high-DPI displays.\n5. For browsers without WebP support, the tool generates fallback images in widely supported formats (JPEG for photographic content, PNG for graphics with transparency) at the same resolutions.\n6. The build process updates the homepage HTML/CSS to reference the optimized assets. This typically involves:\n   - Replacing a single `background-image: url(...)` in CSS with a `@media`-based swap or, preferably,\n   - Modifying the HTML to use a `<picture>` element with `<source type=\"image/webp\" srcset=\"...\">` and a fallback `<img src=\"hero-fallback.jpg\">`.\n7. The optimized image files (`.webp`, `.jpg`/`.png`) are copied to the final `dist/` or `public/` output directory.\n8. The web server or CDN is configured to serve these optimized files with long-term caching headers (e.g., `Cache-Control: max-age=31536000`).\n\n6. Alternate Flows\n- **A1: Image Optimization Tool Failure**: If the compression/conversion step fails (e.g., due to corrupt source file or tool error), the build logs a warning and copies the original source image to the output directory without modification. The HTML/CSS continues to reference this original file, ensuring the page remains functional but unoptimized.\n- **A2: Browser Without WebP or JPEG Support**: A very old browser that supports neither WebP nor standard JPEG/PNG. The `<picture>` element's fallback `<img>` with a supported format (e.g., PNG) will be displayed. If all formats fail, the browser's default broken image icon appears.\n- **A3: Low-Bandwidth Connection with Data Saver**: The user's browser or OS enables a data-saving mode that may ignore high-resolution sources. The `srcset` attribute with width descriptors (`w`) or pixel density descriptors (`x`) allows the browser to select the smallest appropriate variant automatically.\n\n7. Postconditions\n- The homepage's hero section displays an image that is visually comparable to the original but has a significantly smaller file size (typically 25-50% of the original).\n- The HTML/CSS of the deployed homepage references the newly generated, optimized image assets (`.webp` and fallback files).\n- The web server/CDN serves the correct image format (WebP or fallback) based on the `Accept` request header from the browser.\n- Overall page load time, particularly the Largest Contentful Paint (LCP) metric, is improved.\n\n8. Data Impact\n- **New/Modified Files**: Optimized hero image files (e.g., `hero-1x.webp`, `hero-2x.webp`, `hero-1x.jpg`) are added to the deployed asset directory.\n- **Modified Files**: The homepage HTML template and/or associated CSS file are updated to point to the new asset paths and formats.\n- **Configuration**: The project's build configuration (e.g., `gulpfile.js`, `webpack.config.js`, or `astro.config.mjs`) is updated to include the image optimization task for the hero image.\n- **Cache Metadata**: HTTP cache headers for image assets are set to a long duration (e.g., 1 year) with a fingerprinted filename strategy (e.g., `hero.abc123.webp`) to enable immutable caching. If fingerprinting is not used, cache headers must still be configured for long-term caching with versioning via query strings or directory changes.\n\n9. UI Impact\n- The visual appearance of the hero section remains identical to the design specification.\n- The image loads perceptibly faster, especially on slower network connections, reducing layout shift and improving the user's first impression.\n- No interactive elements are added or changed; the impact is purely on performance and rendering speed.\n\n10. Acceptance Criteria\n- **AC1**: The final deployed hero image file size (WebP version) is at least 60% smaller than the original source file, while maintaining a Structural Similarity Index (SSIM) of >0.95 or comparable visual quality in manual review.\n- **AC2**: A browser that supports WebP (e.g., Chrome, Firefox 65+, Edge 18+) receives the WebP image as evidenced by the Network tab in DevTools showing a `.webp` file.\n- **AC3**: A browser that does *not* support WebP (e.g., Safari < 14, older versions of IE) receives the fallback JPEG/PNG image as evidenced by the Network tab.\n- **AC4**: The `picture` element or CSS `image-set` correctly switches between 1x and 2x (or other) variants when the browser's device pixel ratio changes or the window is resized (for responsive widths).\n- **AC5**: Running Google Lighthouse (or WebPageTest) on the deployed homepage shows an improvement in the \"Properly size images\" and \"Efficiently encode images\" audits, and the LCP metric is below 2.5 seconds on a simulated 3G connection.\n- **AC6**: The build process completes successfully with the optimization step, and the optimized assets are present in the deployment package.\n\n### F-15: Cross‑Browser Compatibility Polyfills\n\n**1. Purpose**\n\nTo guarantee that the core interactive features of the bookstore landing page—specifically the contact form submission and responsive layout—function correctly in browsers with incomplete support for modern web standards (e.g., Internet Explorer 11, older mobile browsers). This feature does not enhance functionality for modern browsers.\n\n**2. Actors**\n\n*   End User: A visitor accessing the landing page with an older browser.\n*   Frontend Build System: The toolchain (e.g., Webpack, Vite, or a simple script) responsible for injecting polyfill scripts into the final HTML.\n\n**3. Trigger**\n\nThe browser begins parsing and executing the landing page's HTML, CSS, and JavaScript.\n\n**4. Preconditions**\n\n*   The core landing page code (HTML, CSS, JS) is written using modern standards (ES6+, CSS Grid/Flexbox, Fetch API, CSS Custom Properties).\n*   A build process or static HTML generation step is configured to include polyfill logic.\n*   Polyfill libraries (e.g., `core-js`, `whatwg-fetch`, `css-vars-ponyfill`) are available via a CDN or local assets.\n\n**5. Main Flow**\n\n1. The browser loads the initial HTML document.\n2. The build-injected script `polyfill-loader.js` executes immediately in the `<head>`.\n3. `polyfill-loader.js` performs feature detection for the following critical APIs:\n4. `Promise` (for async form handling).\n5. `fetch` (for form submission).\n6. `CSS.supports('display', 'grid')` (for responsive layout).\n7. If any detected API is missing or deficient, `polyfill-loader.js` dynamically injects `<script>` tags for the corresponding polyfill libraries from the configured CDN (e.g., unpkg.com or cdnjs) in a specific order:\n8. `core-js` (for ES6+ features like `Promise`, `Object.assign`, etc.).\n9. `whatwg-fetch` (for the `fetch` API).\n10. `css-vars-ponyfill` (for CSS Custom Properties).\n11. The polyfill scripts load and execute, patching the browser's global environment.\n12. The main application script `main.js` executes, now able to safely use the modern APIs. The contact form's `submit` event listener is attached, and the responsive CSS grid layout is applied without breaking.\n\n**6. Alternate Flows**\n\n1. **A1: Polyfill CDN Unavailable.** If a polyfill script fails to load (network error, CDN down), `polyfill-loader.js` logs a warning to the console. The contact form may fail to submit via AJAX. The page falls back to a non-JavaScript, full-page-reload form submission method if a standard `<form action>` attribute is present as a progressive enhancement fallback.\n2. **A2: Modern Browser.** If all feature detections pass (e.g., Chrome, Firefox, Edge, Safari 10+), `polyfill-loader.js` takes no action and exits. No polyfill scripts are injected, preserving performance.\n3. **A3: Partial Support.** Browser has `Promise` but lacks `fetch`. Only the `whatwg-fetch` polyfill is injected. The form submission logic using `fetch` becomes functional.\n\n**7. Postconditions**\n\n*   The contact form's JavaScript-driven submission (preventing default reload, sending data via `fetch`) works in the target older browsers.\n*   The CSS Grid/Flexbox layout renders correctly, and CSS variable-based theming (if used) applies.\n*   No uncaught JavaScript errors related to missing modern APIs appear in the console of tested legacy browsers.\n*   Modern browsers experience zero overhead from polyfill loading.\n\n**8. Data Impact**\n\nNone. This feature only affects client-side code delivery and execution. No server-side data structures or storage are modified.\n\n**9. UI Impact**\n\nNone. There is no visible change to the user interface. The polyfills operate transparently to ensure existing UI elements (form, layout) behave as designed.\n\n**10. Acceptance Criteria**\n\n1. **AC1:** The landing page loads without JavaScript errors in Internet Explorer 11.\n2. **AC2:** In IE11, the contact form successfully sends a test submission via the `fetch`-based AJAX method and displays the success/error message without a full page reload.\n3. **AC3:** The responsive layout (e.g., stacking of hero/content on mobile) renders correctly in IE11 and an Android 4.4 browser.\n4. **AC4:** In a modern browser (e.g., Chrome 120), the Network tab shows ZERO requests for polyfill libraries.\n5. **AC5:** The `polyfill-loader.js` script executes synchronously in the `<head>` before `main.js`. ## Non-Functional Requirements\n6. Runtime: Node.js-Service mit Endpunkten fuer den iterativen Compiler.\n7. Umgebung: Dockerisierte Local/Dev-Ausfuehrung mit reproduzierbarem Build und Health-Endpoint.\n8. Abhaengigkeiten: LLM-Provider-Integration mit Model-Fallback-Strategie.\n9. Auslieferung: Aenderungen werden mit TypeScript-Check und End-to-End-API-Smoke-Run validiert. ## Error Handling & Recovery\n10. Ungueltiges oder fehlendes strukturiertes Delta erzwingt einen strikten Fallback auf den vorherigen stabilen PRD-Zustand.\n11. Fehler bei Section-Regeneration im Freeze-Mode fallen sicher zurueck, ohne Feature-Verlust.\n12. Parse-Fehler gelten nur dann als non-blocking, wenn Integritaet weiterhin garantiert ist.\n13. Alle Fallback-Pfade werden mit explizitem Grund und Iterationsnummer protokolliert. ## Deployment & Infrastructure\n14. Runtime: Node.js-Service mit Endpunkten fuer den iterativen Compiler.\n15. Umgebung: Dockerisierte Local/Dev-Ausfuehrung mit reproduzierbarem Build und Health-Endpoint.\n16. Abhaengigkeiten: LLM-Provider-Integration mit Model-Fallback-Strategie.\n17. Auslieferung: Aenderungen werden mit TypeScript-Check und End-to-End-API-Smoke-Run validiert. ## Definition of Done\n18. Erforderliche PRD-Sektionen sind vorhanden und nicht leer.\n19. Die Feature-Anzahl faellt nicht unter die gefrorene Baseline.\n20. Es bleiben keine doppelten Feature-IDs oder doppelten Feature-Namen bestehen.\n21. Der iterative Lauf schliesst mit gueltigem finalen PRD und Diagnostics ab.\n\n## Non-Functional Requirements\n\n- Runtime: Node.js-Service mit Endpunkten fuer den iterativen Compiler.\n- Umgebung: Dockerisierte Local/Dev-Ausfuehrung mit reproduzierbarem Build und Health-Endpoint.\n- Abhaengigkeiten: LLM-Provider-Integration mit Model-Fallback-Strategie.\n- Auslieferung: Aenderungen werden mit TypeScript-Check und End-to-End-API-Smoke-Run validiert.\n\n## Error Handling & Recovery\n\n- Ungueltiges oder fehlendes strukturiertes Delta erzwingt einen strikten Fallback auf den vorherigen stabilen PRD-Zustand.\n- Fehler bei Section-Regeneration im Freeze-Mode fallen sicher zurueck, ohne Feature-Verlust.\n- Parse-Fehler gelten nur dann als non-blocking, wenn Integritaet weiterhin garantiert ist.\n- Alle Fallback-Pfade werden mit explizitem Grund und Iterationsnummer protokolliert.\n\n## Deployment & Infrastructure\n\n- Runtime: Node.js-Service mit Endpunkten fuer den iterativen Compiler.\n- Umgebung: Dockerisierte Local/Dev-Ausfuehrung mit reproduzierbarem Build und Health-Endpoint.\n- Abhaengigkeiten: LLM-Provider-Integration mit Model-Fallback-Strategie.\n- Auslieferung: Aenderungen werden mit TypeScript-Check und End-to-End-API-Smoke-Run validiert.\n\n## Definition of Done\n\n- Erforderliche PRD-Sektionen sind vorhanden und nicht leer.\n- Die Feature-Anzahl faellt nicht unter die gefrorene Baseline.\n- Es bleiben keine doppelten Feature-IDs oder doppelten Feature-Namen bestehen.\n- Der iterative Lauf schliesst mit gueltigem finalen PRD und Diagnostics ab.\n",
      "tokensUsed": 20801
    }
  ],
  "totalTokens": 27511,
  "modelsUsed": [
    "openai/gpt-oss-120b:free",
    "meta-llama/llama-3.3-70b-instruct:free"
  ],
  "diagnostics": {
    "structuredFeatureCount": 15,
    "totalFeatureCount": 15,
    "jsonSectionUpdates": 1,
    "markdownSectionRegens": 0,
    "fullRegenerations": 1,
    "featurePreservations": 0,
    "featureIntegrityRestores": 0,
    "featureQualityRegressions": 0,
    "autoRecoveredFeatures": 0,
    "avgFeatureCompleteness": 10,
    "driftEvents": 0,
    "featureFreezeActive": true,
    "blockedRegenerationAttempts": 0,
    "freezeSeedSource": "compiledExpansion"
  }
}
